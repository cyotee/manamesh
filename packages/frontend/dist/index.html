<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ManaMesh - Decentralized Card Game Platform</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, sans-serif;
        background-color: #1a1a2e;
        color: #e4e4e4;
      }
    </style>
    <script type="module" crossorigin>var kg=Object.defineProperty;var _g=(e,t,r)=>t in e?kg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var le=(e,t,r)=>_g(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var z0={exports:{}},qa={},L0={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=Symbol.for("react.element"),Cg=Symbol.for("react.portal"),Mg=Symbol.for("react.fragment"),Eg=Symbol.for("react.strict_mode"),Ag=Symbol.for("react.profiler"),Ig=Symbol.for("react.provider"),Rg=Symbol.for("react.context"),Og=Symbol.for("react.forward_ref"),jg=Symbol.for("react.suspense"),Ng=Symbol.for("react.memo"),Tg=Symbol.for("react.lazy"),dh=Symbol.iterator;function Dg(e){return e===null||typeof e!="object"?null:(e=dh&&e[dh]||e["@@iterator"],typeof e=="function"?e:null)}var $0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F0=Object.assign,U0={};function Ki(e,t,r){this.props=e,this.context=t,this.refs=U0,this.updater=r||$0}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ki.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function H0(){}H0.prototype=Ki.prototype;function hf(e,t,r){this.props=e,this.context=t,this.refs=U0,this.updater=r||$0}var pf=hf.prototype=new H0;pf.constructor=hf;F0(pf,Ki.prototype);pf.isPureReactComponent=!0;var hh=Array.isArray,W0=Object.prototype.hasOwnProperty,yf={current:null},q0={key:!0,ref:!0,__self:!0,__source:!0};function K0(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)W0.call(t,n)&&!q0.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:so,type:e,key:s,ref:o,props:i,_owner:yf.current}}function Bg(e,t){return{$$typeof:so,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mf(e){return typeof e=="object"&&e!==null&&e.$$typeof===so}function zg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ph=/\/+/g;function Ql(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zg(""+e.key):t.toString(36)}function qo(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case so:case Cg:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+Ql(o,0):n,hh(i)?(r="",e!=null&&(r=e.replace(ph,"$&/")+"/"),qo(i,t,r,"",function(f){return f})):i!=null&&(mf(i)&&(i=Bg(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ph,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",hh(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+Ql(s,a);o+=qo(s,t,r,l,i)}else if(l=Dg(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+Ql(s,a++),o+=qo(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function bo(e,t,r){if(e==null)return e;var n=[],i=0;return qo(e,n,"","",function(s){return t.call(r,s,i++)}),n}function Lg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},Ko={transition:null},$g={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:Ko,ReactCurrentOwner:yf};function V0(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:bo,forEach:function(e,t,r){bo(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bo(e,function(){t++}),t},toArray:function(e){return bo(e,function(t){return t})||[]},only:function(e){if(!mf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Ki;oe.Fragment=Mg;oe.Profiler=Ag;oe.PureComponent=hf;oe.StrictMode=Eg;oe.Suspense=jg;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$g;oe.act=V0;oe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=F0({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=yf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)W0.call(t,l)&&!q0.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];n.children=a}return{$$typeof:so,type:e.type,key:i,ref:s,props:n,_owner:o}};oe.createContext=function(e){return e={$$typeof:Rg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ig,_context:e},e.Consumer=e};oe.createElement=K0;oe.createFactory=function(e){var t=K0.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:Og,render:e}};oe.isValidElement=mf;oe.lazy=function(e){return{$$typeof:Tg,_payload:{_status:-1,_result:e},_init:Lg}};oe.memo=function(e,t){return{$$typeof:Ng,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Ko.transition;Ko.transition={};try{e()}finally{Ko.transition=t}};oe.unstable_act=V0;oe.useCallback=function(e,t){return Rt.current.useCallback(e,t)};oe.useContext=function(e){return Rt.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};oe.useEffect=function(e,t){return Rt.current.useEffect(e,t)};oe.useId=function(){return Rt.current.useId()};oe.useImperativeHandle=function(e,t,r){return Rt.current.useImperativeHandle(e,t,r)};oe.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return Rt.current.useMemo(e,t)};oe.useReducer=function(e,t,r){return Rt.current.useReducer(e,t,r)};oe.useRef=function(e){return Rt.current.useRef(e)};oe.useState=function(e){return Rt.current.useState(e)};oe.useSyncExternalStore=function(e,t,r){return Rt.current.useSyncExternalStore(e,t,r)};oe.useTransition=function(){return Rt.current.useTransition()};oe.version="18.3.1";L0.exports=oe;var H=L0.exports;const G=B0(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=H,Ug=Symbol.for("react.element"),Hg=Symbol.for("react.fragment"),Wg=Object.prototype.hasOwnProperty,qg=Fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kg={key:!0,ref:!0,__self:!0,__source:!0};function J0(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Wg.call(t,n)&&!Kg.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Ug,type:e,key:s,ref:o,props:i,_owner:qg.current}}qa.Fragment=Hg;qa.jsx=J0;qa.jsxs=J0;z0.exports=qa;var p=z0.exports,Yc={},Y0={exports:{}},Yt={},Q0={exports:{}},X0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,x){var u=E.length;E.push(x);e:for(;0<u;){var _=u-1>>>1,$=E[_];if(0<i($,x))E[_]=x,E[u]=$,u=_;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var x=E[0],u=E.pop();if(u!==x){E[0]=u;e:for(var _=0,$=E.length,J=$>>>1;_<J;){var Y=2*(_+1)-1,B=E[Y],W=Y+1,X=E[W];if(0>i(B,u))W<$&&0>i(X,B)?(E[_]=X,E[W]=u,_=W):(E[_]=B,E[Y]=u,_=Y);else if(W<$&&0>i(X,u))E[_]=X,E[W]=u,_=W;else break e}}return x}function i(E,x){var u=E.sortIndex-x.sortIndex;return u!==0?u:E.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],f=[],d=1,y=null,m=3,b=!1,k=!1,M=!1,N=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(E){for(var x=r(f);x!==null;){if(x.callback===null)n(f);else if(x.startTime<=E)n(f),x.sortIndex=x.expirationTime,t(l,x);else break;x=r(f)}}function j(E){if(M=!1,P(E),!k)if(r(l)!==null)k=!0,C(D);else{var x=r(f);x!==null&&R(j,x.startTime-E)}}function D(E,x){k=!1,M&&(M=!1,S(L),L=-1),b=!0;var u=m;try{for(P(x),y=r(l);y!==null&&(!(y.expirationTime>x)||E&&!A());){var _=y.callback;if(typeof _=="function"){y.callback=null,m=y.priorityLevel;var $=_(y.expirationTime<=x);x=e.unstable_now(),typeof $=="function"?y.callback=$:y===r(l)&&n(l),P(x)}else n(l);y=r(l)}if(y!==null)var J=!0;else{var Y=r(f);Y!==null&&R(j,Y.startTime-x),J=!1}return J}finally{y=null,m=u,b=!1}}var F=!1,T=null,L=-1,V=5,ee=-1;function A(){return!(e.unstable_now()-ee<V)}function c(){if(T!==null){var E=e.unstable_now();ee=E;var x=!0;try{x=T(!0,E)}finally{x?h():(F=!1,T=null)}}else F=!1}var h;if(typeof v=="function")h=function(){v(c)};else if(typeof MessageChannel<"u"){var g=new MessageChannel,w=g.port2;g.port1.onmessage=c,h=function(){w.postMessage(null)}}else h=function(){N(c,0)};function C(E){T=E,F||(F=!0,h())}function R(E,x){L=N(function(){E(e.unstable_now())},x)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){k||b||(k=!0,C(D))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(E){switch(m){case 1:case 2:case 3:var x=3;break;default:x=m}var u=m;m=x;try{return E()}finally{m=u}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,x){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var u=m;m=E;try{return x()}finally{m=u}},e.unstable_scheduleCallback=function(E,x,u){var _=e.unstable_now();switch(typeof u=="object"&&u!==null?(u=u.delay,u=typeof u=="number"&&0<u?_+u:_):u=_,E){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=u+$,E={id:d++,callback:x,priorityLevel:E,startTime:u,expirationTime:$,sortIndex:-1},u>_?(E.sortIndex=u,t(f,E),r(l)===null&&E===r(f)&&(M?(S(L),L=-1):M=!0,R(j,u-_))):(E.sortIndex=$,t(l,E),k||b||(k=!0,C(D))),E},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(E){var x=m;return function(){var u=m;m=x;try{return E.apply(this,arguments)}finally{m=u}}}})(X0);Q0.exports=X0;var Vg=Q0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg=H,Kt=Vg;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z0=new Set,Bs={};function ai(e,t){ji(e,t),ji(e+"Capture",t)}function ji(e,t){for(Bs[e]=t,e=0;e<t.length;e++)Z0.add(t[e])}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qc=Object.prototype.hasOwnProperty,Yg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yh={},mh={};function Qg(e){return Qc.call(mh,e)?!0:Qc.call(yh,e)?!1:Yg.test(e)?mh[e]=!0:(yh[e]=!0,!1)}function Xg(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zg(e,t,r,n){if(t===null||typeof t>"u"||Xg(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ht[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ht[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ht[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ht[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ht[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ht[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ht[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ht[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ht[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function gf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vf,gf);ht[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vf,gf);ht[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vf,gf);ht[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ht[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ht[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function bf(e,t,r,n){var i=ht.hasOwnProperty(t)?ht[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zg(t,r,i,n)&&(r=null),n||i===null?Qg(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var nn=Jg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xo=Symbol.for("react.element"),hi=Symbol.for("react.portal"),pi=Symbol.for("react.fragment"),xf=Symbol.for("react.strict_mode"),Xc=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),e1=Symbol.for("react.context"),wf=Symbol.for("react.forward_ref"),Zc=Symbol.for("react.suspense"),Gc=Symbol.for("react.suspense_list"),Sf=Symbol.for("react.memo"),fn=Symbol.for("react.lazy"),t1=Symbol.for("react.offscreen"),vh=Symbol.iterator;function is(e){return e===null||typeof e!="object"?null:(e=vh&&e[vh]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,Xl;function gs(e){if(Xl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Xl=t&&t[1]||""}return`
`+Xl+e}var Zl=!1;function Gl(e,t){if(!e||Zl)return"";Zl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var n=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){n=f}e.call(t.prototype)}else{try{throw Error()}catch(f){n=f}e()}}catch(f){if(f&&n&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?gs(e):""}function Gg(e){switch(e.tag){case 5:return gs(e.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return e=Gl(e.type,!1),e;case 11:return e=Gl(e.type.render,!1),e;case 1:return e=Gl(e.type,!0),e;default:return""}}function eu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pi:return"Fragment";case hi:return"Portal";case Xc:return"Profiler";case xf:return"StrictMode";case Zc:return"Suspense";case Gc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case e1:return(e.displayName||"Context")+".Consumer";case G0:return(e._context.displayName||"Context")+".Provider";case wf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sf:return t=e.displayName||null,t!==null?t:eu(e.type)||"Memo";case fn:t=e._payload,e=e._init;try{return eu(e(t))}catch{}}return null}function eb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eu(t);case 8:return t===xf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function An(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function r1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tb(e){var t=r1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wo(e){e._valueTracker||(e._valueTracker=tb(e))}function n1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=r1(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function aa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tu(e,t){var r=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function gh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=An(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function i1(e,t){t=t.checked,t!=null&&bf(e,"checked",t,!1)}function ru(e,t){i1(e,t);var r=An(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nu(e,t.type,r):t.hasOwnProperty("defaultValue")&&nu(e,t.type,An(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function nu(e,t,r){(t!=="number"||aa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bs=Array.isArray;function Mi(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+An(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function iu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(U(92));if(bs(r)){if(1<r.length)throw Error(U(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:An(r)}}function s1(e,t){var r=An(t.value),n=An(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function wh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function o1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function su(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?o1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var So,a1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=So.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(e){rb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ms[t]=Ms[e]})});function l1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ms.hasOwnProperty(e)&&Ms[e]?(""+t).trim():t+"px"}function c1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=l1(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var nb=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ou(e,t){if(t){if(nb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function au(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lu=null;function kf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cu=null,Ei=null,Ai=null;function Sh(e){if(e=lo(e)){if(typeof cu!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Qa(t),cu(e.stateNode,e.type,t))}}function u1(e){Ei?Ai?Ai.push(e):Ai=[e]:Ei=e}function f1(){if(Ei){var e=Ei,t=Ai;if(Ai=Ei=null,Sh(e),t)for(e=0;e<t.length;e++)Sh(t[e])}}function d1(e,t){return e(t)}function h1(){}var ec=!1;function p1(e,t,r){if(ec)return e(t,r);ec=!0;try{return d1(e,t,r)}finally{ec=!1,(Ei!==null||Ai!==null)&&(h1(),f1())}}function Ls(e,t){var r=e.stateNode;if(r===null)return null;var n=Qa(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(U(231,t,typeof r));return r}var uu=!1;if(Qr)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){uu=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{uu=!1}function ib(e,t,r,n,i,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(d){this.onError(d)}}var Es=!1,la=null,ca=!1,fu=null,sb={onError:function(e){Es=!0,la=e}};function ob(e,t,r,n,i,s,o,a,l){Es=!1,la=null,ib.apply(sb,arguments)}function ab(e,t,r,n,i,s,o,a,l){if(ob.apply(this,arguments),Es){if(Es){var f=la;Es=!1,la=null}else throw Error(U(198));ca||(ca=!0,fu=f)}}function li(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function y1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kh(e){if(li(e)!==e)throw Error(U(188))}function lb(e){var t=e.alternate;if(!t){if(t=li(e),t===null)throw Error(U(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return kh(i),e;if(s===n)return kh(i),t;s=s.sibling}throw Error(U(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(r.alternate!==n)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?e:t}function m1(e){return e=lb(e),e!==null?v1(e):null}function v1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=v1(e);if(t!==null)return t;e=e.sibling}return null}var g1=Kt.unstable_scheduleCallback,_h=Kt.unstable_cancelCallback,cb=Kt.unstable_shouldYield,ub=Kt.unstable_requestPaint,je=Kt.unstable_now,fb=Kt.unstable_getCurrentPriorityLevel,_f=Kt.unstable_ImmediatePriority,b1=Kt.unstable_UserBlockingPriority,ua=Kt.unstable_NormalPriority,db=Kt.unstable_LowPriority,x1=Kt.unstable_IdlePriority,Ka=null,Er=null;function hb(e){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Ka,e,void 0,(e.current.flags&128)===128)}catch{}}var xr=Math.clz32?Math.clz32:mb,pb=Math.log,yb=Math.LN2;function mb(e){return e>>>=0,e===0?32:31-(pb(e)/yb|0)|0}var ko=64,_o=4194304;function xs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fa(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=xs(a):(s&=o,s!==0&&(n=xs(s)))}else o=r&~i,o!==0?n=xs(o):s!==0&&(n=xs(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-xr(t),i=1<<r,n|=e[r],t&=~i;return n}function vb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gb(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-xr(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=vb(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function du(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function w1(){var e=ko;return ko<<=1,!(ko&4194240)&&(ko=64),e}function tc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function oo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xr(t),e[t]=r}function bb(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-xr(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function Pf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-xr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var ye=0;function S1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var k1,Cf,_1,P1,C1,hu=!1,Po=[],bn=null,xn=null,wn=null,$s=new Map,Fs=new Map,hn=[],xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ph(e,t){switch(e){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":$s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(t.pointerId)}}function os(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=lo(t),t!==null&&Cf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function wb(e,t,r,n,i){switch(t){case"focusin":return bn=os(bn,e,t,r,n,i),!0;case"dragenter":return xn=os(xn,e,t,r,n,i),!0;case"mouseover":return wn=os(wn,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return $s.set(s,os($s.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Fs.set(s,os(Fs.get(s)||null,e,t,r,n,i)),!0}return!1}function M1(e){var t=Vn(e.target);if(t!==null){var r=li(t);if(r!==null){if(t=r.tag,t===13){if(t=y1(r),t!==null){e.blockedOn=t,C1(e.priority,function(){_1(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);lu=n,r.target.dispatchEvent(n),lu=null}else return t=lo(r),t!==null&&Cf(t),e.blockedOn=r,!1;t.shift()}return!0}function Ch(e,t,r){Vo(e)&&r.delete(t)}function Sb(){hu=!1,bn!==null&&Vo(bn)&&(bn=null),xn!==null&&Vo(xn)&&(xn=null),wn!==null&&Vo(wn)&&(wn=null),$s.forEach(Ch),Fs.forEach(Ch)}function as(e,t){e.blockedOn===t&&(e.blockedOn=null,hu||(hu=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,Sb)))}function Us(e){function t(i){return as(i,e)}if(0<Po.length){as(Po[0],e);for(var r=1;r<Po.length;r++){var n=Po[r];n.blockedOn===e&&(n.blockedOn=null)}}for(bn!==null&&as(bn,e),xn!==null&&as(xn,e),wn!==null&&as(wn,e),$s.forEach(t),Fs.forEach(t),r=0;r<hn.length;r++)n=hn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<hn.length&&(r=hn[0],r.blockedOn===null);)M1(r),r.blockedOn===null&&hn.shift()}var Ii=nn.ReactCurrentBatchConfig,da=!0;function kb(e,t,r,n){var i=ye,s=Ii.transition;Ii.transition=null;try{ye=1,Mf(e,t,r,n)}finally{ye=i,Ii.transition=s}}function _b(e,t,r,n){var i=ye,s=Ii.transition;Ii.transition=null;try{ye=4,Mf(e,t,r,n)}finally{ye=i,Ii.transition=s}}function Mf(e,t,r,n){if(da){var i=pu(e,t,r,n);if(i===null)fc(e,t,n,ha,r),Ph(e,n);else if(wb(i,e,t,r,n))n.stopPropagation();else if(Ph(e,n),t&4&&-1<xb.indexOf(e)){for(;i!==null;){var s=lo(i);if(s!==null&&k1(s),s=pu(e,t,r,n),s===null&&fc(e,t,n,ha,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else fc(e,t,n,null,r)}}var ha=null;function pu(e,t,r,n){if(ha=null,e=kf(n),e=Vn(e),e!==null)if(t=li(e),t===null)e=null;else if(r=t.tag,r===13){if(e=y1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ha=e,null}function E1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fb()){case _f:return 1;case b1:return 4;case ua:case db:return 16;case x1:return 536870912;default:return 16}default:return 16}}var yn=null,Ef=null,Jo=null;function A1(){if(Jo)return Jo;var e,t=Ef,r=t.length,n,i="value"in yn?yn.value:yn.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return Jo=i.slice(e,1<n?1-n:void 0)}function Yo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Co(){return!0}function Mh(){return!1}function Qt(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Co:Mh,this.isPropagationStopped=Mh,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),t}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Af=Qt(Vi),ao=Ee({},Vi,{view:0,detail:0}),Pb=Qt(ao),rc,nc,ls,Va=Ee({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:If,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&e.type==="mousemove"?(rc=e.screenX-ls.screenX,nc=e.screenY-ls.screenY):nc=rc=0,ls=e),rc)},movementY:function(e){return"movementY"in e?e.movementY:nc}}),Eh=Qt(Va),Cb=Ee({},Va,{dataTransfer:0}),Mb=Qt(Cb),Eb=Ee({},ao,{relatedTarget:0}),ic=Qt(Eb),Ab=Ee({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ib=Qt(Ab),Rb=Ee({},Vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ob=Qt(Rb),jb=Ee({},Vi,{data:0}),Ah=Qt(jb),Nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Db={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Db[e])?!!t[e]:!1}function If(){return Bb}var zb=Ee({},ao,{key:function(e){if(e.key){var t=Nb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:If,charCode:function(e){return e.type==="keypress"?Yo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lb=Qt(zb),$b=Ee({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ih=Qt($b),Fb=Ee({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:If}),Ub=Qt(Fb),Hb=Ee({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wb=Qt(Hb),qb=Ee({},Va,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kb=Qt(qb),Vb=[9,13,27,32],Rf=Qr&&"CompositionEvent"in window,As=null;Qr&&"documentMode"in document&&(As=document.documentMode);var Jb=Qr&&"TextEvent"in window&&!As,I1=Qr&&(!Rf||As&&8<As&&11>=As),Rh=" ",Oh=!1;function R1(e,t){switch(e){case"keyup":return Vb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yi=!1;function Yb(e,t){switch(e){case"compositionend":return O1(t);case"keypress":return t.which!==32?null:(Oh=!0,Rh);case"textInput":return e=t.data,e===Rh&&Oh?null:e;default:return null}}function Qb(e,t){if(yi)return e==="compositionend"||!Rf&&R1(e,t)?(e=A1(),Jo=Ef=yn=null,yi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return I1&&t.locale!=="ko"?null:t.data;default:return null}}var Xb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xb[e.type]:t==="textarea"}function j1(e,t,r,n){u1(n),t=pa(t,"onChange"),0<t.length&&(r=new Af("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Is=null,Hs=null;function Zb(e){W1(e,0)}function Ja(e){var t=gi(e);if(n1(t))return e}function Gb(e,t){if(e==="change")return t}var N1=!1;if(Qr){var sc;if(Qr){var oc="oninput"in document;if(!oc){var Nh=document.createElement("div");Nh.setAttribute("oninput","return;"),oc=typeof Nh.oninput=="function"}sc=oc}else sc=!1;N1=sc&&(!document.documentMode||9<document.documentMode)}function Th(){Is&&(Is.detachEvent("onpropertychange",T1),Hs=Is=null)}function T1(e){if(e.propertyName==="value"&&Ja(Hs)){var t=[];j1(t,Hs,e,kf(e)),p1(Zb,t)}}function e2(e,t,r){e==="focusin"?(Th(),Is=t,Hs=r,Is.attachEvent("onpropertychange",T1)):e==="focusout"&&Th()}function t2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ja(Hs)}function r2(e,t){if(e==="click")return Ja(t)}function n2(e,t){if(e==="input"||e==="change")return Ja(t)}function i2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sr=typeof Object.is=="function"?Object.is:i2;function Ws(e,t){if(Sr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Qc.call(t,i)||!Sr(e[i],t[i]))return!1}return!0}function Dh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bh(e,t){var r=Dh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Dh(r)}}function D1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?D1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function B1(){for(var e=window,t=aa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=aa(e.document)}return t}function Of(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function s2(e){var t=B1(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&D1(r.ownerDocument.documentElement,r)){if(n!==null&&Of(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=Bh(r,s);var o=Bh(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var o2=Qr&&"documentMode"in document&&11>=document.documentMode,mi=null,yu=null,Rs=null,mu=!1;function zh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mu||mi==null||mi!==aa(n)||(n=mi,"selectionStart"in n&&Of(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Rs&&Ws(Rs,n)||(Rs=n,n=pa(yu,"onSelect"),0<n.length&&(t=new Af("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=mi)))}function Mo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vi={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionend:Mo("Transition","TransitionEnd")},ac={},z1={};Qr&&(z1=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Ya(e){if(ac[e])return ac[e];if(!vi[e])return e;var t=vi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in z1)return ac[e]=t[r];return e}var L1=Ya("animationend"),$1=Ya("animationiteration"),F1=Ya("animationstart"),U1=Ya("transitionend"),H1=new Map,Lh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(e,t){H1.set(e,t),ai(t,[e])}for(var lc=0;lc<Lh.length;lc++){var cc=Lh[lc],a2=cc.toLowerCase(),l2=cc[0].toUpperCase()+cc.slice(1);jn(a2,"on"+l2)}jn(L1,"onAnimationEnd");jn($1,"onAnimationIteration");jn(F1,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn(U1,"onTransitionEnd");ji("onMouseEnter",["mouseout","mouseover"]);ji("onMouseLeave",["mouseout","mouseover"]);ji("onPointerEnter",["pointerout","pointerover"]);ji("onPointerLeave",["pointerout","pointerover"]);ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ws));function $h(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ab(n,t,void 0,e),e.currentTarget=null}function W1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$h(i,a,f),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$h(i,a,f),s=l}}}if(ca)throw e=fu,ca=!1,fu=null,e}function xe(e,t){var r=t[wu];r===void 0&&(r=t[wu]=new Set);var n=e+"__bubble";r.has(n)||(q1(t,e,2,!1),r.add(n))}function uc(e,t,r){var n=0;t&&(n|=4),q1(r,e,n,t)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function qs(e){if(!e[Eo]){e[Eo]=!0,Z0.forEach(function(r){r!=="selectionchange"&&(c2.has(r)||uc(r,!1,e),uc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Eo]||(t[Eo]=!0,uc("selectionchange",!1,t))}}function q1(e,t,r,n){switch(E1(t)){case 1:var i=kb;break;case 4:i=_b;break;default:i=Mf}r=i.bind(null,t,r,e),i=void 0,!uu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function fc(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Vn(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}p1(function(){var f=s,d=kf(r),y=[];e:{var m=H1.get(e);if(m!==void 0){var b=Af,k=e;switch(e){case"keypress":if(Yo(r)===0)break e;case"keydown":case"keyup":b=Lb;break;case"focusin":k="focus",b=ic;break;case"focusout":k="blur",b=ic;break;case"beforeblur":case"afterblur":b=ic;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Mb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Ub;break;case L1:case $1:case F1:b=Ib;break;case U1:b=Wb;break;case"scroll":b=Pb;break;case"wheel":b=Kb;break;case"copy":case"cut":case"paste":b=Ob;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Ih}var M=(t&4)!==0,N=!M&&e==="scroll",S=M?m!==null?m+"Capture":null:m;M=[];for(var v=f,P;v!==null;){P=v;var j=P.stateNode;if(P.tag===5&&j!==null&&(P=j,S!==null&&(j=Ls(v,S),j!=null&&M.push(Ks(v,j,P)))),N)break;v=v.return}0<M.length&&(m=new b(m,k,null,r,d),y.push({event:m,listeners:M}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",m&&r!==lu&&(k=r.relatedTarget||r.fromElement)&&(Vn(k)||k[Xr]))break e;if((b||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,b?(k=r.relatedTarget||r.toElement,b=f,k=k?Vn(k):null,k!==null&&(N=li(k),k!==N||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=f),b!==k)){if(M=Eh,j="onMouseLeave",S="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(M=Ih,j="onPointerLeave",S="onPointerEnter",v="pointer"),N=b==null?m:gi(b),P=k==null?m:gi(k),m=new M(j,v+"leave",b,r,d),m.target=N,m.relatedTarget=P,j=null,Vn(d)===f&&(M=new M(S,v+"enter",k,r,d),M.target=P,M.relatedTarget=N,j=M),N=j,b&&k)t:{for(M=b,S=k,v=0,P=M;P;P=fi(P))v++;for(P=0,j=S;j;j=fi(j))P++;for(;0<v-P;)M=fi(M),v--;for(;0<P-v;)S=fi(S),P--;for(;v--;){if(M===S||S!==null&&M===S.alternate)break t;M=fi(M),S=fi(S)}M=null}else M=null;b!==null&&Fh(y,m,b,M,!1),k!==null&&N!==null&&Fh(y,N,k,M,!0)}}e:{if(m=f?gi(f):window,b=m.nodeName&&m.nodeName.toLowerCase(),b==="select"||b==="input"&&m.type==="file")var D=Gb;else if(jh(m))if(N1)D=n2;else{D=t2;var F=e2}else(b=m.nodeName)&&b.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=r2);if(D&&(D=D(e,f))){j1(y,D,r,d);break e}F&&F(e,m,f),e==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&nu(m,"number",m.value)}switch(F=f?gi(f):window,e){case"focusin":(jh(F)||F.contentEditable==="true")&&(mi=F,yu=f,Rs=null);break;case"focusout":Rs=yu=mi=null;break;case"mousedown":mu=!0;break;case"contextmenu":case"mouseup":case"dragend":mu=!1,zh(y,r,d);break;case"selectionchange":if(o2)break;case"keydown":case"keyup":zh(y,r,d)}var T;if(Rf)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else yi?R1(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(I1&&r.locale!=="ko"&&(yi||L!=="onCompositionStart"?L==="onCompositionEnd"&&yi&&(T=A1()):(yn=d,Ef="value"in yn?yn.value:yn.textContent,yi=!0)),F=pa(f,L),0<F.length&&(L=new Ah(L,e,null,r,d),y.push({event:L,listeners:F}),T?L.data=T:(T=O1(r),T!==null&&(L.data=T)))),(T=Jb?Yb(e,r):Qb(e,r))&&(f=pa(f,"onBeforeInput"),0<f.length&&(d=new Ah("onBeforeInput","beforeinput",null,r,d),y.push({event:d,listeners:f}),d.data=T))}W1(y,t)})}function Ks(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pa(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ls(e,r),s!=null&&n.unshift(Ks(e,s,i)),s=Ls(e,t),s!=null&&n.push(Ks(e,s,i))),e=e.return}return n}function fi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fh(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,f=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&f!==null&&(a=f,i?(l=Ls(r,s),l!=null&&o.unshift(Ks(r,l,a))):i||(l=Ls(r,s),l!=null&&o.push(Ks(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var u2=/\r\n?/g,f2=/\u0000|\uFFFD/g;function Uh(e){return(typeof e=="string"?e:""+e).replace(u2,`
`).replace(f2,"")}function Ao(e,t,r){if(t=Uh(t),Uh(e)!==t&&r)throw Error(U(425))}function ya(){}var vu=null,gu=null;function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xu=typeof setTimeout=="function"?setTimeout:void 0,d2=typeof clearTimeout=="function"?clearTimeout:void 0,Hh=typeof Promise=="function"?Promise:void 0,h2=typeof queueMicrotask=="function"?queueMicrotask:typeof Hh<"u"?function(e){return Hh.resolve(null).then(e).catch(p2)}:xu;function p2(e){setTimeout(function(){throw e})}function dc(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Us(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Us(t)}function Sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ji=Math.random().toString(36).slice(2),Mr="__reactFiber$"+Ji,Vs="__reactProps$"+Ji,Xr="__reactContainer$"+Ji,wu="__reactEvents$"+Ji,y2="__reactListeners$"+Ji,m2="__reactHandles$"+Ji;function Vn(e){var t=e[Mr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Xr]||r[Mr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Wh(e);e!==null;){if(r=e[Mr])return r;e=Wh(e)}return t}e=r,r=e.parentNode}return null}function lo(e){return e=e[Mr]||e[Xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Qa(e){return e[Vs]||null}var Su=[],bi=-1;function Nn(e){return{current:e}}function we(e){0>bi||(e.current=Su[bi],Su[bi]=null,bi--)}function ge(e,t){bi++,Su[bi]=e.current,e.current=t}var In={},_t=Nn(In),Dt=Nn(!1),ei=In;function Ni(e,t){var r=e.type.contextTypes;if(!r)return In;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Bt(e){return e=e.childContextTypes,e!=null}function ma(){we(Dt),we(_t)}function qh(e,t,r){if(_t.current!==In)throw Error(U(168));ge(_t,t),ge(Dt,r)}function K1(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(U(108,eb(e)||"Unknown",i));return Ee({},r,n)}function va(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||In,ei=_t.current,ge(_t,e),ge(Dt,Dt.current),!0}function Kh(e,t,r){var n=e.stateNode;if(!n)throw Error(U(169));r?(e=K1(e,t,ei),n.__reactInternalMemoizedMergedChildContext=e,we(Dt),we(_t),ge(_t,e)):we(Dt),ge(Dt,r)}var Wr=null,Xa=!1,hc=!1;function V1(e){Wr===null?Wr=[e]:Wr.push(e)}function v2(e){Xa=!0,V1(e)}function Tn(){if(!hc&&Wr!==null){hc=!0;var e=0,t=ye;try{var r=Wr;for(ye=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Wr=null,Xa=!1}catch(i){throw Wr!==null&&(Wr=Wr.slice(e+1)),g1(_f,Tn),i}finally{ye=t,hc=!1}}return null}var xi=[],wi=0,ga=null,ba=0,Zt=[],Gt=0,ti=null,qr=1,Kr="";function Hn(e,t){xi[wi++]=ba,xi[wi++]=ga,ga=e,ba=t}function J1(e,t,r){Zt[Gt++]=qr,Zt[Gt++]=Kr,Zt[Gt++]=ti,ti=e;var n=qr;e=Kr;var i=32-xr(n)-1;n&=~(1<<i),r+=1;var s=32-xr(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,qr=1<<32-xr(t)+i|r<<i|n,Kr=s+e}else qr=1<<s|r<<i|n,Kr=e}function jf(e){e.return!==null&&(Hn(e,1),J1(e,1,0))}function Nf(e){for(;e===ga;)ga=xi[--wi],xi[wi]=null,ba=xi[--wi],xi[wi]=null;for(;e===ti;)ti=Zt[--Gt],Zt[Gt]=null,Kr=Zt[--Gt],Zt[Gt]=null,qr=Zt[--Gt],Zt[Gt]=null}var qt=null,Ht=null,_e=!1,vr=null;function Y1(e,t){var r=tr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Vh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qt=e,Ht=Sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qt=e,Ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ti!==null?{id:qr,overflow:Kr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=tr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,qt=e,Ht=null,!0):!1;default:return!1}}function ku(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _u(e){if(_e){var t=Ht;if(t){var r=t;if(!Vh(e,t)){if(ku(e))throw Error(U(418));t=Sn(r.nextSibling);var n=qt;t&&Vh(e,t)?Y1(n,r):(e.flags=e.flags&-4097|2,_e=!1,qt=e)}}else{if(ku(e))throw Error(U(418));e.flags=e.flags&-4097|2,_e=!1,qt=e}}}function Jh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qt=e}function Io(e){if(e!==qt)return!1;if(!_e)return Jh(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bu(e.type,e.memoizedProps)),t&&(t=Ht)){if(ku(e))throw Q1(),Error(U(418));for(;t;)Y1(e,t),t=Sn(t.nextSibling)}if(Jh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ht=Sn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ht=null}}else Ht=qt?Sn(e.stateNode.nextSibling):null;return!0}function Q1(){for(var e=Ht;e;)e=Sn(e.nextSibling)}function Ti(){Ht=qt=null,_e=!1}function Tf(e){vr===null?vr=[e]:vr.push(e)}var g2=nn.ReactCurrentBatchConfig;function cs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var n=r.stateNode}if(!n)throw Error(U(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,e))}return e}function Ro(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yh(e){var t=e._init;return t(e._payload)}function X1(e){function t(S,v){if(e){var P=S.deletions;P===null?(S.deletions=[v],S.flags|=16):P.push(v)}}function r(S,v){if(!e)return null;for(;v!==null;)t(S,v),v=v.sibling;return null}function n(S,v){for(S=new Map;v!==null;)v.key!==null?S.set(v.key,v):S.set(v.index,v),v=v.sibling;return S}function i(S,v){return S=Cn(S,v),S.index=0,S.sibling=null,S}function s(S,v,P){return S.index=P,e?(P=S.alternate,P!==null?(P=P.index,P<v?(S.flags|=2,v):P):(S.flags|=2,v)):(S.flags|=1048576,v)}function o(S){return e&&S.alternate===null&&(S.flags|=2),S}function a(S,v,P,j){return v===null||v.tag!==6?(v=xc(P,S.mode,j),v.return=S,v):(v=i(v,P),v.return=S,v)}function l(S,v,P,j){var D=P.type;return D===pi?d(S,v,P.props.children,j,P.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===fn&&Yh(D)===v.type)?(j=i(v,P.props),j.ref=cs(S,v,P),j.return=S,j):(j=ra(P.type,P.key,P.props,null,S.mode,j),j.ref=cs(S,v,P),j.return=S,j)}function f(S,v,P,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==P.containerInfo||v.stateNode.implementation!==P.implementation?(v=wc(P,S.mode,j),v.return=S,v):(v=i(v,P.children||[]),v.return=S,v)}function d(S,v,P,j,D){return v===null||v.tag!==7?(v=Xn(P,S.mode,j,D),v.return=S,v):(v=i(v,P),v.return=S,v)}function y(S,v,P){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xc(""+v,S.mode,P),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xo:return P=ra(v.type,v.key,v.props,null,S.mode,P),P.ref=cs(S,null,v),P.return=S,P;case hi:return v=wc(v,S.mode,P),v.return=S,v;case fn:var j=v._init;return y(S,j(v._payload),P)}if(bs(v)||is(v))return v=Xn(v,S.mode,P,null),v.return=S,v;Ro(S,v)}return null}function m(S,v,P,j){var D=v!==null?v.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return D!==null?null:a(S,v,""+P,j);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case xo:return P.key===D?l(S,v,P,j):null;case hi:return P.key===D?f(S,v,P,j):null;case fn:return D=P._init,m(S,v,D(P._payload),j)}if(bs(P)||is(P))return D!==null?null:d(S,v,P,j,null);Ro(S,P)}return null}function b(S,v,P,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(P)||null,a(v,S,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case xo:return S=S.get(j.key===null?P:j.key)||null,l(v,S,j,D);case hi:return S=S.get(j.key===null?P:j.key)||null,f(v,S,j,D);case fn:var F=j._init;return b(S,v,P,F(j._payload),D)}if(bs(j)||is(j))return S=S.get(P)||null,d(v,S,j,D,null);Ro(v,j)}return null}function k(S,v,P,j){for(var D=null,F=null,T=v,L=v=0,V=null;T!==null&&L<P.length;L++){T.index>L?(V=T,T=null):V=T.sibling;var ee=m(S,T,P[L],j);if(ee===null){T===null&&(T=V);break}e&&T&&ee.alternate===null&&t(S,T),v=s(ee,v,L),F===null?D=ee:F.sibling=ee,F=ee,T=V}if(L===P.length)return r(S,T),_e&&Hn(S,L),D;if(T===null){for(;L<P.length;L++)T=y(S,P[L],j),T!==null&&(v=s(T,v,L),F===null?D=T:F.sibling=T,F=T);return _e&&Hn(S,L),D}for(T=n(S,T);L<P.length;L++)V=b(T,S,L,P[L],j),V!==null&&(e&&V.alternate!==null&&T.delete(V.key===null?L:V.key),v=s(V,v,L),F===null?D=V:F.sibling=V,F=V);return e&&T.forEach(function(A){return t(S,A)}),_e&&Hn(S,L),D}function M(S,v,P,j){var D=is(P);if(typeof D!="function")throw Error(U(150));if(P=D.call(P),P==null)throw Error(U(151));for(var F=D=null,T=v,L=v=0,V=null,ee=P.next();T!==null&&!ee.done;L++,ee=P.next()){T.index>L?(V=T,T=null):V=T.sibling;var A=m(S,T,ee.value,j);if(A===null){T===null&&(T=V);break}e&&T&&A.alternate===null&&t(S,T),v=s(A,v,L),F===null?D=A:F.sibling=A,F=A,T=V}if(ee.done)return r(S,T),_e&&Hn(S,L),D;if(T===null){for(;!ee.done;L++,ee=P.next())ee=y(S,ee.value,j),ee!==null&&(v=s(ee,v,L),F===null?D=ee:F.sibling=ee,F=ee);return _e&&Hn(S,L),D}for(T=n(S,T);!ee.done;L++,ee=P.next())ee=b(T,S,L,ee.value,j),ee!==null&&(e&&ee.alternate!==null&&T.delete(ee.key===null?L:ee.key),v=s(ee,v,L),F===null?D=ee:F.sibling=ee,F=ee);return e&&T.forEach(function(c){return t(S,c)}),_e&&Hn(S,L),D}function N(S,v,P,j){if(typeof P=="object"&&P!==null&&P.type===pi&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case xo:e:{for(var D=P.key,F=v;F!==null;){if(F.key===D){if(D=P.type,D===pi){if(F.tag===7){r(S,F.sibling),v=i(F,P.props.children),v.return=S,S=v;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===fn&&Yh(D)===F.type){r(S,F.sibling),v=i(F,P.props),v.ref=cs(S,F,P),v.return=S,S=v;break e}r(S,F);break}else t(S,F);F=F.sibling}P.type===pi?(v=Xn(P.props.children,S.mode,j,P.key),v.return=S,S=v):(j=ra(P.type,P.key,P.props,null,S.mode,j),j.ref=cs(S,v,P),j.return=S,S=j)}return o(S);case hi:e:{for(F=P.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===P.containerInfo&&v.stateNode.implementation===P.implementation){r(S,v.sibling),v=i(v,P.children||[]),v.return=S,S=v;break e}else{r(S,v);break}else t(S,v);v=v.sibling}v=wc(P,S.mode,j),v.return=S,S=v}return o(S);case fn:return F=P._init,N(S,v,F(P._payload),j)}if(bs(P))return k(S,v,P,j);if(is(P))return M(S,v,P,j);Ro(S,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,v!==null&&v.tag===6?(r(S,v.sibling),v=i(v,P),v.return=S,S=v):(r(S,v),v=xc(P,S.mode,j),v.return=S,S=v),o(S)):r(S,v)}return N}var Di=X1(!0),Z1=X1(!1),xa=Nn(null),wa=null,Si=null,Df=null;function Bf(){Df=Si=wa=null}function zf(e){var t=xa.current;we(xa),e._currentValue=t}function Pu(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ri(e,t){wa=e,Df=Si=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function nr(e){var t=e._currentValue;if(Df!==e)if(e={context:e,memoizedValue:t,next:null},Si===null){if(wa===null)throw Error(U(308));Si=e,wa.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Jn=null;function Lf(e){Jn===null?Jn=[e]:Jn.push(e)}function G1(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Lf(t)):(r.next=i.next,i.next=r),t.interleaved=r,Zr(e,n)}function Zr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var dn=!1;function $f(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ey(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,de&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Zr(e,r)}return i=n.interleaved,i===null?(t.next=t,Lf(n)):(t.next=i.next,i.next=t),n.interleaved=t,Zr(e,r)}function Qo(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Pf(e,r)}}function Qh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Sa(e,t,r,n){var i=e.updateQueue;dn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=l))}if(s!==null){var y=i.baseState;o=0,d=f=l=null,a=s;do{var m=a.lane,b=a.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:b,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=e,M=a;switch(m=t,b=r,M.tag){case 1:if(k=M.payload,typeof k=="function"){y=k.call(b,y,m);break e}y=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=M.payload,m=typeof k=="function"?k.call(b,y,m):k,m==null)break e;y=Ee({},y,m);break e;case 2:dn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else b={eventTime:b,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=b,l=y):d=d.next=b,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=y),i.baseState=l,i.firstBaseUpdate=f,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ni|=o,e.lanes=o,e.memoizedState=y}}function Xh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(U(191,i));i.call(n)}}}var co={},Ar=Nn(co),Js=Nn(co),Ys=Nn(co);function Yn(e){if(e===co)throw Error(U(174));return e}function Ff(e,t){switch(ge(Ys,t),ge(Js,e),ge(Ar,co),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:su(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=su(t,e)}we(Ar),ge(Ar,t)}function Bi(){we(Ar),we(Js),we(Ys)}function ty(e){Yn(Ys.current);var t=Yn(Ar.current),r=su(t,e.type);t!==r&&(ge(Js,e),ge(Ar,r))}function Uf(e){Js.current===e&&(we(Ar),we(Js))}var Ce=Nn(0);function ka(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pc=[];function Hf(){for(var e=0;e<pc.length;e++)pc[e]._workInProgressVersionPrimary=null;pc.length=0}var Xo=nn.ReactCurrentDispatcher,yc=nn.ReactCurrentBatchConfig,ri=0,Me=null,nt=null,ot=null,_a=!1,Os=!1,Qs=0,b2=0;function mt(){throw Error(U(321))}function Wf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Sr(e[r],t[r]))return!1;return!0}function qf(e,t,r,n,i,s){if(ri=s,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xo.current=e===null||e.memoizedState===null?k2:_2,e=r(n,i),Os){s=0;do{if(Os=!1,Qs=0,25<=s)throw Error(U(301));s+=1,ot=nt=null,t.updateQueue=null,Xo.current=P2,e=r(n,i)}while(Os)}if(Xo.current=Pa,t=nt!==null&&nt.next!==null,ri=0,ot=nt=Me=null,_a=!1,t)throw Error(U(300));return e}function Kf(){var e=Qs!==0;return Qs=0,e}function Pr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Me.memoizedState=ot=e:ot=ot.next=e,ot}function ir(){if(nt===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=ot===null?Me.memoizedState:ot.next;if(t!==null)ot=t,nt=e;else{if(e===null)throw Error(U(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?Me.memoizedState=ot=e:ot=ot.next=e}return ot}function Xs(e,t){return typeof t=="function"?t(e):t}function mc(e){var t=ir(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var n=nt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,f=s;do{var d=f.lane;if((ri&d)===d)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),n=f.hasEagerState?f.eagerState:e(n,f.action);else{var y={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=y,o=n):l=l.next=y,Me.lanes|=d,ni|=d}f=f.next}while(f!==null&&f!==s);l===null?o=n:l.next=a,Sr(n,t.memoizedState)||(Tt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,Me.lanes|=s,ni|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function vc(e){var t=ir(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Sr(s,t.memoizedState)||(Tt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function ry(){}function ny(e,t){var r=Me,n=ir(),i=t(),s=!Sr(n.memoizedState,i);if(s&&(n.memoizedState=i,Tt=!0),n=n.queue,Vf(oy.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||ot!==null&&ot.memoizedState.tag&1){if(r.flags|=2048,Zs(9,sy.bind(null,r,n,i,t),void 0,null),at===null)throw Error(U(349));ri&30||iy(r,t,i)}return i}function iy(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function sy(e,t,r,n){t.value=r,t.getSnapshot=n,ay(t)&&ly(e)}function oy(e,t,r){return r(function(){ay(t)&&ly(e)})}function ay(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Sr(e,r)}catch{return!0}}function ly(e){var t=Zr(e,1);t!==null&&wr(t,e,1,-1)}function Zh(e){var t=Pr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:e},t.queue=e,e=e.dispatch=S2.bind(null,Me,e),[t.memoizedState,e]}function Zs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function cy(){return ir().memoizedState}function Zo(e,t,r,n){var i=Pr();Me.flags|=e,i.memoizedState=Zs(1|t,r,void 0,n===void 0?null:n)}function Za(e,t,r,n){var i=ir();n=n===void 0?null:n;var s=void 0;if(nt!==null){var o=nt.memoizedState;if(s=o.destroy,n!==null&&Wf(n,o.deps)){i.memoizedState=Zs(t,r,s,n);return}}Me.flags|=e,i.memoizedState=Zs(1|t,r,s,n)}function Gh(e,t){return Zo(8390656,8,e,t)}function Vf(e,t){return Za(2048,8,e,t)}function uy(e,t){return Za(4,2,e,t)}function fy(e,t){return Za(4,4,e,t)}function dy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hy(e,t,r){return r=r!=null?r.concat([e]):null,Za(4,4,dy.bind(null,t,e),r)}function Jf(){}function py(e,t){var r=ir();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Wf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function yy(e,t){var r=ir();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Wf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function my(e,t,r){return ri&21?(Sr(r,t)||(r=w1(),Me.lanes|=r,ni|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=r)}function x2(e,t){var r=ye;ye=r!==0&&4>r?r:4,e(!0);var n=yc.transition;yc.transition={};try{e(!1),t()}finally{ye=r,yc.transition=n}}function vy(){return ir().memoizedState}function w2(e,t,r){var n=Pn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},gy(e))by(t,r);else if(r=G1(e,t,r,n),r!==null){var i=It();wr(r,e,n,i),xy(r,t,n)}}function S2(e,t,r){var n=Pn(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(gy(e))by(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Sr(a,o)){var l=t.interleaved;l===null?(i.next=i,Lf(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=G1(e,t,i,n),r!==null&&(i=It(),wr(r,e,n,i),xy(r,t,n))}}function gy(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function by(e,t){Os=_a=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function xy(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Pf(e,r)}}var Pa={readContext:nr,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},k2={readContext:nr,useCallback:function(e,t){return Pr().memoizedState=[e,t===void 0?null:t],e},useContext:nr,useEffect:Gh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Zo(4194308,4,dy.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zo(4,2,e,t)},useMemo:function(e,t){var r=Pr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Pr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=w2.bind(null,Me,e),[n.memoizedState,e]},useRef:function(e){var t=Pr();return e={current:e},t.memoizedState=e},useState:Zh,useDebugValue:Jf,useDeferredValue:function(e){return Pr().memoizedState=e},useTransition:function(){var e=Zh(!1),t=e[0];return e=x2.bind(null,e[1]),Pr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Me,i=Pr();if(_e){if(r===void 0)throw Error(U(407));r=r()}else{if(r=t(),at===null)throw Error(U(349));ri&30||iy(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,Gh(oy.bind(null,n,s,e),[e]),n.flags|=2048,Zs(9,sy.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Pr(),t=at.identifierPrefix;if(_e){var r=Kr,n=qr;r=(n&~(1<<32-xr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=b2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_2={readContext:nr,useCallback:py,useContext:nr,useEffect:Vf,useImperativeHandle:hy,useInsertionEffect:uy,useLayoutEffect:fy,useMemo:yy,useReducer:mc,useRef:cy,useState:function(){return mc(Xs)},useDebugValue:Jf,useDeferredValue:function(e){var t=ir();return my(t,nt.memoizedState,e)},useTransition:function(){var e=mc(Xs)[0],t=ir().memoizedState;return[e,t]},useMutableSource:ry,useSyncExternalStore:ny,useId:vy,unstable_isNewReconciler:!1},P2={readContext:nr,useCallback:py,useContext:nr,useEffect:Vf,useImperativeHandle:hy,useInsertionEffect:uy,useLayoutEffect:fy,useMemo:yy,useReducer:vc,useRef:cy,useState:function(){return vc(Xs)},useDebugValue:Jf,useDeferredValue:function(e){var t=ir();return nt===null?t.memoizedState=e:my(t,nt.memoizedState,e)},useTransition:function(){var e=vc(Xs)[0],t=ir().memoizedState;return[e,t]},useMutableSource:ry,useSyncExternalStore:ny,useId:vy,unstable_isNewReconciler:!1};function pr(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Cu(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ee({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ga={isMounted:function(e){return(e=e._reactInternals)?li(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=It(),i=Pn(e),s=Jr(n,i);s.payload=t,r!=null&&(s.callback=r),t=kn(e,s,i),t!==null&&(wr(t,e,i,n),Qo(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=It(),i=Pn(e),s=Jr(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=kn(e,s,i),t!==null&&(wr(t,e,i,n),Qo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=It(),n=Pn(e),i=Jr(r,n);i.tag=2,t!=null&&(i.callback=t),t=kn(e,i,n),t!==null&&(wr(t,e,n,r),Qo(t,e,n))}};function ep(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!Ws(r,n)||!Ws(i,s):!0}function wy(e,t,r){var n=!1,i=In,s=t.contextType;return typeof s=="object"&&s!==null?s=nr(s):(i=Bt(t)?ei:_t.current,n=t.contextTypes,s=(n=n!=null)?Ni(e,i):In),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ga,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function tp(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ga.enqueueReplaceState(t,t.state,null)}function Mu(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},$f(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=nr(s):(s=Bt(t)?ei:_t.current,i.context=Ni(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Cu(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ga.enqueueReplaceState(i,i.state,null),Sa(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function zi(e,t){try{var r="",n=t;do r+=Gg(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function gc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Eu(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var C2=typeof WeakMap=="function"?WeakMap:Map;function Sy(e,t,r){r=Jr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ma||(Ma=!0,zu=n),Eu(e,t)},r}function ky(e,t,r){r=Jr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Eu(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Eu(e,t),typeof n!="function"&&(_n===null?_n=new Set([this]):_n.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function rp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new C2;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=$2.bind(null,e,t,r),t.then(e,e))}function np(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ip(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Jr(-1,1),t.tag=2,kn(r,t,1))),r.lanes|=1),e)}var M2=nn.ReactCurrentOwner,Tt=!1;function Mt(e,t,r,n){t.child=e===null?Z1(t,null,r,n):Di(t,e.child,r,n)}function sp(e,t,r,n,i){r=r.render;var s=t.ref;return Ri(t,i),n=qf(e,t,r,n,s,i),r=Kf(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gr(e,t,i)):(_e&&r&&jf(t),t.flags|=1,Mt(e,t,n,i),t.child)}function op(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!rd(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,_y(e,t,s,n,i)):(e=ra(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Ws,r(o,n)&&e.ref===t.ref)return Gr(e,t,i)}return t.flags|=1,e=Cn(s,n),e.ref=t.ref,e.return=t,t.child=e}function _y(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(Ws(s,n)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Gr(e,t,i)}return Au(e,t,r,n,i)}function Py(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(_i,Ut),Ut|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(_i,Ut),Ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ge(_i,Ut),Ut|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,ge(_i,Ut),Ut|=n;return Mt(e,t,i,r),t.child}function Cy(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Au(e,t,r,n,i){var s=Bt(r)?ei:_t.current;return s=Ni(t,s),Ri(t,i),r=qf(e,t,r,n,s,i),n=Kf(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gr(e,t,i)):(_e&&n&&jf(t),t.flags|=1,Mt(e,t,r,i),t.child)}function ap(e,t,r,n,i){if(Bt(r)){var s=!0;va(t)}else s=!1;if(Ri(t,i),t.stateNode===null)Go(e,t),wy(t,r,n),Mu(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,f=r.contextType;typeof f=="object"&&f!==null?f=nr(f):(f=Bt(r)?ei:_t.current,f=Ni(t,f));var d=r.getDerivedStateFromProps,y=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==f)&&tp(t,o,n,f),dn=!1;var m=t.memoizedState;o.state=m,Sa(t,n,o,i),l=t.memoizedState,a!==n||m!==l||Dt.current||dn?(typeof d=="function"&&(Cu(t,r,d,n),l=t.memoizedState),(a=dn||ep(t,r,a,n,m,l,f))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=f,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,ey(e,t),a=t.memoizedProps,f=t.type===t.elementType?a:pr(t.type,a),o.props=f,y=t.pendingProps,m=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=nr(l):(l=Bt(r)?ei:_t.current,l=Ni(t,l));var b=r.getDerivedStateFromProps;(d=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==y||m!==l)&&tp(t,o,n,l),dn=!1,m=t.memoizedState,o.state=m,Sa(t,n,o,i);var k=t.memoizedState;a!==y||m!==k||Dt.current||dn?(typeof b=="function"&&(Cu(t,r,b,n),k=t.memoizedState),(f=dn||ep(t,r,f,n,m,k,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,k,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,k,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=k),o.props=n,o.state=k,o.context=l,n=f):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Iu(e,t,r,n,s,i)}function Iu(e,t,r,n,i,s){Cy(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&Kh(t,r,!1),Gr(e,t,s);n=t.stateNode,M2.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Di(t,e.child,null,s),t.child=Di(t,null,a,s)):Mt(e,t,a,s),t.memoizedState=n.state,i&&Kh(t,r,!0),t.child}function My(e){var t=e.stateNode;t.pendingContext?qh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qh(e,t.context,!1),Ff(e,t.containerInfo)}function lp(e,t,r,n,i){return Ti(),Tf(i),t.flags|=256,Mt(e,t,r,n),t.child}var Ru={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ey(e,t,r){var n=t.pendingProps,i=Ce.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ge(Ce,i&1),e===null)return _u(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=rl(o,n,0,null),e=Xn(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ou(r),t.memoizedState=Ru,e):Yf(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return E2(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Cn(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Cn(a,s):(s=Xn(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?Ou(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Ru,n}return s=e.child,e=s.sibling,n=Cn(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Yf(e,t){return t=rl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oo(e,t,r,n){return n!==null&&Tf(n),Di(t,e.child,null,r),e=Yf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E2(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=gc(Error(U(422))),Oo(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=rl({mode:"visible",children:n.children},i,0,null),s=Xn(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Di(t,e.child,null,o),t.child.memoizedState=Ou(o),t.memoizedState=Ru,s);if(!(t.mode&1))return Oo(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(U(419)),n=gc(s,n,void 0),Oo(e,t,o,n)}if(a=(o&e.childLanes)!==0,Tt||a){if(n=at,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zr(e,i),wr(n,e,i,-1))}return td(),n=gc(Error(U(421))),Oo(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=F2.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ht=Sn(i.nextSibling),qt=t,_e=!0,vr=null,e!==null&&(Zt[Gt++]=qr,Zt[Gt++]=Kr,Zt[Gt++]=ti,qr=e.id,Kr=e.overflow,ti=t),t=Yf(t,n.children),t.flags|=4096,t)}function cp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Pu(e.return,t,r)}function bc(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Ay(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Mt(e,t,n.children,r),n=Ce.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cp(e,r,t);else if(e.tag===19)cp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ge(Ce,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&ka(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),bc(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ka(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}bc(t,!0,r,null,s);break;case"together":bc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Go(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ni|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,r=Cn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Cn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function A2(e,t,r){switch(t.tag){case 3:My(t),Ti();break;case 5:ty(t);break;case 1:Bt(t.type)&&va(t);break;case 4:Ff(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;ge(xa,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ge(Ce,Ce.current&1),t.flags|=128,null):r&t.child.childLanes?Ey(e,t,r):(ge(Ce,Ce.current&1),e=Gr(e,t,r),e!==null?e.sibling:null);ge(Ce,Ce.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Ay(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Ce,Ce.current),n)break;return null;case 22:case 23:return t.lanes=0,Py(e,t,r)}return Gr(e,t,r)}var Iy,ju,Ry,Oy;Iy=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ju=function(){};Ry=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Yn(Ar.current);var s=null;switch(r){case"input":i=tu(e,i),n=tu(e,n),s=[];break;case"select":i=Ee({},i,{value:void 0}),n=Ee({},n,{value:void 0}),s=[];break;case"textarea":i=iu(e,i),n=iu(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ya)}ou(r,n);var o;r=null;for(f in i)if(!n.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Bs.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in n){var l=n[f];if(a=i!=null?i[f]:void 0,n.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(f,r)),r=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Bs.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&xe("scroll",e),s||a===l||(s=[])):(s=s||[]).push(f,l))}r&&(s=s||[]).push("style",r);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};Oy=function(e,t,r,n){r!==n&&(t.flags|=4)};function us(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function I2(e,t,r){var n=t.pendingProps;switch(Nf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Bt(t.type)&&ma(),vt(t),null;case 3:return n=t.stateNode,Bi(),we(Dt),we(_t),Hf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Io(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vr!==null&&(Fu(vr),vr=null))),ju(e,t),vt(t),null;case 5:Uf(t);var i=Yn(Ys.current);if(r=t.type,e!==null&&t.stateNode!=null)Ry(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(U(166));return vt(t),null}if(e=Yn(Ar.current),Io(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Mr]=t,n[Vs]=s,e=(t.mode&1)!==0,r){case"dialog":xe("cancel",n),xe("close",n);break;case"iframe":case"object":case"embed":xe("load",n);break;case"video":case"audio":for(i=0;i<ws.length;i++)xe(ws[i],n);break;case"source":xe("error",n);break;case"img":case"image":case"link":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"input":gh(n,s),xe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},xe("invalid",n);break;case"textarea":xh(n,s),xe("invalid",n)}ou(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ao(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ao(n.textContent,a,e),i=["children",""+a]):Bs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",n)}switch(r){case"input":wo(n),bh(n,s,!0);break;case"textarea":wo(n),wh(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ya)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=o1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Mr]=t,e[Vs]=n,Iy(e,t,!1,!1),t.stateNode=e;e:{switch(o=au(r,n),r){case"dialog":xe("cancel",e),xe("close",e),i=n;break;case"iframe":case"object":case"embed":xe("load",e),i=n;break;case"video":case"audio":for(i=0;i<ws.length;i++)xe(ws[i],e);i=n;break;case"source":xe("error",e),i=n;break;case"img":case"image":case"link":xe("error",e),xe("load",e),i=n;break;case"details":xe("toggle",e),i=n;break;case"input":gh(e,n),i=tu(e,n),xe("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ee({},n,{value:void 0}),xe("invalid",e);break;case"textarea":xh(e,n),i=iu(e,n),xe("invalid",e);break;default:i=n}ou(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?c1(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&a1(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&zs(e,l):typeof l=="number"&&zs(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",e):l!=null&&bf(e,s,l,o))}switch(r){case"input":wo(e),bh(e,n,!1);break;case"textarea":wo(e),wh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+An(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Mi(e,!!n.multiple,s,!1):n.defaultValue!=null&&Mi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ya)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)Oy(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(U(166));if(r=Yn(Ys.current),Yn(Ar.current),Io(t)){if(n=t.stateNode,r=t.memoizedProps,n[Mr]=t,(s=n.nodeValue!==r)&&(e=qt,e!==null))switch(e.tag){case 3:Ao(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ao(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Mr]=t,t.stateNode=n}return vt(t),null;case 13:if(we(Ce),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&Ht!==null&&t.mode&1&&!(t.flags&128))Q1(),Ti(),t.flags|=98560,s=!1;else if(s=Io(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(U(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Mr]=t}else Ti(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),s=!1}else vr!==null&&(Fu(vr),vr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ce.current&1?it===0&&(it=3):td())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Bi(),ju(e,t),e===null&&qs(t.stateNode.containerInfo),vt(t),null;case 10:return zf(t.type._context),vt(t),null;case 17:return Bt(t.type)&&ma(),vt(t),null;case 19:if(we(Ce),s=t.memoizedState,s===null)return vt(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)us(s,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ka(e),o!==null){for(t.flags|=128,us(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ge(Ce,Ce.current&1|2),t.child}e=e.sibling}s.tail!==null&&je()>Li&&(t.flags|=128,n=!0,us(s,!1),t.lanes=4194304)}else{if(!n)if(e=ka(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),us(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_e)return vt(t),null}else 2*je()-s.renderingStartTime>Li&&r!==1073741824&&(t.flags|=128,n=!0,us(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=je(),t.sibling=null,r=Ce.current,ge(Ce,n?r&1|2:r&1),t):(vt(t),null);case 22:case 23:return ed(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ut&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function R2(e,t){switch(Nf(t),t.tag){case 1:return Bt(t.type)&&ma(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bi(),we(Dt),we(_t),Hf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uf(t),null;case 13:if(we(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(Ce),null;case 4:return Bi(),null;case 10:return zf(t.type._context),null;case 22:case 23:return ed(),null;case 24:return null;default:return null}}var jo=!1,wt=!1,O2=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ki(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Re(e,t,n)}else r.current=null}function Nu(e,t,r){try{r()}catch(n){Re(e,t,n)}}var up=!1;function j2(e,t){if(vu=da,e=B1(),Of(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,f=0,d=0,y=e,m=null;t:for(;;){for(var b;y!==r||i!==0&&y.nodeType!==3||(a=o+i),y!==s||n!==0&&y.nodeType!==3||(l=o+n),y.nodeType===3&&(o+=y.nodeValue.length),(b=y.firstChild)!==null;)m=y,y=b;for(;;){if(y===e)break t;if(m===r&&++f===i&&(a=o),m===s&&++d===n&&(l=o),(b=y.nextSibling)!==null)break;y=m,m=y.parentNode}y=b}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(gu={focusedElem:e,selectionRange:r},da=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var M=k.memoizedProps,N=k.memoizedState,S=t.stateNode,v=S.getSnapshotBeforeUpdate(t.elementType===t.type?M:pr(t.type,M),N);S.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(j){Re(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return k=up,up=!1,k}function js(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Nu(t,r,s)}i=i.next}while(i!==n)}}function el(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Tu(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jy(e){var t=e.alternate;t!==null&&(e.alternate=null,jy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mr],delete t[Vs],delete t[wu],delete t[y2],delete t[m2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ny(e){return e.tag===5||e.tag===3||e.tag===4}function fp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ny(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Du(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ya));else if(n!==4&&(e=e.child,e!==null))for(Du(e,t,r),e=e.sibling;e!==null;)Du(e,t,r),e=e.sibling}function Bu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Bu(e,t,r),e=e.sibling;e!==null;)Bu(e,t,r),e=e.sibling}var ft=null,yr=!1;function ln(e,t,r){for(r=r.child;r!==null;)Ty(e,t,r),r=r.sibling}function Ty(e,t,r){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Ka,r)}catch{}switch(r.tag){case 5:wt||ki(r,t);case 6:var n=ft,i=yr;ft=null,ln(e,t,r),ft=n,yr=i,ft!==null&&(yr?(e=ft,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ft.removeChild(r.stateNode));break;case 18:ft!==null&&(yr?(e=ft,r=r.stateNode,e.nodeType===8?dc(e.parentNode,r):e.nodeType===1&&dc(e,r),Us(e)):dc(ft,r.stateNode));break;case 4:n=ft,i=yr,ft=r.stateNode.containerInfo,yr=!0,ln(e,t,r),ft=n,yr=i;break;case 0:case 11:case 14:case 15:if(!wt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Nu(r,t,o),i=i.next}while(i!==n)}ln(e,t,r);break;case 1:if(!wt&&(ki(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Re(r,t,a)}ln(e,t,r);break;case 21:ln(e,t,r);break;case 22:r.mode&1?(wt=(n=wt)||r.memoizedState!==null,ln(e,t,r),wt=n):ln(e,t,r);break;default:ln(e,t,r)}}function dp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new O2),t.forEach(function(n){var i=U2.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function fr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,yr=!1;break e;case 3:ft=a.stateNode.containerInfo,yr=!0;break e;case 4:ft=a.stateNode.containerInfo,yr=!0;break e}a=a.return}if(ft===null)throw Error(U(160));Ty(s,o,i),ft=null,yr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(f){Re(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dy(t,e),t=t.sibling}function Dy(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fr(t,e),_r(e),n&4){try{js(3,e,e.return),el(3,e)}catch(M){Re(e,e.return,M)}try{js(5,e,e.return)}catch(M){Re(e,e.return,M)}}break;case 1:fr(t,e),_r(e),n&512&&r!==null&&ki(r,r.return);break;case 5:if(fr(t,e),_r(e),n&512&&r!==null&&ki(r,r.return),e.flags&32){var i=e.stateNode;try{zs(i,"")}catch(M){Re(e,e.return,M)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&i1(i,s),au(a,o);var f=au(a,s);for(o=0;o<l.length;o+=2){var d=l[o],y=l[o+1];d==="style"?c1(i,y):d==="dangerouslySetInnerHTML"?a1(i,y):d==="children"?zs(i,y):bf(i,d,y,f)}switch(a){case"input":ru(i,s);break;case"textarea":s1(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?Mi(i,!!s.multiple,b,!1):m!==!!s.multiple&&(s.defaultValue!=null?Mi(i,!!s.multiple,s.defaultValue,!0):Mi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Vs]=s}catch(M){Re(e,e.return,M)}}break;case 6:if(fr(t,e),_r(e),n&4){if(e.stateNode===null)throw Error(U(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(M){Re(e,e.return,M)}}break;case 3:if(fr(t,e),_r(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Us(t.containerInfo)}catch(M){Re(e,e.return,M)}break;case 4:fr(t,e),_r(e);break;case 13:fr(t,e),_r(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zf=je())),n&4&&dp(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(wt=(f=wt)||d,fr(t,e),wt=f):fr(t,e),_r(e),n&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!d&&e.mode&1)for(Z=e,d=e.child;d!==null;){for(y=Z=d;Z!==null;){switch(m=Z,b=m.child,m.tag){case 0:case 11:case 14:case 15:js(4,m,m.return);break;case 1:ki(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(M){Re(n,r,M)}}break;case 5:ki(m,m.return);break;case 22:if(m.memoizedState!==null){pp(y);continue}}b!==null?(b.return=m,Z=b):pp(y)}d=d.sibling}e:for(d=null,y=e;;){if(y.tag===5){if(d===null){d=y;try{i=y.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=y.stateNode,l=y.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=l1("display",o))}catch(M){Re(e,e.return,M)}}}else if(y.tag===6){if(d===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(M){Re(e,e.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;d===y&&(d=null),y=y.return}d===y&&(d=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:fr(t,e),_r(e),n&4&&dp(e);break;case 21:break;default:fr(t,e),_r(e)}}function _r(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ny(r)){var n=r;break e}r=r.return}throw Error(U(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(zs(i,""),n.flags&=-33);var s=fp(e);Bu(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=fp(e);Du(e,a,o);break;default:throw Error(U(161))}}catch(l){Re(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function N2(e,t,r){Z=e,By(e)}function By(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||jo;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||wt;a=jo;var f=wt;if(jo=o,(wt=l)&&!f)for(Z=i;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?yp(i):l!==null?(l.return=o,Z=l):yp(i);for(;s!==null;)Z=s,By(s),s=s.sibling;Z=i,jo=a,wt=f}hp(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):hp(e)}}function hp(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||el(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!wt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:pr(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Xh(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Xh(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var y=d.dehydrated;y!==null&&Us(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}wt||t.flags&512&&Tu(t)}catch(m){Re(t,t.return,m)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function pp(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function yp(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{el(4,t)}catch(l){Re(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Re(t,i,l)}}var s=t.return;try{Tu(t)}catch(l){Re(t,s,l)}break;case 5:var o=t.return;try{Tu(t)}catch(l){Re(t,o,l)}}}catch(l){Re(t,t.return,l)}if(t===e){Z=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Z=a;break}Z=t.return}}var T2=Math.ceil,Ca=nn.ReactCurrentDispatcher,Qf=nn.ReactCurrentOwner,rr=nn.ReactCurrentBatchConfig,de=0,at=null,tt=null,dt=0,Ut=0,_i=Nn(0),it=0,Gs=null,ni=0,tl=0,Xf=0,Ns=null,Nt=null,Zf=0,Li=1/0,Ur=null,Ma=!1,zu=null,_n=null,No=!1,mn=null,Ea=0,Ts=0,Lu=null,ea=-1,ta=0;function It(){return de&6?je():ea!==-1?ea:ea=je()}function Pn(e){return e.mode&1?de&2&&dt!==0?dt&-dt:g2.transition!==null?(ta===0&&(ta=w1()),ta):(e=ye,e!==0||(e=window.event,e=e===void 0?16:E1(e.type)),e):1}function wr(e,t,r,n){if(50<Ts)throw Ts=0,Lu=null,Error(U(185));oo(e,r,n),(!(de&2)||e!==at)&&(e===at&&(!(de&2)&&(tl|=r),it===4&&pn(e,dt)),zt(e,n),r===1&&de===0&&!(t.mode&1)&&(Li=je()+500,Xa&&Tn()))}function zt(e,t){var r=e.callbackNode;gb(e,t);var n=fa(e,e===at?dt:0);if(n===0)r!==null&&_h(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&_h(r),t===1)e.tag===0?v2(mp.bind(null,e)):V1(mp.bind(null,e)),h2(function(){!(de&6)&&Tn()}),r=null;else{switch(S1(n)){case 1:r=_f;break;case 4:r=b1;break;case 16:r=ua;break;case 536870912:r=x1;break;default:r=ua}r=qy(r,zy.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function zy(e,t){if(ea=-1,ta=0,de&6)throw Error(U(327));var r=e.callbackNode;if(Oi()&&e.callbackNode!==r)return null;var n=fa(e,e===at?dt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Aa(e,n);else{t=n;var i=de;de|=2;var s=$y();(at!==e||dt!==t)&&(Ur=null,Li=je()+500,Qn(e,t));do try{z2();break}catch(a){Ly(e,a)}while(!0);Bf(),Ca.current=s,de=i,tt!==null?t=0:(at=null,dt=0,t=it)}if(t!==0){if(t===2&&(i=du(e),i!==0&&(n=i,t=$u(e,i))),t===1)throw r=Gs,Qn(e,0),pn(e,n),zt(e,je()),r;if(t===6)pn(e,n);else{if(i=e.current.alternate,!(n&30)&&!D2(i)&&(t=Aa(e,n),t===2&&(s=du(e),s!==0&&(n=s,t=$u(e,s))),t===1))throw r=Gs,Qn(e,0),pn(e,n),zt(e,je()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(U(345));case 2:Wn(e,Nt,Ur);break;case 3:if(pn(e,n),(n&130023424)===n&&(t=Zf+500-je(),10<t)){if(fa(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){It(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=xu(Wn.bind(null,e,Nt,Ur),t);break}Wn(e,Nt,Ur);break;case 4:if(pn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-xr(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*T2(n/1960))-n,10<n){e.timeoutHandle=xu(Wn.bind(null,e,Nt,Ur),n);break}Wn(e,Nt,Ur);break;case 5:Wn(e,Nt,Ur);break;default:throw Error(U(329))}}}return zt(e,je()),e.callbackNode===r?zy.bind(null,e):null}function $u(e,t){var r=Ns;return e.current.memoizedState.isDehydrated&&(Qn(e,t).flags|=256),e=Aa(e,t),e!==2&&(t=Nt,Nt=r,t!==null&&Fu(t)),e}function Fu(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function D2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Sr(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pn(e,t){for(t&=~Xf,t&=~tl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-xr(t),n=1<<r;e[r]=-1,t&=~n}}function mp(e){if(de&6)throw Error(U(327));Oi();var t=fa(e,0);if(!(t&1))return zt(e,je()),null;var r=Aa(e,t);if(e.tag!==0&&r===2){var n=du(e);n!==0&&(t=n,r=$u(e,n))}if(r===1)throw r=Gs,Qn(e,0),pn(e,t),zt(e,je()),r;if(r===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wn(e,Nt,Ur),zt(e,je()),null}function Gf(e,t){var r=de;de|=1;try{return e(t)}finally{de=r,de===0&&(Li=je()+500,Xa&&Tn())}}function ii(e){mn!==null&&mn.tag===0&&!(de&6)&&Oi();var t=de;de|=1;var r=rr.transition,n=ye;try{if(rr.transition=null,ye=1,e)return e()}finally{ye=n,rr.transition=r,de=t,!(de&6)&&Tn()}}function ed(){Ut=_i.current,we(_i)}function Qn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,d2(r)),tt!==null)for(r=tt.return;r!==null;){var n=r;switch(Nf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ma();break;case 3:Bi(),we(Dt),we(_t),Hf();break;case 5:Uf(n);break;case 4:Bi();break;case 13:we(Ce);break;case 19:we(Ce);break;case 10:zf(n.type._context);break;case 22:case 23:ed()}r=r.return}if(at=e,tt=e=Cn(e.current,null),dt=Ut=t,it=0,Gs=null,Xf=tl=ni=0,Nt=Ns=null,Jn!==null){for(t=0;t<Jn.length;t++)if(r=Jn[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Jn=null}return e}function Ly(e,t){do{var r=tt;try{if(Bf(),Xo.current=Pa,_a){for(var n=Me.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_a=!1}if(ri=0,ot=nt=Me=null,Os=!1,Qs=0,Qf.current=null,r===null||r.return===null){it=1,Gs=t,tt=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,d=a,y=d.tag;if(!(d.mode&1)&&(y===0||y===11||y===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var b=np(o);if(b!==null){b.flags&=-257,ip(b,o,a,s,t),b.mode&1&&rp(s,f,t),t=b,l=f;var k=t.updateQueue;if(k===null){var M=new Set;M.add(l),t.updateQueue=M}else k.add(l);break e}else{if(!(t&1)){rp(s,f,t),td();break e}l=Error(U(426))}}else if(_e&&a.mode&1){var N=np(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),ip(N,o,a,s,t),Tf(zi(l,a));break e}}s=l=zi(l,a),it!==4&&(it=2),Ns===null?Ns=[s]:Ns.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var S=Sy(s,l,t);Qh(s,S);break e;case 1:a=l;var v=s.type,P=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(_n===null||!_n.has(P)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=ky(s,a,t);Qh(s,j);break e}}s=s.return}while(s!==null)}Uy(r)}catch(D){t=D,tt===r&&r!==null&&(tt=r=r.return);continue}break}while(!0)}function $y(){var e=Ca.current;return Ca.current=Pa,e===null?Pa:e}function td(){(it===0||it===3||it===2)&&(it=4),at===null||!(ni&268435455)&&!(tl&268435455)||pn(at,dt)}function Aa(e,t){var r=de;de|=2;var n=$y();(at!==e||dt!==t)&&(Ur=null,Qn(e,t));do try{B2();break}catch(i){Ly(e,i)}while(!0);if(Bf(),de=r,Ca.current=n,tt!==null)throw Error(U(261));return at=null,dt=0,it}function B2(){for(;tt!==null;)Fy(tt)}function z2(){for(;tt!==null&&!cb();)Fy(tt)}function Fy(e){var t=Wy(e.alternate,e,Ut);e.memoizedProps=e.pendingProps,t===null?Uy(e):tt=t,Qf.current=null}function Uy(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=R2(r,t),r!==null){r.flags&=32767,tt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,tt=null;return}}else if(r=I2(r,t,Ut),r!==null){tt=r;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);it===0&&(it=5)}function Wn(e,t,r){var n=ye,i=rr.transition;try{rr.transition=null,ye=1,L2(e,t,r,n)}finally{rr.transition=i,ye=n}return null}function L2(e,t,r,n){do Oi();while(mn!==null);if(de&6)throw Error(U(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(bb(e,s),e===at&&(tt=at=null,dt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||No||(No=!0,qy(ua,function(){return Oi(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=rr.transition,rr.transition=null;var o=ye;ye=1;var a=de;de|=4,Qf.current=null,j2(e,r),Dy(r,e),s2(gu),da=!!vu,gu=vu=null,e.current=r,N2(r),ub(),de=a,ye=o,rr.transition=s}else e.current=r;if(No&&(No=!1,mn=e,Ea=i),s=e.pendingLanes,s===0&&(_n=null),hb(r.stateNode),zt(e,je()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ma)throw Ma=!1,e=zu,zu=null,e;return Ea&1&&e.tag!==0&&Oi(),s=e.pendingLanes,s&1?e===Lu?Ts++:(Ts=0,Lu=e):Ts=0,Tn(),null}function Oi(){if(mn!==null){var e=S1(Ea),t=rr.transition,r=ye;try{if(rr.transition=null,ye=16>e?16:e,mn===null)var n=!1;else{if(e=mn,mn=null,Ea=0,de&6)throw Error(U(331));var i=de;for(de|=4,Z=e.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(Z=f;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:js(8,d,s)}var y=d.child;if(y!==null)y.return=d,Z=y;else for(;Z!==null;){d=Z;var m=d.sibling,b=d.return;if(jy(d),d===f){Z=null;break}if(m!==null){m.return=b,Z=m;break}Z=b}}}var k=s.alternate;if(k!==null){var M=k.child;if(M!==null){k.child=null;do{var N=M.sibling;M.sibling=null,M=N}while(M!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:js(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,Z=S;break e}Z=s.return}}var v=e.current;for(Z=v;Z!==null;){o=Z;var P=o.child;if(o.subtreeFlags&2064&&P!==null)P.return=o,Z=P;else e:for(o=v;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:el(9,a)}}catch(D){Re(a,a.return,D)}if(a===o){Z=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,Z=j;break e}Z=a.return}}if(de=i,Tn(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Ka,e)}catch{}n=!0}return n}finally{ye=r,rr.transition=t}}return!1}function vp(e,t,r){t=zi(r,t),t=Sy(e,t,1),e=kn(e,t,1),t=It(),e!==null&&(oo(e,1,t),zt(e,t))}function Re(e,t,r){if(e.tag===3)vp(e,e,r);else for(;t!==null;){if(t.tag===3){vp(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_n===null||!_n.has(n))){e=zi(r,e),e=ky(t,e,1),t=kn(t,e,1),e=It(),t!==null&&(oo(t,1,e),zt(t,e));break}}t=t.return}}function $2(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&r,at===e&&(dt&r)===r&&(it===4||it===3&&(dt&130023424)===dt&&500>je()-Zf?Qn(e,0):Xf|=r),zt(e,t)}function Hy(e,t){t===0&&(e.mode&1?(t=_o,_o<<=1,!(_o&130023424)&&(_o=4194304)):t=1);var r=It();e=Zr(e,t),e!==null&&(oo(e,t,r),zt(e,r))}function F2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Hy(e,r)}function U2(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(t),Hy(e,r)}var Wy;Wy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dt.current)Tt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Tt=!1,A2(e,t,r);Tt=!!(e.flags&131072)}else Tt=!1,_e&&t.flags&1048576&&J1(t,ba,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Go(e,t),e=t.pendingProps;var i=Ni(t,_t.current);Ri(t,r),i=qf(null,t,n,e,i,r);var s=Kf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(n)?(s=!0,va(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$f(t),i.updater=Ga,t.stateNode=i,i._reactInternals=t,Mu(t,n,e,r),t=Iu(null,t,n,!0,s,r)):(t.tag=0,_e&&s&&jf(t),Mt(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Go(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=W2(n),e=pr(n,e),i){case 0:t=Au(null,t,n,e,r);break e;case 1:t=ap(null,t,n,e,r);break e;case 11:t=sp(null,t,n,e,r);break e;case 14:t=op(null,t,n,pr(n.type,e),r);break e}throw Error(U(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:pr(n,i),Au(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:pr(n,i),ap(e,t,n,i,r);case 3:e:{if(My(t),e===null)throw Error(U(387));n=t.pendingProps,s=t.memoizedState,i=s.element,ey(e,t),Sa(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=zi(Error(U(423)),t),t=lp(e,t,n,r,i);break e}else if(n!==i){i=zi(Error(U(424)),t),t=lp(e,t,n,r,i);break e}else for(Ht=Sn(t.stateNode.containerInfo.firstChild),qt=t,_e=!0,vr=null,r=Z1(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ti(),n===i){t=Gr(e,t,r);break e}Mt(e,t,n,r)}t=t.child}return t;case 5:return ty(t),e===null&&_u(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,bu(n,i)?o=null:s!==null&&bu(n,s)&&(t.flags|=32),Cy(e,t),Mt(e,t,o,r),t.child;case 6:return e===null&&_u(t),null;case 13:return Ey(e,t,r);case 4:return Ff(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Di(t,null,n,r):Mt(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:pr(n,i),sp(e,t,n,i,r);case 7:return Mt(e,t,t.pendingProps,r),t.child;case 8:return Mt(e,t,t.pendingProps.children,r),t.child;case 12:return Mt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ge(xa,n._currentValue),n._currentValue=o,s!==null)if(Sr(s.value,o)){if(s.children===i.children&&!Dt.current){t=Gr(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Jr(-1,r&-r),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?l.next=l:(l.next=d.next,d.next=l),f.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Pu(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Pu(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ri(t,r),i=nr(i),n=n(i),t.flags|=1,Mt(e,t,n,r),t.child;case 14:return n=t.type,i=pr(n,t.pendingProps),i=pr(n.type,i),op(e,t,n,i,r);case 15:return _y(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:pr(n,i),Go(e,t),t.tag=1,Bt(n)?(e=!0,va(t)):e=!1,Ri(t,r),wy(t,n,i),Mu(t,n,i,r),Iu(null,t,n,!0,e,r);case 19:return Ay(e,t,r);case 22:return Py(e,t,r)}throw Error(U(156,t.tag))};function qy(e,t){return g1(e,t)}function H2(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(e,t,r,n){return new H2(e,t,r,n)}function rd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function W2(e){if(typeof e=="function")return rd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wf)return 11;if(e===Sf)return 14}return 2}function Cn(e,t){var r=e.alternate;return r===null?(r=tr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ra(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")rd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case pi:return Xn(r.children,i,s,t);case xf:o=8,i|=8;break;case Xc:return e=tr(12,r,t,i|2),e.elementType=Xc,e.lanes=s,e;case Zc:return e=tr(13,r,t,i),e.elementType=Zc,e.lanes=s,e;case Gc:return e=tr(19,r,t,i),e.elementType=Gc,e.lanes=s,e;case t1:return rl(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G0:o=10;break e;case e1:o=9;break e;case wf:o=11;break e;case Sf:o=14;break e;case fn:o=16,n=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=tr(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function Xn(e,t,r,n){return e=tr(7,e,n,t),e.lanes=r,e}function rl(e,t,r,n){return e=tr(22,e,n,t),e.elementType=t1,e.lanes=r,e.stateNode={isHidden:!1},e}function xc(e,t,r){return e=tr(6,e,null,t),e.lanes=r,e}function wc(e,t,r){return t=tr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function q2(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tc(0),this.expirationTimes=tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tc(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nd(e,t,r,n,i,s,o,a,l){return e=new q2(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=tr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$f(s),e}function K2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Ky(e){if(!e)return In;e=e._reactInternals;e:{if(li(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var r=e.type;if(Bt(r))return K1(e,r,t)}return t}function Vy(e,t,r,n,i,s,o,a,l){return e=nd(r,n,!0,e,i,s,o,a,l),e.context=Ky(null),r=e.current,n=It(),i=Pn(r),s=Jr(n,i),s.callback=t??null,kn(r,s,i),e.current.lanes=i,oo(e,i,n),zt(e,n),e}function nl(e,t,r,n){var i=t.current,s=It(),o=Pn(i);return r=Ky(r),t.context===null?t.context=r:t.pendingContext=r,t=Jr(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=kn(i,t,o),e!==null&&(wr(e,i,o,s),Qo(e,i,o)),o}function Ia(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function id(e,t){gp(e,t),(e=e.alternate)&&gp(e,t)}function V2(){return null}var Jy=typeof reportError=="function"?reportError:function(e){console.error(e)};function sd(e){this._internalRoot=e}il.prototype.render=sd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));nl(e,t,null,null)};il.prototype.unmount=sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ii(function(){nl(null,e,null,null)}),t[Xr]=null}};function il(e){this._internalRoot=e}il.prototype.unstable_scheduleHydration=function(e){if(e){var t=P1();e={blockedOn:null,target:e,priority:t};for(var r=0;r<hn.length&&t!==0&&t<hn[r].priority;r++);hn.splice(r,0,e),r===0&&M1(e)}};function od(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bp(){}function J2(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var f=Ia(o);s.call(f)}}var o=Vy(t,n,e,0,null,!1,!1,"",bp);return e._reactRootContainer=o,e[Xr]=o.current,qs(e.nodeType===8?e.parentNode:e),ii(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var f=Ia(l);a.call(f)}}var l=nd(e,0,!1,null,null,!1,!1,"",bp);return e._reactRootContainer=l,e[Xr]=l.current,qs(e.nodeType===8?e.parentNode:e),ii(function(){nl(t,l,r,n)}),l}function ol(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ia(o);a.call(l)}}nl(t,o,e,i)}else o=J2(r,t,e,i,n);return Ia(o)}k1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xs(t.pendingLanes);r!==0&&(Pf(t,r|1),zt(t,je()),!(de&6)&&(Li=je()+500,Tn()))}break;case 13:ii(function(){var n=Zr(e,1);if(n!==null){var i=It();wr(n,e,1,i)}}),id(e,1)}};Cf=function(e){if(e.tag===13){var t=Zr(e,134217728);if(t!==null){var r=It();wr(t,e,134217728,r)}id(e,134217728)}};_1=function(e){if(e.tag===13){var t=Pn(e),r=Zr(e,t);if(r!==null){var n=It();wr(r,e,t,n)}id(e,t)}};P1=function(){return ye};C1=function(e,t){var r=ye;try{return ye=e,t()}finally{ye=r}};cu=function(e,t,r){switch(t){case"input":if(ru(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Qa(n);if(!i)throw Error(U(90));n1(n),ru(n,i)}}}break;case"textarea":s1(e,r);break;case"select":t=r.value,t!=null&&Mi(e,!!r.multiple,t,!1)}};d1=Gf;h1=ii;var Y2={usingClientEntryPoint:!1,Events:[lo,gi,Qa,u1,f1,Gf]},fs={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q2={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=m1(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||V2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{Ka=To.inject(Q2),Er=To}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y2;Yt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(t))throw Error(U(200));return K2(e,t,null,r)};Yt.createRoot=function(e,t){if(!od(e))throw Error(U(299));var r=!1,n="",i=Jy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=nd(e,1,!1,null,null,r,!1,n,i),e[Xr]=t.current,qs(e.nodeType===8?e.parentNode:e),new sd(t)};Yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=m1(t),e=e===null?null:e.stateNode,e};Yt.flushSync=function(e){return ii(e)};Yt.hydrate=function(e,t,r){if(!sl(t))throw Error(U(200));return ol(null,e,t,!0,r)};Yt.hydrateRoot=function(e,t,r){if(!od(e))throw Error(U(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Jy;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Vy(t,null,e,1,r??null,i,!1,s,o),e[Xr]=t.current,qs(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new il(t)};Yt.render=function(e,t,r){if(!sl(t))throw Error(U(200));return ol(null,e,t,!1,r)};Yt.unmountComponentAtNode=function(e){if(!sl(e))throw Error(U(40));return e._reactRootContainer?(ii(function(){ol(null,null,e,!1,function(){e._reactRootContainer=null,e[Xr]=null})}),!0):!1};Yt.unstable_batchedUpdates=Gf;Yt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!sl(r))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return ol(e,t,r,!1,n)};Yt.version="18.3.1-next-f1338f8080-20240426";function Yy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yy)}catch(e){console.error(e)}}Yy(),Y0.exports=Yt;var X2=Y0.exports,xp=X2;Yc.createRoot=xp.createRoot,Yc.hydrateRoot=xp.hydrateRoot;let Z2="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",G2=(e=21)=>{let t="",r=e|0;for(;r--;)t+=Z2[Math.random()*64|0];return t};function gr(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $i(e){return!!e&&!!e[Vt]}function si(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===a4}(e)||Array.isArray(e)||!!e[Ep]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ep])||ad(e)||ld(e))}function eo(e,t,r){r===void 0&&(r=!1),Yi(e)===0?(r?Object.keys:hd)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function Yi(e){var t=e[Vt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ad(e)?2:ld(e)?3:0}function Uu(e,t){return Yi(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function e4(e,t){return Yi(e)===2?e.get(t):e[t]}function Qy(e,t,r){var n=Yi(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function t4(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function ad(e){return s4&&e instanceof Map}function ld(e){return o4&&e instanceof Set}function qn(e){return e.o||e.t}function cd(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=l4(e);delete t[Vt];for(var r=hd(t),n=0;n<r.length;n++){var i=r[n],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ud(e,t){return t===void 0&&(t=!1),fd(e)||$i(e)||!si(e)||(Yi(e)>1&&(e.set=e.add=e.clear=e.delete=r4),Object.freeze(e),t&&eo(e,function(r,n){return ud(n,!0)},!0)),e}function r4(){gr(2)}function fd(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ir(e){var t=c4[e];return t||gr(18,e),t}function wp(){return to}function Sc(e,t){t&&(Ir("Patches"),e.u=[],e.s=[],e.v=t)}function Ra(e){Hu(e),e.p.forEach(n4),e.p=null}function Hu(e){e===to&&(to=e.l)}function Sp(e){return to={p:[],l:to,h:e,m:!0,_:0}}function n4(e){var t=e[Vt];t.i===0||t.i===1?t.j():t.g=!0}function kc(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||Ir("ES5").S(t,e,n),n?(r[Vt].P&&(Ra(t),gr(4)),si(e)&&(e=Oa(t,e),t.l||ja(t,e)),t.u&&Ir("Patches").M(r[Vt].t,e,t.u,t.s)):e=Oa(t,r,[]),Ra(t),t.u&&t.v(t.u,t.s),e!==Xy?e:void 0}function Oa(e,t,r){if(fd(t))return t;var n=t[Vt];if(!n)return eo(t,function(a,l){return kp(e,n,t,a,l,r)},!0),t;if(n.A!==e)return t;if(!n.P)return ja(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=cd(n.k):n.o,s=i,o=!1;n.i===3&&(s=new Set(i),i.clear(),o=!0),eo(s,function(a,l){return kp(e,n,i,a,l,r,o)}),ja(e,i,!1),r&&e.u&&Ir("Patches").N(n,r,e.u,e.s)}return n.o}function kp(e,t,r,n,i,s,o){if($i(i)){var a=Oa(e,i,s&&t&&t.i!==3&&!Uu(t.R,n)?s.concat(n):void 0);if(Qy(r,n,a),!$i(a))return;e.m=!1}else o&&r.add(i);if(si(i)&&!fd(i)){if(!e.h.D&&e._<1)return;Oa(e,i),t&&t.A.l||ja(e,i)}}function ja(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&ud(t,r)}function _c(e,t){var r=e[Vt];return(r?qn(r):e)[t]}function _p(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Wu(e){e.P||(e.P=!0,e.l&&Wu(e.l))}function Pc(e){e.o||(e.o=cd(e.t))}function qu(e,t,r){var n=ad(t)?Ir("MapSet").F(t,r):ld(t)?Ir("MapSet").T(t,r):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:wp(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,f=Ku;o&&(l=[a],f=Ss);var d=Proxy.revocable(l,f),y=d.revoke,m=d.proxy;return a.k=m,a.j=y,m}(t,r):Ir("ES5").J(t,r);return(r?r.A:wp()).p.push(n),n}function i4(e){return $i(e)||gr(22,e),function t(r){if(!si(r))return r;var n,i=r[Vt],s=Yi(r);if(i){if(!i.P&&(i.i<4||!Ir("ES5").K(i)))return i.t;i.I=!0,n=Pp(r,s),i.I=!1}else n=Pp(r,s);return eo(n,function(o,a){i&&e4(i.t,o)===a||Qy(n,o,t(a))}),s===3?new Set(n):n}(e)}function Pp(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return cd(e)}var Cp,to,dd=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",s4=typeof Map<"u",o4=typeof Set<"u",Mp=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Xy=dd?Symbol.for("immer-nothing"):((Cp={})["immer-nothing"]=!0,Cp),Ep=dd?Symbol.for("immer-draftable"):"__$immer_draftable",Vt=dd?Symbol.for("immer-state"):"__$immer_state",a4=""+Object.prototype.constructor,hd=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,l4=Object.getOwnPropertyDescriptors||function(e){var t={};return hd(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},c4={},Ku={get:function(e,t){if(t===Vt)return e;var r=qn(e);if(!Uu(r,t))return function(i,s,o){var a,l=_p(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!si(n)?n:n===_c(e.t,t)?(Pc(e),e.o[t]=qu(e.A.h,n,e)):n},has:function(e,t){return t in qn(e)},ownKeys:function(e){return Reflect.ownKeys(qn(e))},set:function(e,t,r){var n=_p(qn(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=_c(qn(e),t),s=i==null?void 0:i[Vt];if(s&&s.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(t4(r,i)&&(r!==void 0||Uu(e.t,t)))return!0;Pc(e),Wu(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return _c(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Pc(e),Wu(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=qn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){gr(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){gr(12)}},Ss={};eo(Ku,function(e,t){Ss[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ss.deleteProperty=function(e,t){return Ss.set.call(this,e,t,void 0)},Ss.set=function(e,t,r){return Ku.set.call(this,e[0],t,r,e[0])};var u4=function(){function e(r){var n=this;this.O=Mp,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=n;return function(M){var N=this;M===void 0&&(M=a);for(var S=arguments.length,v=Array(S>1?S-1:0),P=1;P<S;P++)v[P-1]=arguments[P];return l.produce(M,function(j){var D;return(D=s).call.apply(D,[N,j].concat(v))})}}var f;if(typeof s!="function"&&gr(6),o!==void 0&&typeof o!="function"&&gr(7),si(i)){var d=Sp(n),y=qu(n,i,void 0),m=!0;try{f=s(y),m=!1}finally{m?Ra(d):Hu(d)}return typeof Promise<"u"&&f instanceof Promise?f.then(function(M){return Sc(d,o),kc(M,d)},function(M){throw Ra(d),M}):(Sc(d,o),kc(f,d))}if(!i||typeof i!="object"){if((f=s(i))===void 0&&(f=i),f===Xy&&(f=void 0),n.D&&ud(f,!0),o){var b=[],k=[];Ir("Patches").M(i,f,b,k),o(b,k)}return f}gr(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(f){for(var d=arguments.length,y=Array(d>1?d-1:0),m=1;m<d;m++)y[m-1]=arguments[m];return n.produceWithPatches(f,function(b){return i.apply(void 0,[b].concat(y))})};var o,a,l=n.produce(i,s,function(f,d){o=f,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(f){return[f,o,a]}):[l,o,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){si(r)||gr(8),$i(r)&&(r=i4(r));var n=Sp(this),i=qu(this,r,void 0);return i[Vt].C=!0,Hu(n),i},t.finishDraft=function(r,n){var i=r&&r[Vt],s=i.A;return Sc(s,n),kc(void 0,s)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Mp&&gr(20),this.O=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));var o=Ir("Patches").$;return $i(r)?o(r,n):this.produce(r,function(a){return o(a,n)})},e}(),Jt=new u4,f4=Jt.produce;Jt.produceWithPatches.bind(Jt);Jt.setAutoFreeze.bind(Jt);Jt.setUseProxies.bind(Jt);Jt.applyPatches.bind(Jt);Jt.createDraft.bind(Jt);Jt.finishDraft.bind(Jt);class d4{constructor(t){const r=h4();this.c=1,this.s0=r(" "),this.s1=r(" "),this.s2=r(" "),this.s0-=r(t),this.s0<0&&(this.s0+=1),this.s1-=r(t),this.s1<0&&(this.s1+=1),this.s2-=r(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function h4(){let e=4022871197;return function(r){const n=r.toString();for(let i=0;i<n.length;i++){e+=n.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function Ap(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Zy(e,t){const r=new d4(e),n=r.next.bind(r);return t&&Ap(t,r),n.state=()=>Ap(r,{}),n}class Ip{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,r=t.prngstate?"":t.seed,n=Zy(r,t.prngstate),i=n();return this.state={...t,prngstate:n.state()},i}api(){const t=this._random.bind(this),r={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},n={};for(const s in r){const o=r[s];n[s]=a=>a===void 0?Math.floor(t()*o)+1:Array.from({length:a}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...n,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let a=s.length,l=0;const f=Array.from({length:a});for(;a;){const d=Math.trunc(a*t());f[l++]=o[d],o[d]=o[--a]}return f},_private:this}}}const p4={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new Ip(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=Ip.seed()),{seed:t}},playerView:()=>{}};var y4=Function.prototype,m4=y4.toString;m4.call(Object);const ro="MAKE_MOVE",al="GAME_EVENT",ll="REDO",pd="RESET",yd="SYNC",cl="UNDO",md="UPDATE",vd="PATCH",Gy="PLUGIN",ul="STRIP_TRANSIENTS",em=(e,t,r,n)=>({type:ro,payload:{type:e,args:t,playerID:r,credentials:n}}),Ds=(e,t,r,n)=>({type:al,payload:{type:e,args:t,playerID:r,credentials:n}}),tm=(e,t,r,n)=>({type:al,payload:{type:e,args:t,playerID:r,credentials:n},automatic:!0}),rm=e=>({type:yd,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),nm=(e,t,r,n)=>({type:vd,prevStateID:e,stateID:t,patch:r,deltalog:n,clientOnly:!0}),im=(e,t)=>({type:md,state:e,deltalog:t,clientOnly:!0}),sm=e=>({type:pd,state:e,clientOnly:!0}),om=(e,t)=>({type:cl,payload:{type:null,args:null,playerID:e,credentials:t}}),am=(e,t)=>({type:ll,payload:{type:null,args:null,playerID:e,credentials:t}}),v4=(e,t,r,n)=>({type:Gy,payload:{type:e,args:t,playerID:r,credentials:n}}),lm=()=>({type:ul});var g4=Object.freeze({__proto__:null,makeMove:em,gameEvent:Ds,automaticGameEvent:tm,sync:rm,patch:nm,update:im,reset:sm,undo:om,redo:am,plugin:v4,stripTransients:lm});const q="INVALID_MOVE",b4={name:"plugin-immer",fnWrap:e=>(t,...r)=>{let n=!1;const i=f4(t.G,s=>{const o=e({...t,G:s},...r);if(o===q){n=!0;return}return o});return n?q:i}};var xt;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(xt||(xt={}));var Hr;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Hr||(Hr={}));class x4{constructor(t,r,n){this.flow=t,this.playerID=n,this.dispatch=[],this.initialTurn=r.turn,this.updateTurnContext(r,void 0),this.maxEndedTurnsPerAction=r.numPlayers*100}api(){const t={_private:this};for(const r of this.flow.eventNames)t[r]=(...n)=>{this.dispatch.push({type:r,args:n,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,r){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=r}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const r=t,n=({stack:i},s)=>({...r,plugins:{...r.plugins,events:{...r.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return n(s.error,Hr.MaxTurnEndings);if(s.calledFrom===void 0)return n(s.error,Hr.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case xt.TURN_ON_END:case xt.PHASE_ON_END:return n(s.error,Hr.StageEventInOnEnd);case xt.PHASE_ON_BEGIN:return n(s.error,Hr.StageEventInPhaseBegin);case xt.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return n(s.error,Hr.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===xt.TURN_ON_END||s.calledFrom===xt.PHASE_ON_END)return n(s.error,Hr.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===xt.PHASE_ON_END)return n(s.error,Hr.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const l=tm(s.type,s.args,this.playerID);t=this.flow.processEvent(t,l)}return t}}const gd={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(r,...n)=>{const i=r.events;i&&i._private.updateTurnContext(r.ctx,t);const s=e(r,...n);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:r})=>new x4(e.flow,t,r).api()},w4={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},S4={name:"plugin-serializable",fnWrap:e=>(t,...r)=>e(t,...r)},k4=(...e)=>console.error(...e);function pe(e){k4("ERROR:",e)}const bd=[b4,p4,w4,S4],uo=[...bd,gd],_4=(e,t,r)=>(r.game.plugins.filter(n=>n.action!==void 0).filter(n=>n.name===t.payload.type).forEach(n=>{const i=n.name,s=e.plugins[i]||{data:{}},o=n.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),Fi=({plugins:e})=>Object.entries(e||{}).reduce((t,[r,{api:n}])=>(t[r]=n,t),{}),cm=(e,t,r)=>[...bd,...r,gd].filter(n=>n.fnWrap!==void 0).reduce((n,{fnWrap:i})=>i(n,t),e),P4=(e,t)=>([...uo,...t.game.plugins].filter(r=>r.setup!==void 0).forEach(r=>{const n=r.name,i=r.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[n]:{data:i}}}}),e),Vu=(e,t)=>([...uo,...t.game.plugins].filter(r=>r.api!==void 0).forEach(r=>{const n=r.name,i=e.plugins[n]||{data:{}},s=r.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[n]:{...i,api:s}}}}),e),C4=(e,t)=>([...bd,...t.game.plugins,gd].reverse().forEach(r=>{const n=r.name,i=e.plugins[n]||{data:{}};if(r.flush){const s=r.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[r.name]:{data:s}}}}else if(r.dangerouslyFlushRawState){e=r.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[n].data;e={...e,plugins:{...e.plugins,[r.name]:{data:s}}}}}),e),M4=(e,t)=>[...uo,...t.game.plugins].filter(r=>r.noClient!==void 0).map(r=>{const n=r.name,i=e.plugins[n];return i?r.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),E4=(e,t)=>[...uo,...t.game.plugins].filter(n=>n.isInvalid!==void 0).map(n=>{const{name:i}=n,s=e.plugins[i],o=n.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(n=>n)||!1,um=(e,t)=>{const r=C4(e,t),n=E4(r,t);if(!n)return[r];const{plugin:i,message:s}=n;return pe(`${i} plugin declared action invalid:
${s}`),[e,n]},fm=({G:e,ctx:t,plugins:r={}},{game:n,playerID:i})=>([...uo,...n.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:a}=r[s]||{data:{}},l=o({G:e,ctx:t,game:n,data:a,playerID:i});r={...r,[s]:{data:l}}}),r);function Na(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function Ta(e,t){let r={},n=[],i=null,s={},o={};if(Array.isArray(t)){const l={};t.forEach(f=>l[f]=Da.NULL),r=l}else{if(Na(t),t.next&&(i=t.next),t.revert&&(n=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Do(r,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let l=0;l<e.playOrder.length;l++){const f=e.playOrder[l];f!==e.currentPlayer&&Do(r,s,o,f,t.others)}if(t.all!==void 0)for(let l=0;l<e.playOrder.length;l++){const f=e.playOrder[l];Do(r,s,o,f,t.all)}if(t.value)for(const l in t.value)Do(r,s,o,l,t.value[l]);if(t.minMoves)for(const l in r)s[l]===void 0&&(s[l]=t.minMoves);if(t.maxMoves)for(const l in r)o[l]===void 0&&(o[l]=t.maxMoves)}Object.keys(r).length===0&&(r=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const a={};for(const l in r)a[l]=0;return{...e,activePlayers:r,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:a,_prevActivePlayers:n,_nextActivePlayers:i}}function A4(e){let{activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=Ta(e,o),{activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const a=s.length-1;({activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:i}=s[a]),s=s.slice(0,a)}else t=null,r=null,n=null;return{...e,activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Do(e,t,r,n,i){(typeof i!="object"||i===Da.NULL)&&(i={stage:i}),i.stage!==void 0&&(Na(i),e[n]=i.stage,i.minMoves&&(t[n]=i.minMoves),i.maxMoves&&(r[n]=i.maxMoves))}function Ju(e,t){return e[t]+""}function I4(e,t){let{G:r,ctx:n}=e;const{numPlayers:i}=n,o={...Fi(e),G:r,ctx:n},a=t.order;let l=[...Array.from({length:i})].map((m,b)=>b+"");a.playOrder!==void 0&&(l=a.playOrder(o));const f=a.first(o),d=typeof f;d!=="number"&&pe(`invalid value returned by turn.order.first  expected number got ${d} ${f}.`);const y=Ju(l,f);return n={...n,currentPlayer:y,playOrderPos:f,playOrder:l},n=Ta(n,t.activePlayers||{}),n}function R4(e,t,r,n){const i=r.order;let{G:s,ctx:o}=e,a=o.playOrderPos,l=!1;if(n&&n!==!0)typeof n!="object"&&pe(`invalid argument to endTurn: ${n}`),Object.keys(n).forEach(f=>{switch(f){case"remove":t=Ju(o.playOrder,a);break;case"next":a=o.playOrder.indexOf(n.next),t=n.next;break;default:pe(`invalid argument to endTurn: ${f}`)}});else{const d={...Fi(e),G:s,ctx:o},y=i.next(d),m=typeof y;y!==void 0&&m!=="number"&&pe(`invalid value returned by turn.order.next  expected number or undefined got ${m} ${y}.`),y===void 0?l=!0:(a=y,t=Ju(o.playOrder,a))}return o={...o,playOrderPos:a,currentPlayer:t},{endPhase:l,ctx:o}}const O4={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Da={NULL:null};var xd={},Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.Pointer=Yr.escapeToken=Yr.unescapeToken=void 0;function dm(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Yr.unescapeToken=dm;function hm(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Yr.escapeToken=hm;var j4=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var r=t.split("/").map(dm);if(r[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(r)},e.prototype.toString=function(){return this.tokens.map(hm).join("/")},e.prototype.evaluate=function(t){for(var r=null,n="",i=t,s=1,o=this.tokens.length;s<o;s++)r=i,n=this.tokens[s],!(n=="__proto__"||n=="constructor"||n=="prototype")&&(i=(r||{})[n]);return{parent:r,key:n,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,r){var n=this.evaluate(t);n.parent&&(n.parent[n.key]=r)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var r=this.tokens.concat(String(t));return new e(r)},e}();Yr.Pointer=j4;var Ie={},wd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function r(i){return i!=null&&typeof i=="object"}function n(i){if(!r(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),a=0;a<s;a++)o[a]=n(i[a]);return o}if(i.constructor==Date){var l=new Date(+i);return l}var f={};for(var d in i)e.hasOwnProperty.call(i,d)&&(f[d]=n(i[d]));return f}e.clone=n})(wd);var At={};Object.defineProperty(At,"__esModule",{value:!0});At.diffAny=At.diffObjects=At.diffArrays=At.intersection=At.subtract=At.isDestructive=void 0;var no=wd;function N4(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}At.isDestructive=N4;function Yu(e,t){var r={};for(var n in e)no.hasOwnProperty.call(e,n)&&e[n]!==void 0&&(r[n]=1);for(var i in t)no.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete r[i];return Object.keys(r)}At.subtract=Yu;function pm(e){for(var t=e.length,r={},n=0;n<t;n++){var i=e[n];for(var s in i)no.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(r[s]=(r[s]||0)+1)}for(var s in r)r[s]<t&&delete r[s];return Object.keys(r)}At.intersection=pm;function T4(e){return e.op==="add"}function D4(e){return e.op==="remove"}function Cc(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function ym(e,t,r,n){n===void 0&&(n=fl);var i={"0,0":{operations:[],cost:0}};function s(d,y){var m="".concat(d,",").concat(y),b=i[m];if(b===void 0){if(d>0&&y>0&&!n(e[d-1],t[y-1],r.add(String(d-1))).length)b=s(d-1,y-1);else{var k=[];if(d>0){var M=s(d-1,y),N={op:"remove",index:d-1};k.push(Cc(M,N))}if(y>0){var S=s(d,y-1),v={op:"add",index:d-1,value:t[y-1]};k.push(Cc(S,v))}if(d>0&&y>0){var P=s(d-1,y-1),j={op:"replace",index:d-1,original:e[d-1],value:t[y-1]};k.push(Cc(P,j))}var D=k.sort(function(F,T){return F.cost-T.cost})[0];b=D}i[m]=b}return b}var o=isNaN(e.length)||e.length<=0?0:e.length,a=isNaN(t.length)||t.length<=0?0:t.length,l=s(o,a).operations,f=l.reduce(function(d,y){var m=d[0],b=d[1];if(T4(y)){var k=y.index+1+b,M=k<o+b?String(k):"-",N={op:y.op,path:r.add(M).toString(),value:y.value};return[m.concat(N),b+1]}else if(D4(y)){var N={op:y.op,path:r.add(String(y.index+b)).toString()};return[m.concat(N),b-1]}else{var S=r.add(String(y.index+b)),v=n(y.original,y.value,S);return[m.concat.apply(m,v),b]}},[[],0])[0];return f}At.diffArrays=ym;function mm(e,t,r,n){n===void 0&&(n=fl);var i=[];return Yu(e,t).forEach(function(s){i.push({op:"remove",path:r.add(s).toString()})}),Yu(t,e).forEach(function(s){i.push({op:"add",path:r.add(s).toString(),value:t[s]})}),pm([e,t]).forEach(function(s){i.push.apply(i,n(e[s],t[s],r.add(s)))}),i}At.diffObjects=mm;function fl(e,t,r,n){if(n===void 0&&(n=fl),e===t)return[];var i=(0,no.objectType)(e),s=(0,no.objectType)(t);return i=="array"&&s=="array"?ym(e,t,r,n):i=="object"&&s=="object"?mm(e,t,r,n):[{op:"replace",path:r.toString(),value:t}]}At.diffAny=fl;var Sd=Ci&&Ci.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.apply=Ie.InvalidOperationError=Ie.test=Ie.copy=Ie.move=Ie.replace=Ie.remove=Ie.add=Ie.TestError=Ie.MissingError=void 0;var en=Yr,kd=wd,B4=At,Rr=function(e){Sd(t,e);function t(r){var n=e.call(this,"Value required at path: ".concat(r))||this;return n.path=r,n.name="MissingError",n}return t}(Error);Ie.MissingError=Rr;var vm=function(e){Sd(t,e);function t(r,n){var i=e.call(this,"Test failed: ".concat(r," != ").concat(n))||this;return i.actual=r,i.expected=n,i.name="TestError",i}return t}(Error);Ie.TestError=vm;function _d(e,t,r){if(Array.isArray(e))if(t=="-")e.push(r);else{var n=parseInt(t,10);e.splice(n,0,r)}else e[t]=r}function gm(e,t){if(Array.isArray(e)){var r=parseInt(t,10);e.splice(r,1)}else delete e[t]}function bm(e,t){var r=en.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Rr(t.path):(_d(r.parent,r.key,(0,kd.clone)(t.value)),null)}Ie.add=bm;function xm(e,t){var r=en.Pointer.fromJSON(t.path).evaluate(e);return r.value===void 0?new Rr(t.path):(gm(r.parent,r.key),null)}Ie.remove=xm;function wm(e,t){var r=en.Pointer.fromJSON(t.path).evaluate(e);if(r.parent===null)return new Rr(t.path);if(Array.isArray(r.parent)){if(parseInt(r.key,10)>=r.parent.length)return new Rr(t.path)}else if(r.value===void 0)return new Rr(t.path);return r.parent[r.key]=(0,kd.clone)(t.value),null}Ie.replace=wm;function Sm(e,t){var r=en.Pointer.fromJSON(t.from).evaluate(e);if(r.value===void 0)return new Rr(t.from);var n=en.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new Rr(t.path):(gm(r.parent,r.key),_d(n.parent,n.key,r.value),null)}Ie.move=Sm;function km(e,t){var r=en.Pointer.fromJSON(t.from).evaluate(e);if(r.value===void 0)return new Rr(t.from);var n=en.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new Rr(t.path):(_d(n.parent,n.key,(0,kd.clone)(r.value)),null)}Ie.copy=km;function _m(e,t){var r=en.Pointer.fromJSON(t.path).evaluate(e);return(0,B4.diffAny)(r.value,t.value,new en.Pointer).length?new vm(r.value,t.value):null}Ie.test=_m;var Pm=function(e){Sd(t,e);function t(r){var n=e.call(this,"Invalid operation: ".concat(r.op))||this;return n.operation=r,n.name="InvalidOperationError",n}return t}(Error);Ie.InvalidOperationError=Pm;function z4(e,t){switch(t.op){case"add":return bm(e,t);case"remove":return xm(e,t);case"replace":return wm(e,t);case"move":return Sm(e,t);case"copy":return km(e,t);case"test":return _m(e,t)}return new Pm(t)}Ie.apply=z4;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Yr;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var r=Ie,n=At;function i(f,d){return d.map(function(y){return(0,r.apply)(f,y)})}e.applyPatch=i;function s(f){function d(y,m,b){var k=f(y,m,b);return Array.isArray(k)?k:(0,n.diffAny)(y,m,b,d)}return d}function o(f,d,y){var m=new t.Pointer;return(y?s(y):n.diffAny)(f,d,m)}e.createPatch=o;function a(f,d){var y=t.Pointer.fromJSON(d).evaluate(f);if(y!==void 0)return{op:"test",path:d,value:y.value}}function l(f,d){var y=new Array;return d.filter(n.isDestructive).forEach(function(m){var b=a(f,m.path);if(b&&y.push(b),"from"in m){var k=a(f,m.from);k&&y.push(k)}}),y}e.createTests=l})(xd);function L4({moves:e,phases:t,endIf:r,onEnd:n,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),r||(r=()=>{}),n||(n=({G:I})=>I),i||(i={});const a={...t};""in a&&pe("cannot specify phase with empty name"),a[""]={};const l={},f=new Set;let d=null;Object.keys(e).forEach(I=>f.add(I));const y=(I,O)=>{const z=cm(I,O,o);return Q=>{const K=Fi(Q);return z({...K,G:Q.G,ctx:Q.ctx,playerID:Q.playerID})}},m=I=>O=>{const z=Fi(O);return I({...z,G:O.G,ctx:O.ctx})},b={onEnd:y(n,xt.GAME_ON_END),endIf:m(r)};for(const I in a){const O=a[I];if(O.start===!0&&(d=I),O.moves!==void 0)for(const z of Object.keys(O.moves))l[I+"."+z]=O.moves[z],f.add(z);O.endIf===void 0&&(O.endIf=()=>{}),O.onBegin===void 0&&(O.onBegin=({G:z})=>z),O.onEnd===void 0&&(O.onEnd=({G:z})=>z),O.turn===void 0&&(O.turn=i),O.turn.order===void 0&&(O.turn.order=O4.DEFAULT),O.turn.onBegin===void 0&&(O.turn.onBegin=({G:z})=>z),O.turn.onEnd===void 0&&(O.turn.onEnd=({G:z})=>z),O.turn.endIf===void 0&&(O.turn.endIf=()=>!1),O.turn.onMove===void 0&&(O.turn.onMove=({G:z})=>z),O.turn.stages===void 0&&(O.turn.stages={}),Na(O.turn,!0);for(const z in O.turn.stages){const K=O.turn.stages[z].moves||{};for(const te of Object.keys(K)){const ne=I+"."+z+"."+te;l[ne]=K[te],f.add(te)}}if(O.wrapped={onBegin:y(O.onBegin,xt.PHASE_ON_BEGIN),onEnd:y(O.onEnd,xt.PHASE_ON_END),endIf:m(O.endIf)},O.turn.wrapped={onMove:y(O.turn.onMove,xt.TURN_ON_MOVE),onBegin:y(O.turn.onBegin,xt.TURN_ON_BEGIN),onEnd:y(O.turn.onEnd,xt.TURN_ON_END),endIf:m(O.turn.endIf)},typeof O.next!="function"){const{next:z}=O;O.next=()=>z||null}O.wrapped.next=m(O.next)}function k(I){return I.phase?a[I.phase]:a[""]}function M(I){return I}function N(I,O){const z=new Set,Q=new Set;for(let K=0;K<O.length;K++){const{fn:te,arg:ne,...re}=O[K];if(te===c){Q.clear();const st=I.ctx.phase;if(z.has(st)){const he={...I.ctx,phase:null};return{...I,ctx:he}}z.add(st)}const Pt=[];if(I=te(I,{...re,arg:ne,next:Pt}),te===A)break;const ie=L(I);if(ie){O.push({fn:A,arg:ie,turn:I.ctx.turn,phase:I.ctx.phase,automatic:!0});continue}const se=V(I);if(se){O.push({fn:c,arg:se,turn:I.ctx.turn,phase:I.ctx.phase,automatic:!0});continue}if([M,F,T].includes(te)){const st=ee(I);if(st){O.push({fn:h,arg:st,turn:I.ctx.turn,phase:I.ctx.phase,automatic:!0});continue}}O.push(...Pt)}return I}function S(I,{next:O}){return O.push({fn:v}),I}function v(I,{next:O}){let{G:z,ctx:Q}=I;return z=k(Q).wrapped.onBegin(I),O.push({fn:P}),{...I,G:z,ctx:Q}}function P(I,{currentPlayer:O}){let{ctx:z}=I;const Q=k(z);O?(z={...z,currentPlayer:O},Q.turn.activePlayers&&(z=Ta(z,Q.turn.activePlayers))):z=I4(I,Q.turn);const K=z.turn+1;z={...z,turn:K,numMoves:0,_prevActivePlayers:[]};const te=Q.turn.wrapped.onBegin({...I,ctx:z});return{...I,G:te,ctx:z,_undo:[],_redo:[]}}function j(I,{arg:O,next:z,phase:Q}){const K=k({phase:Q});let{ctx:te}=I;if(O&&O.next)if(O.next in a)te={...te,phase:O.next};else return pe("invalid phase: "+O.next),I;else te={...te,phase:K.wrapped.next(I)||null};return I={...I,ctx:te},z.push({fn:v}),I}function D(I,{arg:O,currentPlayer:z,next:Q}){let{G:K,ctx:te}=I;const ne=k(te),{endPhase:re,ctx:Pt}=R4(I,z,ne.turn,O);return te=Pt,I={...I,G:K,ctx:te},re?Q.push({fn:c,turn:te.turn,phase:te.phase}):Q.push({fn:P,currentPlayer:te.currentPlayer}),I}function F(I,{arg:O,playerID:z}){if((typeof O=="string"||O===Da.NULL)&&(O={stage:O}),typeof O!="object")return I;Na(O);let{ctx:Q}=I,{activePlayers:K,_activePlayersMinMoves:te,_activePlayersMaxMoves:ne,_activePlayersNumMoves:re}=Q;return O.stage!==void 0&&(K===null&&(K={}),K[z]=O.stage,re[z]=0,O.minMoves&&(te===null&&(te={}),te[z]=O.minMoves),O.maxMoves&&(ne===null&&(ne={}),ne[z]=O.maxMoves)),Q={...Q,activePlayers:K,_activePlayersMinMoves:te,_activePlayersMaxMoves:ne,_activePlayersNumMoves:re},{...I,ctx:Q}}function T(I,{arg:O}){return{...I,ctx:Ta(I.ctx,O)}}function L(I){return b.endIf(I)}function V(I){return k(I.ctx).wrapped.endIf(I)}function ee(I){const O=k(I.ctx),z=I.ctx.numMoves||0;return O.turn.maxMoves&&z>=O.turn.maxMoves?!0:O.turn.wrapped.endIf(I)}function A(I,{arg:O,phase:z}){I=c(I,{}),O===void 0&&(O=!0),I={...I,ctx:{...I.ctx,gameover:O}};const Q=b.onEnd(I);return{...I,G:Q}}function c(I,{arg:O,next:z,turn:Q,automatic:K}){I=h(I,{turn:Q,force:!0,automatic:!0});const{phase:te,turn:ne}=I.ctx;if(z&&z.push({fn:j,arg:O,phase:te}),te===null)return I;const Pt=k(I.ctx).wrapped.onEnd(I),ie={...I.ctx,phase:null},se=Ds("endPhase",O),{_stateID:st}=I,he={action:se,_stateID:st,turn:ne,phase:te};K&&(he.automatic=!0);const me=[...I.deltalog||[],he];return{...I,G:Pt,ctx:ie,deltalog:me}}function h(I,{arg:O,next:z,turn:Q,force:K,automatic:te,playerID:ne}){if(Q!==I.ctx.turn)return I;const{currentPlayer:re,numMoves:Pt,phase:ie,turn:se}=I.ctx,st=k(I.ctx),he=Pt||0;if(!K&&st.turn.minMoves&&he<st.turn.minMoves)return`${st.turn.minMoves}`,I;const me=st.turn.wrapped.onEnd(I);z&&z.push({fn:D,arg:O,currentPlayer:re});let ur={...I.ctx,activePlayers:null};if(O&&O.remove){ne=ne||re;const ve=ur.playOrder.filter(Ae=>Ae!=ne),go=ur.playOrderPos>ve.length-1?0:ur.playOrderPos;if(ur={...ur,playOrder:ve,playOrderPos:go},ve.length===0)return z.push({fn:c,turn:se,phase:ie}),I}const Se=Ds("endTurn",O),{_stateID:Pe}=I,an={action:Se,_stateID:Pe,turn:se,phase:ie};te&&(an.automatic=!0);const ke=[...I.deltalog||[],an];return{...I,G:me,ctx:ur,deltalog:ke,_undo:[],_redo:[]}}function g(I,{arg:O,next:z,automatic:Q,playerID:K}){K=K||I.ctx.currentPlayer;let{ctx:te,_stateID:ne}=I,{activePlayers:re,_activePlayersNumMoves:Pt,_activePlayersMinMoves:ie,_activePlayersMaxMoves:se,phase:st,turn:he}=te;const me=re!==null&&K in re,ur=k(te);if(!O&&me){const ve=ur.turn.stages[re[K]];ve&&ve.next&&(O=ve.next)}if(z&&z.push({fn:F,arg:O,playerID:K}),!me)return I;const Se=Pt[K]||0;if(ie&&ie[K]&&Se<ie[K])return`${ie[K]}`,I;re={...re},delete re[K],ie&&(ie={...ie},delete ie[K]),se&&(se={...se},delete se[K]),te=A4({...te,activePlayers:re,_activePlayersMinMoves:ie,_activePlayersMaxMoves:se});const an={action:Ds("endStage",O),_stateID:ne,turn:he,phase:st};Q&&(an.automatic=!0);const ke=[...I.deltalog||[],an];return{...I,ctx:te,deltalog:ke}}function w(I,O,z){const Q=k(I),K=Q.turn.stages,{activePlayers:te}=I;if(te&&te[z]!==void 0&&te[z]!==Da.NULL&&K[te[z]]!==void 0&&K[te[z]].moves!==void 0){const re=K[te[z]].moves;if(O in re)return re[O]}else if(Q.moves){if(O in Q.moves)return Q.moves[O]}else if(O in e)return e[O];return null}function C(I,O){const{playerID:z,type:Q}=O,{currentPlayer:K,activePlayers:te,_activePlayersMaxMoves:ne}=I.ctx,re=w(I.ctx,Q,z),Pt=!re||typeof re=="function"||re.noLimit!==!0;let{numMoves:ie,_activePlayersNumMoves:se}=I.ctx;Pt&&(z===K&&ie++,te&&se[z]++),I={...I,ctx:{...I.ctx,numMoves:ie,_activePlayersNumMoves:se}},ne&&se[z]>=ne[z]&&(I=g(I,{playerID:z,automatic:!0}));const he=k(I.ctx).turn.wrapped.onMove({...I,playerID:z});return I={...I,G:he},N(I,[{fn:M}])}function R(I,O,z){return N(I,[{fn:g,arg:z,playerID:O}])}function E(I,O){return N(I,[{fn:g,playerID:O}])}function x(I,O,z){return N(I,[{fn:T,arg:z}])}function u(I,O,z){return N(I,[{fn:c,phase:I.ctx.phase,turn:I.ctx.turn,arg:{next:z}}])}function _(I){return N(I,[{fn:c,phase:I.ctx.phase,turn:I.ctx.turn}])}function $(I,O,z){return N(I,[{fn:h,turn:I.ctx.turn,phase:I.ctx.phase,arg:z}])}function J(I,O,z){return N(I,[{fn:h,turn:I.ctx.turn,phase:I.ctx.phase,force:!0,arg:z}])}function Y(I,O,z){return N(I,[{fn:A,turn:I.ctx.turn,phase:I.ctx.phase,arg:z}])}const B={endStage:E,setStage:R,endTurn:$,pass:J,endPhase:_,setPhase:u,endGame:Y,setActivePlayers:x},W=[];s.endTurn!==!1&&W.push("endTurn"),s.pass!==!1&&W.push("pass"),s.endPhase!==!1&&W.push("endPhase"),s.setPhase!==!1&&W.push("setPhase"),s.endGame!==!1&&W.push("endGame"),s.setActivePlayers!==!1&&W.push("setActivePlayers"),s.endStage!==!1&&W.push("endStage"),s.setStage!==!1&&W.push("setStage");function X(I,O){const{type:z,playerID:Q,args:K}=O.payload;return typeof B[z]!="function"?I:B[z](I,Q,...Array.isArray(K)?K:[K])}function ae(I,O,z){return O.activePlayers?z in O.activePlayers:O.currentPlayer===z}return{ctx:I=>({numPlayers:I,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:I})].map((O,z)=>z+""),playOrderPos:0,phase:d,activePlayers:null}),init:I=>N(I,[{fn:S}]),isPlayerActive:ae,eventHandlers:B,eventNames:Object.keys(B),enabledEventNames:W,moveMap:l,moveNames:[...f.values()],processMove:C,processEvent:X,getMove:w}}function $4(e){return e.processMove!==void 0}function dl(e){if($4(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:r})=>r),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(r=>{if(r.name===void 0)throw new Error("Plugin missing name attribute");if(r.name.includes(" "))throw new Error(r.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=L4(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(r=>r.name),processMove:(r,n)=>{let i=t.getMove(r.ctx,n.type,n.playerID);if(Cm(i)&&(i=i.move),i instanceof Function){const s=cm(i,xt.MOVE,e.plugins);let o=[];n.args!==void 0&&(o=Array.isArray(n.args)?n.args:[n.args]);const a={...Fi(r),G:r.G,ctx:r.ctx,playerID:n.playerID};return s(a,...o)}return pe(`invalid move object: ${n.type}`),r.G}}}function Cm(e){return e instanceof Object&&e.move!==void 0}var Qu;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(Qu||(Qu={}));var gt;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(gt||(gt={}));const Bo=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,F4=(e,t,r)=>{function n(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return n(r)?i(r.undoable)?r.undoable({G:e,ctx:t}):r.undoable:!0};function Rp(e,t){if(t.game.disableUndo)return e;const r={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(r.moveType=t.action.payload.type),{...e,_undo:[...e._undo,r],_redo:[]}}function Mc(e,t,r){const n={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(n.metadata=i),typeof r=="object"&&r.redact===!0?n.redact=!0:typeof r=="object"&&r.redact instanceof Function&&(n.redact=r.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[n]}}function Ec(e,t,r){const[n,i]=um(e,r);return i?[n,Ct(t,gt.PluginActionInvalid,i)]:[n]}function Mm(e){if(!e)return[null,void 0];const{transients:t,...r}=e;return[r,t]}function Ct(e,t,r){return{...e,transients:{error:{type:t,payload:r}}}}const Em=e=>t=>r=>{const n=t(r);switch(r.type){case ul:return n;default:{const[,i]=Mm(e.getState());return typeof i<"u"?(e.dispatch(lm()),{...n,transients:i}):n}}};function Pd({game:e,isClient:t}){return e=dl(e),(r=null,n)=>{let[i]=Mm(r);switch(n.type){case ul:return i;case al:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return pe("cannot call event after game end"),Ct(i,gt.GameOver);if(Bo(n)&&!e.flow.isPlayerActive(i.G,i.ctx,n.payload.playerID))return pe(`disallowed event: ${n.payload.type}`),Ct(i,gt.InactivePlayer);i=Vu(i,{game:e,playerID:n.payload.playerID});let s=e.flow.processEvent(i,n),o;return[s,o]=Ec(s,i,{game:e}),o||(s=Rp(s,{game:e,action:n}),{...s,_stateID:i._stateID+1})}case ro:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,n.payload.type,n.payload.playerID||i.ctx.currentPlayer);if(o===null)return pe(`disallowed move: ${n.payload.type}`),Ct(i,gt.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return pe("cannot make move after game end"),Ct(i,gt.GameOver);if(Bo(n)&&!e.flow.isPlayerActive(i.G,i.ctx,n.payload.playerID))return pe(`disallowed move: ${n.payload.type}`),Ct(i,gt.InactivePlayer);i=Vu(i,{game:e,playerID:n.payload.playerID});const a=e.processMove(i,n.payload);if(a===q)return pe(`invalid move: ${n.payload.type} args: ${n.payload.args}`),Ct(i,gt.InvalidMove);const l={...i,G:a};if(t&&M4(l,{game:e}))return i;if(i=l,t){let d;return[i,d]=Ec(i,s,{game:e}),d||{...i,_stateID:i._stateID+1}}i=Mc(i,n,o),i=e.flow.processMove(i,n.payload);let f;return[i,f]=Ec(i,s,{game:e}),f||(i=Rp(i,{game:e,action:n}),{...i,_stateID:i._stateID+1})}case pd:case md:case yd:return n.state;case cl:{if(i={...i,deltalog:[]},e.disableUndo)return pe("Undo is not enabled"),Ct(i,gt.ActionDisabled);const{G:s,ctx:o,_undo:a,_redo:l,_stateID:f}=i;if(a.length<2)return pe("No moves to undo"),Ct(i,gt.ActionInvalid);const d=a[a.length-1],y=a[a.length-2];if(Bo(n)&&n.payload.playerID!==d.playerID)return pe("Cannot undo other players' moves"),Ct(i,gt.ActionInvalid);if(d.moveType){const m=e.flow.getMove(y.ctx,d.moveType,d.playerID);if(!F4(s,o,m))return pe("Move cannot be undone"),Ct(i,gt.ActionInvalid)}return i=Mc(i,n),{...i,G:y.G,ctx:y.ctx,plugins:y.plugins,_stateID:f+1,_undo:a.slice(0,-1),_redo:[d,...l]}}case ll:{if(i={...i,deltalog:[]},e.disableUndo)return pe("Redo is not enabled"),Ct(i,gt.ActionDisabled);const{_undo:s,_redo:o,_stateID:a}=i;if(o.length===0)return pe("No moves to redo"),Ct(i,gt.ActionInvalid);const l=o[0];return Bo(n)&&n.payload.playerID!==l.playerID?(pe("Cannot redo other players' moves"),Ct(i,gt.ActionInvalid)):(i=Mc(i,n),{...i,G:l.G,ctx:l.ctx,plugins:l.plugins,_stateID:a+1,_undo:[...s,l],_redo:o.slice(1)})}case Gy:return _4(i,n,{game:e});case vd:{const s=i,o=JSON.parse(JSON.stringify(s)),a=xd.applyPatch(o,n.patch);return a.some(f=>f!==null)?(pe(`Patch ${JSON.stringify(n.patch)} apply failed`),Ct(s,Qu.PatchFailed,a)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var r=1,n={},i=!1,s=e.document,o;function a(v){typeof v!="function"&&(v=new Function(""+v));for(var P=new Array(arguments.length-1),j=0;j<P.length;j++)P[j]=arguments[j+1];var D={callback:v,args:P};return n[r]=D,o(r),r++}function l(v){delete n[v]}function f(v){var P=v.callback,j=v.args;switch(j.length){case 0:P();break;case 1:P(j[0]);break;case 2:P(j[0],j[1]);break;case 3:P(j[0],j[1],j[2]);break;default:P.apply(t,j);break}}function d(v){if(i)setTimeout(d,0,v);else{var P=n[v];if(P){i=!0;try{f(P)}finally{l(v),i=!1}}}}function y(){o=function(v){process.nextTick(function(){d(v)})}}function m(){if(e.postMessage&&!e.importScripts){var v=!0,P=e.onmessage;return e.onmessage=function(){v=!1},e.postMessage("","*"),e.onmessage=P,v}}function b(){var v="setImmediate$"+Math.random()+"$",P=function(j){j.source===e&&typeof j.data=="string"&&j.data.indexOf(v)===0&&d(+j.data.slice(v.length))};e.addEventListener?e.addEventListener("message",P,!1):e.attachEvent("onmessage",P),o=function(j){e.postMessage(v+j,"*")}}function k(){var v=new MessageChannel;v.port1.onmessage=function(P){var j=P.data;d(j)},o=function(P){v.port2.postMessage(P)}}function M(){var v=s.documentElement;o=function(P){var j=s.createElement("script");j.onreadystatechange=function(){d(P),j.onreadystatechange=null,v.removeChild(j),j=null},v.appendChild(j)}}function N(){o=function(v){setTimeout(d,0,v)}}var S=Object.getPrototypeOf&&Object.getPrototypeOf(e);S=S&&S.setTimeout?S:e,{}.toString.call(e.process)==="[object process]"?y():m()?b():e.MessageChannel?k():s&&"onreadystatechange"in s.createElement("script")?M():N(),S.setImmediate=a,S.clearImmediate=l})(typeof self>"u"?Ci:self);class U4{constructor({enumerate:t,seed:r}){this.enumerateFn=t,this.seed=r,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:r,initial:n}){this._opts[t]={range:r,value:n}}getOpt(t){return this._opts[t].value}setOpt(t,r){t in this._opts&&(this._opts[t].value=r)}opts(){return this._opts}enumerate(t,r,n){return this.enumerateFn(t,r,n).map(s=>{if("payload"in s)return s;if("move"in s)return em(s.move,s.args,n);if("event"in s)return Ds(s.event,s.args,n)})}random(t){let r;if(this.seed!==void 0){const n=this.prngstate?"":this.seed,i=Zy(n,this.prngstate);r=i(),this.prngstate=i.state()}else r=Math.random();if(t)if(Array.isArray(t)){const n=Math.floor(r*t.length);return t[n]}else return Math.floor(r*t);return r}}const H4=25;class W4 extends U4{constructor({enumerate:t,seed:r,objectives:n,game:i,iterations:s,playoutDepth:o,iterationCallback:a}){super({enumerate:t,seed:r}),n===void 0&&(n=()=>({})),this.objectives=n,this.iterationCallback=a||(()=>{}),this.reducer=Pd({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:r,parent:n,playerID:i}){const{G:s,ctx:o}=t;let a=[],l=[];if(i!==void 0)a=this.enumerate(s,o,i),l=this.objectives(s,o,i);else if(o.activePlayers)for(const f in o.activePlayers)a.push(...this.enumerate(s,o,f)),l.push(this.objectives(s,o,f));else a=this.enumerate(s,o,o.currentPlayer),l=this.objectives(s,o,o.currentPlayer);return{state:t,parent:n,parentAction:r,actions:a,objectives:l,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let r=null,n=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(r==null||o>n)&&(n=o,r=i)}return this.select(r)}expand(t){const r=t.actions;if(r.length===0||t.state.ctx.gameover!==void 0)return t;const n=this.random(r.length),i=r[n];t.actions.splice(n,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let r=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(r=this.playoutDepth(t.G,t.ctx));for(let n=0;n<r&&t.ctx.gameover===void 0;n++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const a=this.enumerate(i,s,o),l=this.objectives(i,s,o),f=Object.keys(l).reduce((m,b)=>{const k=l[b];return k.checker(i,s)?m+k.weight:m},0);if(f>0)return{score:f};if(!a||a.length===0)return;const d=this.random(a.length);t=this.reducer(t,a[d])}return t.ctx.gameover}backpropagate(t,r={}){t.visits++,r.score!==void 0&&(t.value+=r.score),r.draw===!0&&(t.value+=.5),t.parentAction&&r.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,r)}play(t,r){const n=this.createNode({state:t,playerID:r});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const f of n.children)(o==null||f.visits>o.visits)&&(o=f);return{action:o&&o.parentAction,metadata:n}};return new Promise(o=>{const a=()=>{for(let l=0;l<H4&&this.iterationCounter<i;l++){const f=this.select(n),d=this.expand(f),y=this.playout(d);this.backpropagate(d,y),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:n})};if(this.iterationCounter=0,this.getOpt("async")){const l=()=>{this.iterationCounter<i?(a(),setImmediate(l)):o(s())};l()}else{for(;this.iterationCounter<i;)a();o(s())}})}}function io(e){"@babel/helpers - typeof";return io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io(e)}function q4(e,t){if(io(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(io(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K4(e){var t=q4(e,"string");return io(t)=="symbol"?t:t+""}function V4(e,t,r){return(t=K4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Op(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Op(Object(r),!0).forEach(function(n){V4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Op(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ft(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Np=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Tp=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dp={INIT:"@@redux/INIT"+Tp(),REPLACE:"@@redux/REPLACE"+Tp()};function J4(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Cd(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ft(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ft(1));return r(Cd)(e,t)}if(typeof e!="function")throw new Error(Ft(2));var i=e,s=t,o=[],a=o,l=!1;function f(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Ft(3));return s}function y(M){if(typeof M!="function")throw new Error(Ft(4));if(l)throw new Error(Ft(5));var N=!0;return f(),a.push(M),function(){if(N){if(l)throw new Error(Ft(6));N=!1,f();var v=a.indexOf(M);a.splice(v,1),o=null}}}function m(M){if(!J4(M))throw new Error(Ft(7));if(typeof M.type>"u")throw new Error(Ft(8));if(l)throw new Error(Ft(9));try{l=!0,s=i(s,M)}finally{l=!1}for(var N=o=a,S=0;S<N.length;S++){var v=N[S];v()}return M}function b(M){if(typeof M!="function")throw new Error(Ft(10));i=M,m({type:Dp.REPLACE})}function k(){var M,N=y;return M={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Ft(11));function P(){v.next&&v.next(d())}P();var j=N(P);return{unsubscribe:j}}},M[Np]=function(){return this},M}return m({type:Dp.INIT}),n={dispatch:m,subscribe:y,getState:d,replaceReducer:b},n[Np]=k,n}function Am(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function Im(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),s=function(){throw new Error(Ft(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(l){return l(o)});return s=Am.apply(void 0,a)(i.dispatch),jp(jp({},i),{},{dispatch:s})}}}function Rm({game:e,numPlayers:t,setupData:r}){e=dl(e),t||(t=2);const n=e.flow.ctx(t);let i={G:{},ctx:n,plugins:{}};i=P4(i,{game:e}),i=Vu(i,{game:e,playerID:void 0});const s=Fi(i);i.G=e.setup({...s,ctx:i.ctx},r);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=um(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Md=class{constructor({transportDataCallback:t,gameName:r,playerID:n,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=r||"default",this.playerID=n||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Y4 extends Md{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Q4=e=>new Y4(e);class X4{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[r]of this.clients){if(this.debugPanel)break;this.mountDebug(r)}}this.notifySubscribers()}subscribe(t){const r=Symbol();return this.subscribers.set(r,t),t(this.getState()),()=>{this.subscribers.delete(r)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[r]of this.clients)if(r.playerID===t&&r.debugOpt!==!1&&r.multiplayer===this.currentClient.multiplayer){this.switchToClient(r);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(r=>{r(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let r,n=document.body;t.debugOpt&&t.debugOpt!==!0&&(r=t.debugOpt.impl||r,n=t.debugOpt.target||n),r&&(this.currentClient=t,this.debugPanel=new r({target:n,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Z4=new X4;function Xu(e,t,r){return!r&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Ed(e,t,r,n,i,s){const o={};for(const a of t)o[a]=(...l)=>{const f=g4[e](a,l,Xu(n,r,s),i);r.dispatch(f)};return o}const G4=Ed.bind(null,"makeMove"),e3=Ed.bind(null,"gameEvent"),t3=Ed.bind(null,"plugin");class r3{constructor({game:t,debug:r,numPlayers:n,multiplayer:i,matchID:s,playerID:o,credentials:a,enhancer:l}){this.game=dl(t),this.playerID=o,this.matchID=s||"default",this.credentials=a,this.multiplayer=i,this.debugOpt=r,this.manager=Z4,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Pd({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=Rm({game:this.game,numPlayers:n})),this.reset=()=>{this.store.dispatch(sm(this.initialState))},this.undo=()=>{const b=om(Xu(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(b)},this.redo=()=>{const b=am(Xu(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(b)},this.log=[];const m=Im(Em,()=>b=>k=>{const M=b(k);return this.notifySubscribers(),M},b=>k=>M=>{const N=b.getState(),S=k(M);return!("clientOnly"in M)&&M.type!==ul&&this.transport.sendAction(N,M),S},b=>k=>M=>{const N=k(M),S=b.getState();switch(M.type){case ro:case al:case cl:case ll:{const v=S.deltalog;this.log=[...this.log,...v];break}case pd:{this.log=[];break}case vd:case md:{let v=-1;this.log.length>0&&(v=this.log[this.log.length-1]._stateID);let P=M.deltalog||[];P=P.filter(j=>j._stateID>v),this.log=[...this.log,...P];break}case yd:{this.initialState=M.initialState,this.log=M.log||[];break}}return N});l=l!==void 0?Am(m,l):m,this.store=Cd(this.reducer,this.initialState,l),i||(i=Q4),this.transport=i({transportDataCallback:b=>this.receiveTransportData(b),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:a,gameName:this.game.name,numPlayers:n}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=b=>{this.transport.sendChatMessage(this.matchID,{id:G2(7),sender:this.playerID,payload:b})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[r]=t.args;if(r===this.matchID)switch(t.type){case"sync":{const[,n]=t.args,i=rm(n);this.receiveMatchData(n.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,n,i]=t.args,s=this.store.getState();if(n._stateID>=s._stateID){const o=im(n,i);this.store.dispatch(o)}break}case"patch":{const[,n,i,s,o]=t.args,a=this.store.getState()._stateID;if(n!==a)break;const l=nm(n,i,s,o);this.store.dispatch(l),this.store.getState()._stateID===a&&this.transport.requestSync();break}case"matchData":{const[,n]=t.args;this.receiveMatchData(n);break}case"chat":{const[,n]=t.args;this.receiveChatMessage(n);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const r=Object.keys(this.subscribers).length;return this.subscribers[r]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[r]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let r=!0;const n=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!n&&(r=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!n&&(r=!1),t.ctx.gameover!==void 0&&(r=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:fm(t,this)}),{...t,log:this.log,isActive:r,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=G4(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=e3(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=t3(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function n3(e){return new r3(e)}const Om=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},Ln=e=>Om(e,"game name"),ds=e=>Om(e,"match ID"),hs=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const r in t){const n=t[r],i=Array.isArray(n)?n:[n],s=e[r];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${r} to be of type ${o}, got ${s}.`)}}};class i3 extends Error{constructor(t,r){super(t),this.details=r}}class s3{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,r){const n=await fetch(this.server+t,r);if(!n.ok){let i;try{i=await n.clone().json()}catch{try{i=await n.text()}catch(s){i=s.message}}throw new i3(`HTTP status ${n.status}`,i)}return n.json()}async post(t,r){let n={method:"post",body:JSON.stringify(r.body),headers:{"Content-Type":"application/json"}};return r.init&&(n={...n,...r.init,headers:{...n.headers,...r.init.headers}}),this.request(t,n)}async listGames(t){return this.request("/games",t)}async listMatches(t,r,n){Ln(t);let i="";if(r){const s=[],{isGameover:o,updatedBefore:a,updatedAfter:l}=r;o!==void 0&&s.push(`isGameover=${o}`),a&&s.push(`updatedBefore=${a}`),l&&s.push(`updatedAfter=${l}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,n)}async getMatch(t,r,n){return Ln(t),ds(r),this.request(`/games/${t}/${r}`,n)}async createMatch(t,r,n){return Ln(t),hs(r,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:r,init:n})}async joinMatch(t,r,n,i){return Ln(t),ds(r),hs(n,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${r}/join`,{body:n,init:i})}async leaveMatch(t,r,n,i){Ln(t),ds(r),hs(n,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${r}/leave`,{body:n,init:i})}async updatePlayer(t,r,n,i){Ln(t),ds(r),hs(n,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${r}/update`,{body:n,init:i})}async playAgain(t,r,n,i){return Ln(t),ds(r),hs(n,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${r}/playAgain`,{body:n,init:i})}}var jm={exports:{}},o3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",a3=o3,l3=a3;function Nm(){}function Tm(){}Tm.resetWarningCache=Nm;var c3=function(){function e(n,i,s,o,a,l){if(l!==l3){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Tm,resetWarningCache:Nm};return r.PropTypes=r,r};jm.exports=c3();var u3=jm.exports;const Cr=B0(u3);var sn={},Ad={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */Ad.parse=p3;Ad.serialize=y3;var f3=decodeURIComponent,d3=encodeURIComponent,h3=/; */,zo=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function p3(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=e.split(h3),s=n.decode||f3,o=0;o<i.length;o++){var a=i[o],l=a.indexOf("=");if(!(l<0)){var f=a.substr(0,l).trim(),d=a.substr(++l,a.length).trim();d[0]=='"'&&(d=d.slice(1,-1)),r[f]==null&&(r[f]=m3(d,s))}}return r}function y3(e,t,r){var n=r||{},i=n.encode||d3;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!zo.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!zo.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!zo.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!zo.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.sameSite){var l=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function m3(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Bp=Object.getOwnPropertySymbols,v3=Object.prototype.hasOwnProperty,g3=Object.prototype.propertyIsEnumerable;function b3(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function x3(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var w3=x3()?Object.assign:function(e,t){for(var r,n=b3(e),i,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)v3.call(r,o)&&(n[o]=r[o]);if(Bp){i=Bp(r);for(var a=0;a<i.length;a++)g3.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n},S3={};Object.defineProperty(sn,"__esModule",{value:!0});var k3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};sn.load=Lm;sn.loadAll=$m;sn.select=Fm;sn.save=Um;sn.remove=Hm;sn.setRawCookie=Id;sn.plugToRequest=Wm;var _3=Ad,Qi=Bm(_3),P3=w3,Dm=Bm(P3);function Bm(e){return e&&e.__esModule?e:{default:e}}var hl=typeof document>"u"||typeof process<"u"&&S3&&!1,Wt={},Rn=void 0;function zm(){return Rn&&!Rn.headersSent}function Lm(e,t){var r=hl?Wt:Qi.default.parse(document.cookie),n=r&&r[e];if(typeof t>"u"&&(t=!n||n[0]!=="{"&&n[0]!=="["),!t)try{n=JSON.parse(n)}catch{}return n}function $m(e){var t=hl?Wt:Qi.default.parse(document.cookie),r=t;if(typeof e>"u"&&(e=!r||r[0]!=="{"&&r[0]!=="["),!e)try{r=JSON.parse(r)}catch{}return r}function Fm(e){var t=hl?Wt:Qi.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(r,n){if(!e.test(n))return r;var i={};return i[n]=t[n],(0,Dm.default)({},r,i)},{}):t:{}}function Um(e,t,r){Wt[e]=t,(typeof t>"u"?"undefined":k3(t))==="object"&&(Wt[e]=JSON.stringify(t)),hl||(document.cookie=Qi.default.serialize(e,Wt[e],r)),zm()&&Rn.cookie&&Rn.cookie(e,t,r)}function Hm(e,t){delete Wt[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Dm.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=Qi.default.serialize(e,"",t)),zm()&&Rn.clearCookie&&Rn.clearCookie(e,t)}function Id(e){e?Wt=Qi.default.parse(e):Wt={}}function Wm(e,t){return e.cookie?Wt=e.cookie:e.cookies?Wt=e.cookies:e.headers&&e.headers.cookie?Id(e.headers.cookie):Wt={},Rn=t,function(){Rn=null,Wt={}}}var zp=sn.default={setRawCookie:Id,load:Lm,loadAll:$m,select:Fm,save:Um,remove:Hm,plugToRequest:Wm},Ba;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Ba||(Ba={}));function $n(e){return e.type()===Ba.SYNC}class C3{type(){return Ba.SYNC}connect(){}createMatch(t,r){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,r);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const M3=({game:e,unlisted:t,setupData:r,numPlayers:n})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<n;s++)i.players[s]={id:s};return i},E3=({game:e,numPlayers:t,setupData:r,unlisted:n})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(r,t);if(i!==void 0)return{setupDataError:i};const s=M3({game:e,numPlayers:t,setupData:r,unlisted:n}),o=Rm({game:e,numPlayers:t,setupData:r});return{metadata:s,initialState:o}},Lp=e=>Object.values(e.players).map(t=>{const{credentials:r,...n}=t;return n}),A3=e=>{const{credentials:t,...r}=e.payload;return{...e,payload:r}};class I3{constructor(t,r,n,i){this.game=dl(t),this.storageAPI=r,this.transportAPI=n,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,r,n,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if($n(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(n,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(n,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=A3(t),a=n;let l;if($n(this.storageAPI)?{state:l}=this.storageAPI.fetch(a,{state:!0}):{state:l}=await this.storageAPI.fetch(a,{state:!0}),l===void 0)return pe(`game not found, matchID=[${a}]`),{error:"game not found"};if(l.ctx.gameover!==void 0){pe(`game over - matchID=[${a}] - playerID=[${i}] - action[${o.payload.type}]`);return}const f=Pd({game:this.game}),d=Im(Em),y=Cd(f,l,d);if(o.type==cl||o.type==ll){const S=l.ctx.activePlayers!==null,v=l.ctx.currentPlayer===i;if(!S&&!v||S&&(l.ctx.activePlayers[i]===void 0||Object.keys(l.ctx.activePlayers).length>1)){pe(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(l.G,l.ctx,i)){pe(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const m=o.type==ro?this.game.flow.getMove(l.ctx,o.payload.type,i):null;if(o.type==ro&&!m){pe(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(l._stateID!==r&&!(m&&Cm(m)&&m.ignoreStaleStateID)){pe(`invalid stateID, was=[${r}], expected=[${l._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const b=y.getState();y.dispatch(o),l=y.getState(),this.subscribeCallback({state:l,action:o,matchID:n}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[n,r,b,l]}):this.transportAPI.sendAll({type:"update",args:[n,l]});const{deltalog:k,...M}=l;let N;if(s&&(s.gameover===void 0||s.gameover===null)&&(N={...s,updatedAt:Date.now()},l.ctx.gameover!==void 0&&(N.gameover=l.ctx.gameover)),$n(this.storageAPI))this.storageAPI.setState(a,M,k),N&&this.storageAPI.setMetadata(a,N);else{const S=[this.storageAPI.setState(a,M,k)];N&&S.push(this.storageAPI.setMetadata(a,N)),await Promise.all(S)}}async onSync(t,r,n,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},a=$n(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:l,initialState:f,log:d,metadata:y}=a;if(this.auth&&r!==void 0&&r!==null&&!await this.auth.authenticateCredentials({playerID:r,credentials:n,metadata:y}))return{error:"unauthorized"};if(l===void 0){const k=E3({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in k)return{error:"game requires setupData"};f=l=k.initialState,y=k.metadata,this.subscribeCallback({state:l,matchID:t}),$n(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:f,metadata:y}):await this.storageAPI.createMatch(s,{initialState:f,metadata:y})}const m=y?Lp(y):void 0,b={state:l,log:d,filteredMetadata:m,initialState:f};this.transportAPI.send({playerID:r,type:"sync",args:[t,b]})}async onConnectionChange(t,r,n,i){const s=t;if(r==null)return;let o;if($n(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return pe(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[r]===void 0)return pe(`Player not in the match, matchID=[${s}] playerID=[${r}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:r,credentials:n,metadata:o}))return{error:"unauthorized"};o.players[r].isConnected=i;const a=Lp(o);this.transportAPI.sendAll({type:"matchData",args:[t,a]}),$n(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,r,n){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(r&&typeof r.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:r.sender,credentials:n,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,r]})}}const Lo=(e,t,r)=>({...r,G:e.playerView({G:r.G,ctx:r.ctx,playerID:t}),plugins:fm(r,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),R3=e=>(t,r)=>{switch(r.type){case"patch":{const[n,i,s,o]=r.args,a=Ac(o.deltalog,t),l=Lo(e,t,o),f=o._stateID,d=Lo(e,t,s),y=xd.createPatch(d,l);return{type:"patch",args:[n,i,f,y,a]}}case"update":{const[n,i]=r.args,s=Ac(i.deltalog,t),o=Lo(e,t,i);return{type:"update",args:[n,o,s]}}case"sync":{const[n,i]=r.args,s=Lo(e,t,i.state),o=Ac(i.log,t),a={...i,state:s,log:o};return{type:"sync",args:[n,a]}}default:return r}};function Ac(e,t){return e===void 0?e:e.map(r=>{if(t!==null&&+t==+r.action.payload.playerID||r.redact!==!0)return r;const n={...r.action.payload,args:null},i={...r,action:{...r.action,payload:n}},{redact:s,...o}=i;return o})}const Dr=Object.create(null);Dr.open="0";Dr.close="1";Dr.ping="2";Dr.pong="3";Dr.message="4";Dr.upgrade="5";Dr.noop="6";const na=Object.create(null);Object.keys(Dr).forEach(e=>{na[Dr[e]]=e});const Zu={type:"error",data:"parser error"},qm=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Km=typeof ArrayBuffer=="function",Vm=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Rd=({type:e,data:t},r,n)=>qm&&t instanceof Blob?r?n(t):$p(t,n):Km&&(t instanceof ArrayBuffer||Vm(t))?r?n(t):$p(new Blob([t]),n):n(Dr[e]+(t||"")),$p=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function Fp(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Ic;function O3(e,t){if(qm&&e.data instanceof Blob)return e.data.arrayBuffer().then(Fp).then(t);if(Km&&(e.data instanceof ArrayBuffer||Vm(e.data)))return t(Fp(e.data));Rd(e,!1,r=>{Ic||(Ic=new TextEncoder),t(Ic.encode(r))})}const Up="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ks=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Up.length;e++)ks[Up.charCodeAt(e)]=e;const j3=e=>{let t=e.length*.75,r=e.length,n,i=0,s,o,a,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),d=new Uint8Array(f);for(n=0;n<r;n+=4)s=ks[e.charCodeAt(n)],o=ks[e.charCodeAt(n+1)],a=ks[e.charCodeAt(n+2)],l=ks[e.charCodeAt(n+3)],d[i++]=s<<2|o>>4,d[i++]=(o&15)<<4|a>>2,d[i++]=(a&3)<<6|l&63;return f},N3=typeof ArrayBuffer=="function",Od=(e,t)=>{if(typeof e!="string")return{type:"message",data:Jm(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:T3(e.substring(1),t)}:na[r]?e.length>1?{type:na[r],data:e.substring(1)}:{type:na[r]}:Zu},T3=(e,t)=>{if(N3){const r=j3(e);return Jm(r,t)}else return{base64:!0,data:e}},Jm=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Ym="",D3=(e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach((s,o)=>{Rd(s,!1,a=>{n[o]=a,++i===r&&t(n.join(Ym))})})},B3=(e,t)=>{const r=e.split(Ym),n=[];for(let i=0;i<r.length;i++){const s=Od(r[i],t);if(n.push(s),s.type==="error")break}return n};function z3(){return new TransformStream({transform(e,t){O3(e,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let Rc;function $o(e){return e.reduce((t,r)=>t+r.length,0)}function Fo(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)r[i]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function L3(e,t){Rc||(Rc=new TextDecoder);const r=[];let n=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(n===0){if($o(r)<1)break;const l=Fo(r,1);s=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if($o(r)<2)break;const l=Fo(r,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if($o(r)<8)break;const l=Fo(r,8),f=new DataView(l.buffer,l.byteOffset,l.length),d=f.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(Zu);break}i=d*Math.pow(2,32)+f.getUint32(4),n=3}else{if($o(r)<i)break;const l=Fo(r,i);a.enqueue(Od(s?l:Rc.decode(l),t)),n=0}if(i===0||i>e){a.enqueue(Zu);break}}}})}const Qm=4;function rt(e){if(e)return $3(e)}function $3(e){for(var t in rt.prototype)e[t]=rt.prototype[t];return e}rt.prototype.on=rt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};rt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};rt.prototype.off=rt.prototype.removeListener=rt.prototype.removeAllListeners=rt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};rt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this};rt.prototype.emitReserved=rt.prototype.emit;rt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};rt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const pl=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),er=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),F3="arraybuffer";function Xm(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const U3=er.setTimeout,H3=er.clearTimeout;function yl(e,t){t.useNativeTimers?(e.setTimeoutFn=U3.bind(er),e.clearTimeoutFn=H3.bind(er)):(e.setTimeoutFn=er.setTimeout.bind(er),e.clearTimeoutFn=er.clearTimeout.bind(er))}const W3=1.33;function q3(e){return typeof e=="string"?K3(e):Math.ceil((e.byteLength||e.size)*W3)}function K3(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function Zm(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function V3(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function J3(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class Y3 extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class jd extends rt{constructor(t){super(),this.writable=!1,yl(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new Y3(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Od(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=V3(t);return r.length?"?"+r:""}}class Q3 extends jd{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};B3(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,D3(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Zm()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Gm=!1;try{Gm=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const X3=Gm;function Z3(){}class G3 extends Q3{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Or extends rt{constructor(t,r,n){super(),this.createRequest=t,yl(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=Xm(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Or.requestsCount++,Or.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Z3,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Or.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Or.requestsCount=0;Or.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Hp);else if(typeof addEventListener=="function"){const e="onpagehide"in er?"pagehide":"unload";addEventListener(e,Hp,!1)}}function Hp(){for(let e in Or.requests)Or.requests.hasOwnProperty(e)&&Or.requests[e].abort()}const ex=function(){const e=ev({xdomain:!1});return e&&e.responseType!==null}();class tx extends G3{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=ex&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Or(ev,this.uri(),t)}}function ev(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||X3))return new XMLHttpRequest}catch{}if(!t)try{return new er[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const tv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class rx extends jd{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=tv?{}:Xm(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;Rd(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{}i&&pl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Zm()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Oc=er.WebSocket||er.MozWebSocket;class nx extends rx{createSocket(t,r,n){return tv?new Oc(t,r,n):r?new Oc(t,r):new Oc(t)}doWrite(t,r){this.ws.send(r)}}class ix extends jd{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=L3(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),i=z3();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;this._writer.write(n).then(()=>{i&&pl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const sx={websocket:nx,webtransport:ix,polling:tx},ox=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ax=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Gu(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=ox.exec(e||""),s={},o=14;for(;o--;)s[ax[o]]=i[o]||"";return r!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=lx(s,s.path),s.queryKey=cx(s,s.query),s}function lx(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function cx(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}const ef=typeof addEventListener=="function"&&typeof removeEventListener=="function",ia=[];ef&&addEventListener("offline",()=>{ia.forEach(e=>e())},!1);class Mn extends rt{constructor(t,r){if(super(),this.binaryType=F3,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Gu(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Gu(r.host).host);yl(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=J3(this.opts.query)),ef&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ia.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Qm,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Mn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Mn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=q3(i)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,pl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:t,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Mn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ef&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=ia.indexOf(this._offlineEventListener);n!==-1&&ia.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Mn.protocol=Qm;class ux extends Mn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Mn.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",y=>{if(!n)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Mn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function s(){n||(n=!0,d(),r.close(),r=null)}const o=y=>{const m=new Error("probe error: "+y);m.transport=r.name,s(),this.emitReserved("upgradeError",m)};function a(){o("transport closed")}function l(){o("socket closed")}function f(y){r&&y.name!==r.name&&s()}const d=()=>{r.removeListener("open",i),r.removeListener("error",o),r.removeListener("close",a),this.off("close",l),this.off("upgrading",f)};r.once("open",i),r.once("error",o),r.once("close",a),this.once("close",l),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let fx=class extends ux{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>sx[i]).filter(i=>!!i)),super(t,n)}};function dx(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Gu(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const hx=typeof ArrayBuffer=="function",px=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,rv=Object.prototype.toString,yx=typeof Blob=="function"||typeof Blob<"u"&&rv.call(Blob)==="[object BlobConstructor]",mx=typeof File=="function"||typeof File<"u"&&rv.call(File)==="[object FileConstructor]";function Nd(e){return hx&&(e instanceof ArrayBuffer||px(e))||yx&&e instanceof Blob||mx&&e instanceof File}function sa(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(sa(e[r]))return!0;return!1}if(Nd(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return sa(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&sa(e[r]))return!0;return!1}function vx(e){const t=[],r=e.data,n=e;return n.data=tf(r,t),n.attachments=t.length,{packet:n,buffers:t}}function tf(e,t){if(!e)return e;if(Nd(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=tf(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=tf(e[n],t));return r}return e}function gx(e,t){return e.data=rf(e.data,t),delete e.attachments,e}function rf(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=rf(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=rf(e[r],t));return e}const bx=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],xx=5;var ue;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ue||(ue={}));let wx=class{constructor(t){this.replacer=t}encode(t){return(t.type===ue.EVENT||t.type===ue.ACK)&&sa(t)?this.encodeAsBinary({type:t.type===ue.EVENT?ue.BINARY_EVENT:ue.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===ue.BINARY_EVENT||t.type===ue.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=vx(t),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}};function Wp(e){return Object.prototype.toString.call(e)==="[object Object]"}let Sx=class nv extends rt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===ue.BINARY_EVENT;n||r.type===ue.BINARY_ACK?(r.type=n?ue.EVENT:ue.ACK,this.reconstructor=new kx(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Nd(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(ue[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===ue.BINARY_EVENT||n.type===ue.BINARY_ACK){const s=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(s,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(s,r)}else n.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(s,r+1))}if(t.charAt(++r)){const s=this.tryParse(t.substr(r));if(nv.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case ue.CONNECT:return Wp(r);case ue.DISCONNECT:return r===void 0;case ue.CONNECT_ERROR:return typeof r=="string"||Wp(r);case ue.EVENT:case ue.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&bx.indexOf(r[0])===-1);case ue.ACK:case ue.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class kx{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=gx(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const _x=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Sx,Encoder:wx,get PacketType(){return ue},protocol:xx},Symbol.toStringTag,{value:"Module"}));function mr(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const Px=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class iv extends rt{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[mr(t,"open",this.onopen.bind(this)),mr(t,"packet",this.onpacket.bind(this)),mr(t,"error",this.onerror.bind(this)),mr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,i,s;if(Px.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:ue.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,y=r.pop();this._registerAckCallback(d,y),o.id=d}const a=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=r;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);r.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),r.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,i)=>{const s=(o,a)=>o?i(o):n(a);s.withError=!0,r.push(s),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ue.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ue.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ue.EVENT:case ue.BINARY_EVENT:this.onevent(t);break;case ue.ACK:case ue.BINARY_ACK:this.onack(t);break;case ue.DISCONNECT:this.ondisconnect();break;case ue.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:ue.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ue.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Xi(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Xi.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Xi.prototype.reset=function(){this.attempts=0};Xi.prototype.setMin=function(e){this.ms=e};Xi.prototype.setMax=function(e){this.max=e};Xi.prototype.setJitter=function(e){this.jitter=e};class nf extends rt{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,yl(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Xi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||_x;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new fx(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=mr(r,"open",function(){n.onopen(),t&&t()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=mr(r,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),r.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(mr(t,"ping",this.onping.bind(this)),mr(t,"data",this.ondata.bind(this)),mr(t,"error",this.onerror.bind(this)),mr(t,"close",this.onclose.bind(this)),mr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){pl(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new iv(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ps={};function oa(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=dx(e,t.path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=ps[i]&&s in ps[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return a?l=new nf(n,t):(ps[i]||(ps[i]=new nf(n,t)),l=ps[i]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(oa,{Manager:nf,Socket:iv,io:oa,connect:oa});class sv extends C3{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,r){this.initial.set(t,r.initialState),this.setState(t,r.initialState),this.setMetadata(t,r.metadata)}setMetadata(t,r){this.metadata.set(t,r)}setState(t,r,n){if(n&&n.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...n])}this.state.set(t,r)}fetch(t,r){const n={};return r.state&&(n.state=this.state.get(t)),r.metadata&&(n.metadata=this.metadata.get(t)),r.log&&(n.log=this.log.get(t)||[]),r.initialState&&(n.initialState=this.initial.get(t)),n}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,r])=>t?!(t.gameName!==void 0&&r.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&r.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&r.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&r.updatedAt<=t.where.updatedAfter)):!0).map(([r])=>r)}}class Cx extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(n=>this.set(...n))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,r){return super.set(t,r),this.sync(),this}delete(t){const r=super.delete(t);return this.sync(),r}}class Mx extends sv{constructor(t="bgio"){super();const r=n=>new Cx(`${t}_${n}`);this.state=r("state"),this.initial=r("initial"),this.metadata=r("metadata"),this.log=r("log")}}function Ex(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const r of Object.keys(t))if(r in e.ctx.activePlayers)return r}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class Ax extends I3{constructor({game:t,bots:r,storageKey:n,persist:i}){const s={},o={};if(t&&t.ai&&r)for(const y in r){const m=r[y];o[y]=new m({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const a=({playerID:y,...m})=>{const b=s[y];b!==void 0&&b(l(y,m))},l=R3(t),f={send:a,sendAll:y=>{for(const m in s)a({playerID:m,...y})}},d=i?new Mx(n):new sv;super(t,d,f),this.connect=(y,m)=>{s[y]=m},this.subscribe(({state:y,matchID:m})=>{if(!r)return;const b=Ex(y,o);b!==null&&setTimeout(async()=>{const k=await o[b].play(y,b);await this.onUpdate(k.action,y._stateID,m,k.action.payload.playerID)},100)})}}class Ix extends Md{constructor({master:t,...r}){super(r),this.master=t}sendChatMessage(t,r){const n=[t,r,this.credentials];this.master.onChatMessage(...n)}sendAction(t,r){this.master.onUpdate(r,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const qp=new Map;function ov({bots:e,persist:t,storageKey:r}={}){return n=>{const{gameKey:i,game:s}=n;let o;const a=qp.get(i);return a&&a.bots===e&&a.storageKey===r&&a.persist===t&&(o=a.master),o||(o=new Ax({game:s,bots:e,persist:t,storageKey:r}),qp.set(i,{master:o,bots:e,persist:t,storageKey:r})),new Ix({master:o,...n})}}const Kp=oa;class Rx extends Md{constructor({socket:t,socketOpts:r,server:n,...i}){super(i),this.server=n,this.socket=t,this.socketOpts=r}sendAction(t,r){const n=[r,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...n)}sendChatMessage(t,r){const n=[t,r,this.credentials];this.socket.emit("chat",...n)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=Kp(t+this.gameName,this.socketOpts)}else this.socket=Kp("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,r,n,i,s)=>{this.notifyClient({type:"patch",args:[t,r,n,i,s]})}),this.socket.on("update",(t,r,n)=>{this.notifyClient({type:"update",args:[t,r,n]})}),this.socket.on("sync",(t,r)=>{this.notifyClient({type:"sync",args:[t,r]})}),this.socket.on("matchData",(t,r)=>{this.notifyClient({type:"matchData",args:[t,r]})}),this.socket.on("chat",(t,r)=>{this.notifyClient({type:"chat",args:[t,r]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function Vp({server:e,socketOpts:t}={}){return r=>new Rx({server:e,socketOpts:t,...r})}function za(e){var t;const{game:r,numPlayers:n,board:i,multiplayer:s,enhancer:o}=e;let{loading:a,debug:l}=e;return a===void 0&&(a=()=>G.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends G.Component{constructor(d){super(d),l===void 0&&(l=d.debug),this.client=n3({game:r,debug:l,numPlayers:n,multiplayer:s,matchID:d.matchID,playerID:d.playerID,credentials:d.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(d){this.props.matchID!=d.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=d.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=d.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const d=this.client.getState();if(d===null)return G.createElement(a);let y=null;return i&&(y=G.createElement(i,{...d,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),G.createElement("div",{className:"bgio-client"},y)}},t.propTypes={matchID:Cr.string,playerID:Cr.string,credentials:Cr.string,debug:Cr.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class Ox{constructor({server:t,gameComponents:r,playerName:n,playerCredentials:i}){this.client=new s3({server:t}),this.gameComponents=r,this.playerName=n||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const r of t){if(!this._getGameComponents(r))continue;const{matches:n}=await this.client.listMatches(r);this.matches.push(...n)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const r of this.matches)if(r.matchID===t)return r}_getGameComponents(t){for(const r of this.gameComponents)if(r.game.name===t)return r}_findPlayer(t){for(const r of this.matches)if(r.players.some(n=>n.name===t))return r}async join(t,r,n){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(r),!i)throw new Error("game instance "+r+" not found");const s=await this.client.joinMatch(t,r,{playerID:n,playerName:this.playerName});i.players[Number.parseInt(n)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+r+" ("+i+")")}}async leave(t,r){try{const n=this._getMatchInstance(r);if(!n)throw new Error("match instance not found");for(const i of n.players)if(i.name===this.playerName){await this.client.leaveMatch(t,r,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(n){throw new Error("failed to leave match "+r+" ("+n+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,r){try{const n=this._getGameComponents(t);if(!n)throw new Error("game not found");if(r<n.game.minPlayers||r>n.game.maxPlayers)throw new Error("invalid number of players "+r);await this.client.createMatch(t,{numPlayers:r})}catch(n){throw new Error("failed to create match for "+t+" ("+n+")")}}}function jx(e){return new Ox(e)}class av extends G.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const r=t.target.value.trim();this.setState({playerName:r,nameErrorMsg:r.length>0?"":"empty player name"})}}render(){return G.createElement("div",null,G.createElement("p",{className:"phase-title"},"Choose a player name:"),G.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),G.createElement("span",{className:"buttons"},G.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),G.createElement("br",null),G.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,G.createElement("br",null)))}}av.defaultProps={playerName:""};class Nx extends G.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,r)=>G.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+r)},"Join"),this._createButtonLeave=t=>G.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,r)=>G.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+r,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>G.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const r=t.players.find(i=>i.name===this.props.playerName),n=t.players.find(i=>!i.name);return r&&n?this._createButtonLeave(t):n?this._createButtonJoin(t,n.id):r?G.createElement("div",null,[this._createButtonPlay(t,r.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let r="OPEN";return t.players.some(n=>!n.name)||(r="RUNNING"),G.createElement("tr",{key:"line-"+t.matchID},G.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),G.createElement("td",{key:"cell-status-"+t.matchID},r),G.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(n=>this._createSeat(n)).join(", ")),G.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Tx extends G.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(r,n)=>G.createElement("option",{key:"name-option-"+n,value:n},r.game.name),this._createNumPlayersOption=r=>G.createElement("option",{key:"num-option-"+r,value:r},r),this._createNumPlayersRange=r=>Array.from({length:r.maxPlayers+1}).map((n,i)=>i).slice(r.minPlayers),this.onChangeNumPlayers=r=>{this.setState({numPlayers:Number.parseInt(r.target.value)})},this.onChangeSelectedGame=r=>{const n=Number.parseInt(r.target.value);this.setState({selectedGame:n,numPlayers:this.props.games[n].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const r of t.games){const n=r.game;n.minPlayers||(n.minPlayers=1),n.maxPlayers||(n.maxPlayers=4),console.assert(n.maxPlayers>=n.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return G.createElement("div",null,G.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,r)=>this._createGameNameOption(t,r))),G.createElement("span",null,"Players:"),G.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),G.createElement("span",{className:"buttons"},G.createElement("button",{onClick:this.onClickCreate},"Create")))}}var jt;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(jt||(jt={}));class lv extends G.Component{constructor(t){super(t),this.state={phase:jt.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=r=>{const n=this.state.playerName;this.connection=jx({server:r.lobbyServer,gameComponents:r.gameComponents,playerName:n,playerCredentials:this.state.credentialStore[n]})},this._updateCredentials=(r,n)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[r]=n,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=r=>{this._startRefreshInterval(),this.setState({playerName:r,phase:jt.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:jt.ENTER,errorMsg:""})},this._createMatch=async(r,n)=>{try{await this.connection.create(r,n),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(r,n,i)=>{try{await this.connection.join(r,n,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(r,n)=>{try{await this.connection.leave(r,n),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(r,n)=>{const i=this.connection._getGameComponents(r);if(!i){this.setState({errorMsg:"game "+r+" not supported"});return}let s;if(n.numPlayers>1&&(s=this.props.gameServer?Vp({server:this.props.gameServer}):Vp()),n.numPlayers==1){const l=i.game.maxPlayers,f={};for(let d=1;d<l;d++)f[d+""]=W4;s=ov({bots:f})}const a={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:n.matchID,playerID:n.numPlayers>1?n.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:jt.PLAY,runningMatch:a})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:jt.LIST,runningMatch:null})},this._getPhaseVisibility=r=>this.state.phase!==r?"hidden":"phase",this.renderMatches=(r,n)=>r.map(i=>{const{matchID:s,gameName:o,players:a}=i;return G.createElement(Nx,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(a)},playerName:n,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=zp.load("lobbyState")||{};t.phase&&t.phase===jt.PLAY&&(t.phase=jt.LIST),t.phase&&t.phase!==jt.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||jt.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,r){const n=this.state.playerName,i=this.state.credentialStore[n];if(r.phase!==this.state.phase||r.credentialStore[n]!==i||r.playerName!==n){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:n,credentialStore:this.state.credentialStore};zp.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:r}=this.props,{errorMsg:n,playerName:i,phase:s,runningMatch:o}=this.state;return r?r({errorMsg:n,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):G.createElement("div",{id:"lobby-view",style:{padding:50}},G.createElement("div",{className:this._getPhaseVisibility(jt.ENTER)},G.createElement(av,{key:i,playerName:i,onEnter:this._enterLobby})),G.createElement("div",{className:this._getPhaseVisibility(jt.LIST)},G.createElement("p",null,"Welcome, ",i),G.createElement("div",{className:"phase-title",id:"match-creation"},G.createElement("span",null,"Create a match:"),G.createElement(Tx,{games:t,createMatch:this._createMatch})),G.createElement("p",{className:"phase-title"},"Join a match:"),G.createElement("div",{id:"instances"},G.createElement("table",null,G.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),G.createElement("span",{className:"error-msg"},n,G.createElement("br",null))),G.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),G.createElement("div",{className:this._getPhaseVisibility(jt.PLAY)},o&&G.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),G.createElement("div",{className:"buttons",id:"match-exit"},G.createElement("button",{onClick:this._exitMatch},"Exit match"))),G.createElement("div",{className:"buttons",id:"lobby-exit"},G.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}lv.propTypes={gameComponents:Cr.array.isRequired,lobbyServer:Cr.string,gameServer:Cr.string,debug:Cr.bool,clientFactory:Cr.func,refreshInterval:Cr.number};lv.defaultProps={debug:!1,clientFactory:za,refreshInterval:2e3};const Jp=({card:e,onClick:t,selected:r})=>p.jsxs("div",{onClick:t,style:{border:r?"2px solid #4CAF50":"1px solid #3a3a5c",borderRadius:"8px",padding:"8px 12px",margin:"4px",cursor:t?"pointer":"default",backgroundColor:r?"#1a4a3a":"#16213e",minWidth:"80px",textAlign:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.3)",transition:"all 0.2s ease",color:"#e4e4e4"},children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:e.name}),p.jsx("div",{style:{fontSize:"10px",color:"#a0a0a0"},children:e.id})]}),Yp=({playerID:e,hand:t,field:r,isCurrentPlayer:n,isActivePlayer:i,onCardClick:s,selectedCard:o})=>p.jsxs("div",{style:{border:i?"2px solid #2196F3":"1px solid #3a3a5c",borderRadius:"12px",padding:"16px",margin:"8px 0",backgroundColor:n?"#1e2a45":"#16213e"},children:[p.jsxs("div",{style:{fontWeight:"bold",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#e4e4e4"},children:[p.jsxs("span",{children:["Player ",e," ",n&&"(You)"," ",i&&""]}),p.jsxs("span",{style:{fontSize:"12px",color:"#a0a0a0"},children:["Hand: ",t.length," | Field: ",r.length]})]}),p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsx("div",{style:{fontSize:"12px",color:"#a0a0a0",marginBottom:"4px"},children:"Field:"}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",minHeight:"60px",backgroundColor:"#0f3460",borderRadius:"8px",padding:"8px"},children:r.length===0?p.jsx("span",{style:{color:"#6a6a8a",padding:"8px"},children:"No cards played"}):r.map(a=>p.jsx(Jp,{card:a},a.id))})]}),p.jsxs("div",{children:[p.jsxs("div",{style:{fontSize:"12px",color:"#a0a0a0",marginBottom:"4px"},children:["Hand: ",!n&&"(hidden)"]}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",minHeight:"60px"},children:n?t.length===0?p.jsx("span",{style:{color:"#6a6a8a",padding:"8px"},children:"No cards in hand"}):t.map(a=>p.jsx(Jp,{card:a,onClick:()=>s==null?void 0:s(a.id),selected:o===a.id},a.id)):p.jsxs("span",{style:{color:"#6a6a8a",padding:"8px"},children:[t.length," cards (hidden)"]})})]})]}),Dx=({G:e,ctx:t,moves:r,playerID:n})=>{const[i,s]=G.useState(null),o=n||"0",a=t.currentPlayer===o,l=e.hands[o]||[],f=b=>{a&&s(k=>k===b?null:b)},d=()=>{a&&r.drawCard()},y=()=>{!a||!i||(r.playCard(i),s(null))},m=()=>{!a||!i||(r.discardCard(i),s(null))};return t.gameover?p.jsxs("div",{style:{padding:"40px",textAlign:"center",fontFamily:"system-ui, sans-serif",color:"#e4e4e4"},children:[p.jsx("h1",{children:"Game Over!"}),t.gameover.winner?p.jsxs("p",{style:{fontSize:"24px"},children:[" Player ",t.gameover.winner," wins! "]}):p.jsx("p",{style:{fontSize:"24px"},children:"It's a draw!"}),p.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",marginTop:"20px"},children:"Play Again"})]}):p.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",fontFamily:"system-ui, sans-serif",color:"#e4e4e4"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"12px",backgroundColor:"#16213e",borderRadius:"8px",border:"1px solid #3a3a5c"},children:[p.jsx("h2",{style:{margin:0},children:"ManaMesh - Simple Card Game"}),p.jsxs("div",{style:{color:"#a0a0a0"},children:[p.jsxs("span",{style:{marginRight:"16px"},children:["Deck: ",e.deck.length," cards"]}),p.jsxs("span",{children:["Discard: ",e.discard.length," cards"]})]})]}),p.jsx("div",{style:{padding:"12px",backgroundColor:a?"#1a4a3a":"#3d2a1a",borderRadius:"8px",marginBottom:"20px",textAlign:"center",border:"1px solid #3a3a5c"},children:a?p.jsx("span",{style:{color:"#6fcf6f",fontWeight:"bold"},children:"Your turn! Draw, play, or discard cards."}):p.jsxs("span",{style:{color:"#ff9800"},children:["Waiting for Player ",t.currentPlayer,"..."]})}),Object.keys(e.hands).filter(b=>b!==o).map(b=>p.jsx(Yp,{playerID:b,hand:e.hands[b]||[],field:e.field[b]||[],isCurrentPlayer:!1,isActivePlayer:t.currentPlayer===b,selectedCard:null},b)),p.jsx(Yp,{playerID:o,hand:l,field:e.field[o]||[],isCurrentPlayer:!0,isActivePlayer:t.currentPlayer===o,onCardClick:f,selectedCard:i}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"20px"},children:[p.jsx("button",{onClick:d,disabled:!a||e.deck.length===0,style:{padding:"12px 24px",fontSize:"16px",cursor:a&&e.deck.length>0?"pointer":"not-allowed",backgroundColor:a&&e.deck.length>0?"#2196F3":"#3a3a5c",color:a&&e.deck.length>0?"white":"#6a6a8a",border:"none",borderRadius:"8px"},children:"Draw Card"}),p.jsx("button",{onClick:y,disabled:!a||!i,style:{padding:"12px 24px",fontSize:"16px",cursor:a&&i?"pointer":"not-allowed",backgroundColor:a&&i?"#4CAF50":"#3a3a5c",color:a&&i?"white":"#6a6a8a",border:"none",borderRadius:"8px"},children:"Play Selected"}),p.jsx("button",{onClick:m,disabled:!a||!i,style:{padding:"12px 24px",fontSize:"16px",cursor:a&&i?"pointer":"not-allowed",backgroundColor:a&&i?"#ff9800":"#3a3a5c",color:a&&i?"white":"#6a6a8a",border:"none",borderRadius:"8px"},children:"Discard Selected"})]}),p.jsxs("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:"#3d2a1a",borderRadius:"8px",fontSize:"14px",color:"#f0c060",border:"1px solid #3a3a5c"},children:[p.jsx("strong",{children:"Win condition:"})," Play ",e.cardsToWin," cards to the field to win!"]})]})};function Bx(e,t){const r={},n={};for(let i=0;i<t;i++)r[i.toString()]=[],n[i.toString()]=[];return{deck:zx(e),hands:r,field:n,discard:[],winner:null,maxHandSize:7,cardsToWin:5}}function zx(e){const t=e.slice();for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}function Lx(e,t){const r=e.deck.slice(),n={...e.hands};if(r.length===0)return{state:{...e,deck:r,hands:n},drawnCard:null};const i=r.shift(),s=(n[t]||[]).slice();return s.push(i),n[t]=s,{state:{...e,deck:r,hands:n},drawnCard:i}}function $x(e,t,r){const n={...e.hands},i={...e.field},s=(n[t]||[]).slice(),o=s.findIndex(d=>d.id===r);if(o===-1)return{state:e,success:!1,error:"Card not in hand"};const[a]=s.splice(o,1);n[t]=s;const l=(i[t]||[]).slice();l.push(a),i[t]=l;let f=e.winner;return l.length>=e.cardsToWin&&(f=t),{state:{...e,hands:n,field:i,winner:f},success:!0}}function Fx(e,t,r){const n={...e.hands},i=e.discard.slice(),s=(n[t]||[]).slice(),o=s.findIndex(l=>l.id===r);if(o===-1)return{state:e,success:!1,error:"Card not in hand"};const[a]=s.splice(o,1);return n[t]=s,i.push(a),{state:{...e,hands:n,discard:i},success:!0}}function Ux(e){return e.winner!==null||e.deck.length===0}function Hx(e=20){const t=[];for(let r=1;r<=e;r++)t.push({id:`card-${r}`,name:`Card ${r}`});return t}const Wx={name:"simple-card-game",setup:()=>{const e=Hx(20);return Bx(e,2)},turn:{minMoves:1,maxMoves:3},moves:{drawCard:({G:e,ctx:t})=>{const r=Lx(e,t.currentPlayer);return r.drawnCard?r.state:q},playCard:({G:e,ctx:t},r)=>{const n=$x(e,t.currentPlayer,r);return n.success?n.state:q},discardCard:({G:e,ctx:t},r)=>{const n=Fx(e,t.currentPlayer,r);return n.success?n.state:q}},endIf:({G:e})=>{if(e.winner)return{winner:e.winner};if(Ux(e))return{draw:!0}}},qx={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13,A:14};var sr=(e=>(e[e.HIGH_CARD=0]="HIGH_CARD",e[e.PAIR=1]="PAIR",e[e.TWO_PAIR=2]="TWO_PAIR",e[e.THREE_OF_A_KIND=3]="THREE_OF_A_KIND",e[e.STRAIGHT=4]="STRAIGHT",e[e.FLUSH=5]="FLUSH",e[e.FULL_HOUSE=6]="FULL_HOUSE",e[e.FOUR_OF_A_KIND=7]="FOUR_OF_A_KIND",e[e.STRAIGHT_FLUSH=8]="STRAIGHT_FLUSH",e[e.ROYAL_FLUSH=9]="ROYAL_FLUSH",e))(sr||{});const Kx={heartbeatInterval:5e3,disconnectThreshold:15e3,actionTimeout:3e4,keyReleaseTimeout:1e4,reconstructionTimeout:5e3},cv={smallBlind:10,bigBlind:20,startingChips:1e3,minPlayers:2,maxPlayers:9,autoRevealHoleCards:!1,timeouts:Kx};function Vx(e,t){return`${e}-${t}`}function Jx(){const e=["clubs","diamonds","hearts","spades"],t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],r=[];for(const n of e)for(const i of t)r.push(Vx(n,i));return r}function fe(e,t=!1){return t&&e==="A"?1:qx[e]??0}function Dn(e,t=!1){return[...e].sort((r,n)=>fe(n.rank,t)-fe(r.rank,t))}function fo(e){const t=new Map;for(const r of e){const n=t.get(r.rank)??[];n.push(r),t.set(r.rank,n)}return t}function Td(e){const t=new Map;for(const r of e){const n=t.get(r.suit)??[];n.push(r),t.set(r.suit,n)}return t}function uv(e){if(e.length<5)return null;const t=[...new Set(e.map(r=>fe(r.rank)))].sort((r,n)=>n-r);for(let r=0;r<=t.length-5;r++){const n=t.slice(r,r+5);if(n[0]-n[4]===4)return n[0]}return t.includes(14)&&t.includes(2)&&t.includes(3)&&t.includes(4)&&t.includes(5)?5:null}function fv(e,t){const r=Dn(e);if(t===5){const i=[],s=[5,4,3,2,14];for(const o of s){const a=r.find(l=>fe(l.rank)===o&&!i.includes(l));a&&i.push(a)}return i}const n=[];for(let i=t;i>t-5;i--){const s=r.find(o=>fe(o.rank)===i&&!n.includes(o));s&&n.push(s)}return n}function Yx(e){const t=Td(e);for(const[r,n]of t)if(n.length>=5){const i=new Set(n.map(s=>fe(s.rank)));if(i.has(14)&&i.has(13)&&i.has(12)&&i.has(11)&&i.has(10)){const s=n.filter(o=>[14,13,12,11,10].includes(fe(o.rank)));return{rank:sr.ROYAL_FLUSH,values:[14,13,12,11,10],cards:Dn(s).slice(0,5),description:`Royal Flush (${r})`}}}return null}function Qx(e){const t=Td(e);for(const[r,n]of t)if(n.length>=5){const i=uv(n);if(i!==null){const s=fv(n,i);if(s.length===5)return{rank:sr.STRAIGHT_FLUSH,values:s.map(o=>fe(o.rank,i===5)),cards:s,description:`Straight Flush, ${i===14?"Ace":i}-high (${r})`}}}return null}function Xx(e){const t=fo(e);for(const[r,n]of t)if(n.length===4){const i=Dn(e.filter(a=>a.rank!==r))[0],s=[...n,i],o=fe(r);return{rank:sr.FOUR_OF_A_KIND,values:[o,o,o,o,fe(i.rank)],cards:s,description:`Four of a Kind, ${r}s`}}return null}function Zx(e){const t=fo(e),r=[],n=[];for(const[m,b]of t)b.length>=3&&r.push([m,b]),b.length>=2&&n.push([m,b]);if(r.length===0)return null;r.sort((m,b)=>fe(b[0])-fe(m[0]));const[i,s]=r[0],o=n.filter(([m])=>m!==i);if(o.length===0){if(r.length>=2){const[m,b]=r[1],k=[...s.slice(0,3),...b.slice(0,2)],M=fe(i),N=fe(m);return{rank:sr.FULL_HOUSE,values:[M,M,M,N,N],cards:k,description:`Full House, ${i}s full of ${m}s`}}return null}o.sort((m,b)=>fe(b[0])-fe(m[0]));const[a,l]=o[0],f=[...s.slice(0,3),...l.slice(0,2)],d=fe(i),y=fe(a);return{rank:sr.FULL_HOUSE,values:[d,d,d,y,y],cards:f,description:`Full House, ${i}s full of ${a}s`}}function Gx(e){const t=Td(e);for(const[r,n]of t)if(n.length>=5){const i=Dn(n).slice(0,5);return{rank:sr.FLUSH,values:i.map(s=>fe(s.rank)),cards:i,description:`Flush, ${i[0].rank}-high (${r})`}}return null}function e6(e){const t=uv(e);if(t===null)return null;const r=fv(e,t);return r.length!==5?null:{rank:sr.STRAIGHT,values:r.map(n=>fe(n.rank,t===5)),cards:r,description:`Straight, ${t===14?"Ace":t}-high`}}function t6(e){const t=fo(e),r=[];for(const[l,f]of t)f.length>=3&&r.push([l,f]);if(r.length===0)return null;r.sort((l,f)=>fe(f[0])-fe(l[0]));const[n,i]=r[0],s=Dn(e.filter(l=>l.rank!==n)).slice(0,2),o=[...i.slice(0,3),...s],a=fe(n);return{rank:sr.THREE_OF_A_KIND,values:[a,a,a,...s.map(l=>fe(l.rank))],cards:o,description:`Three of a Kind, ${n}s`}}function r6(e){const t=fo(e),r=[];for(const[y,m]of t)m.length>=2&&r.push([y,m]);if(r.length<2)return null;r.sort((y,m)=>fe(m[0])-fe(y[0]));const[n,i]=r[0],[s,o]=r[1],a=Dn(e.filter(y=>y.rank!==n&&y.rank!==s))[0],l=[...i.slice(0,2),...o.slice(0,2),a],f=fe(n),d=fe(s);return{rank:sr.TWO_PAIR,values:[f,f,d,d,fe(a.rank)],cards:l,description:`Two Pair, ${n}s and ${s}s`}}function n6(e){const t=fo(e),r=[];for(const[l,f]of t)f.length>=2&&r.push([l,f]);if(r.length===0)return null;r.sort((l,f)=>fe(f[0])-fe(l[0]));const[n,i]=r[0],s=Dn(e.filter(l=>l.rank!==n)).slice(0,3),o=[...i.slice(0,2),...s],a=fe(n);return{rank:sr.PAIR,values:[a,a,...s.map(l=>fe(l.rank))],cards:o,description:`Pair of ${n}s`}}function i6(e){const t=Dn(e).slice(0,5);return{rank:sr.HIGH_CARD,values:t.map(r=>fe(r.rank)),cards:t,description:`High Card, ${t[0].rank}`}}function s6(e){if(e.length<5)throw new Error("Need at least 5 cards to evaluate a hand");return Yx(e)??Qx(e)??Xx(e)??Zx(e)??Gx(e)??e6(e)??t6(e)??r6(e)??n6(e)??i6(e)}function o6(e,t){if(e.rank>t.rank)return 1;if(e.rank<t.rank)return-1;for(let r=0;r<Math.min(e.values.length,t.values.length);r++){if(e.values[r]>t.values[r])return 1;if(e.values[r]<t.values[r])return-1}return 0}function dv(e,t){const r=[...e,...t];return s6(r)}function a6(e){if(e.size===0)return[];if(e.size===1){const i=e.keys().next().value;return i?[i]:[]}const t=[...e.entries()];let r=[t[0][0]],n=t[0][1];for(let i=1;i<t.length;i++){const[s,o]=t[i],a=o6(o,n);a>0?(r=[s],n=o):a===0&&r.push(s)}return r}function ml(e,t){return{currentBet:0,minRaise:e.bigBlindAmount,activePlayer:t,actedPlayers:[],isComplete:!1,lastAggressor:null}}function ar(e,t){const{playerOrder:r,players:n}=e,i=r.indexOf(t);if(i===-1)return null;for(let s=1;s<=r.length;s++){const o=(i+s)%r.length,a=r[o],l=n[a];if(!l.folded&&!l.isAllIn)return a}return null}function Bn(e){const{players:t,bettingRound:r}=e,n=Object.entries(t).filter(([i,s])=>!s.folded&&!s.isAllIn);if(n.length<=1)return!0;for(const[i,s]of n)if(!s.hasActed||s.bet<r.currentBet)return!1;return!0}function hv(e){return Object.entries(e.players).filter(([t,r])=>!r.folded).map(([t])=>t)}function pv(e){return Object.values(e.players).filter(t=>!t.folded).length}function yv(e,t){const r=e.players[t];return r?r.folded?{valid:!1,error:"Already folded"}:r.isAllIn?{valid:!1,error:"Cannot fold when all-in"}:(r.folded=!0,r.hasActed=!0,{valid:!0}):{valid:!1,error:"Player not found"}}function mv(e,t){const r=e.players[t];return r?r.folded?{valid:!1,error:"Already folded"}:r.isAllIn?{valid:!1,error:"Cannot check when all-in"}:r.bet<e.bettingRound.currentBet?{valid:!1,error:"Cannot check, must call or fold"}:(r.hasActed=!0,{valid:!0}):{valid:!1,error:"Player not found"}}function vv(e,t){const r=e.players[t];if(!r)return{valid:!1,error:"Player not found"};if(r.folded)return{valid:!1,error:"Already folded"};if(r.isAllIn)return{valid:!1,error:"Already all-in"};const n=e.bettingRound.currentBet-r.bet;if(n<=0)return{valid:!1,error:"Nothing to call"};const i=Math.min(n,r.chips);return r.chips-=i,r.bet+=i,e.pot+=i,r.hasActed=!0,r.chips===0&&(r.isAllIn=!0),{valid:!0,amount:i}}function gv(e,t,r){const n=e.players[t];if(!n)return{valid:!1,error:"Player not found"};if(n.folded)return{valid:!1,error:"Already folded"};if(n.isAllIn)return{valid:!1,error:"Already all-in"};if(e.bettingRound.currentBet>0)return{valid:!1,error:"Cannot bet, must raise"};if(r<e.bigBlindAmount&&r<n.chips)return{valid:!1,error:`Minimum bet is ${e.bigBlindAmount}`};if(r>n.chips)return{valid:!1,error:"Insufficient chips"};n.chips-=r,n.bet=r,e.pot+=r,e.bettingRound.currentBet=r,e.bettingRound.minRaise=r,e.bettingRound.lastAggressor=t,n.hasActed=!0;for(const[i,s]of Object.entries(e.players))i!==t&&!s.folded&&!s.isAllIn&&(s.hasActed=!1);return n.chips===0&&(n.isAllIn=!0),{valid:!0}}function bv(e,t,r){const n=e.players[t];if(!n)return{valid:!1,error:"Player not found"};if(n.folded)return{valid:!1,error:"Already folded"};if(n.isAllIn)return{valid:!1,error:"Already all-in"};const i=r-e.bettingRound.currentBet,s=r-n.bet;if(i<e.bettingRound.minRaise&&s<n.chips)return{valid:!1,error:`Minimum raise is ${e.bettingRound.minRaise}`};if(s>n.chips)return{valid:!1,error:"Insufficient chips"};n.chips-=s,e.pot+=s,e.bettingRound.minRaise=i,e.bettingRound.currentBet=r,e.bettingRound.lastAggressor=t,n.bet=r,n.hasActed=!0;for(const[o,a]of Object.entries(e.players))o!==t&&!a.folded&&!a.isAllIn&&(a.hasActed=!1);return n.chips===0&&(n.isAllIn=!0),{valid:!0}}function xv(e,t){const r=e.players[t];if(!r)return{valid:!1,error:"Player not found",isRaise:!1};if(r.folded)return{valid:!1,error:"Already folded",isRaise:!1};if(r.isAllIn)return{valid:!1,error:"Already all-in",isRaise:!1};const n=r.chips,i=r.bet+n,s=i>e.bettingRound.currentBet;if(r.chips=0,e.pot+=n,r.bet=i,r.isAllIn=!0,r.hasActed=!0,s){const o=i-e.bettingRound.currentBet;if(o>=e.bettingRound.minRaise){e.bettingRound.minRaise=o,e.bettingRound.lastAggressor=t;for(const[a,l]of Object.entries(e.players))a!==t&&!l.folded&&!l.isAllIn&&(l.hasActed=!1)}e.bettingRound.currentBet=i}return{valid:!0,isRaise:s}}function l6(e){for(const t of Object.values(e.players))t.bet=0,t.hasActed=!1}function c6(e){for(const t of Object.values(e.players))t.bet=0}function Dd(e){const r=(e.playerOrder.indexOf(e.dealer)+1)%e.playerOrder.length;return e.playerOrder[r]}function Bd(e){const r=(e.playerOrder.indexOf(e.dealer)+2)%e.playerOrder.length;return e.playerOrder[r]}function wv(e){const r=(e.playerOrder.indexOf(e.dealer)+3)%e.playerOrder.length;return e.playerOrder[r]}function Sv(e){const t=e.playerOrder.indexOf(e.dealer);for(let r=1;r<=e.playerOrder.length;r++){const n=(t+r)%e.playerOrder.length,i=e.playerOrder[n];if(!e.players[i].folded&&!e.players[i].isAllIn)return i}return null}function kv(e){const t=e.players[e.smallBlind],r=e.players[e.bigBlind],n=Math.min(e.smallBlindAmount,t.chips);t.chips-=n,t.bet=n,e.pot+=n,t.chips===0&&(t.isAllIn=!0);const i=Math.min(e.bigBlindAmount,r.chips);r.chips-=i,r.bet=i,e.pot+=i,r.chips===0&&(r.isAllIn=!0),e.bettingRound.currentBet=i,e.bettingRound.minRaise=e.bigBlindAmount}function u6(e){const r=(e.playerOrder.indexOf(e.dealer)+1)%e.playerOrder.length;e.dealer=e.playerOrder[r],e.smallBlind=Dd(e),e.bigBlind=Bd(e)}const f6=["hearts","diamonds","clubs","spades"],d6=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];function _v(){const e=[];for(const t of f6)for(const r of d6)e.push({id:`${t}-${r}`,name:`${r} of ${t}`,suit:t,rank:r});return e}function Pv(e){const t=e.slice();for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}function h6(e){const t={...cv,...e.options},r=Pv(_v()),n={},i={deck:{shared:r},hand:{},community:{shared:[]},discard:{shared:[]},mucked:{shared:[]}};for(const l of e.playerIDs)n[l]={hand:[],chips:t.startingChips,bet:0,folded:!1,hasActed:!1,isAllIn:!1},i.hand[l]=[];const s=[...e.playerIDs],o=s[0],a={deck:r,community:[],pot:0,sidePots:[],players:n,dealer:o,smallBlind:s.length>2?s[1]:s[0],bigBlind:s.length>2?s[2]:s[1],phase:"waiting",bettingRound:{currentBet:0,minRaise:t.bigBlind,activePlayer:"",actedPlayers:[],isComplete:!1,lastAggressor:null},smallBlindAmount:t.smallBlind,bigBlindAmount:t.bigBlind,playerOrder:s,winners:[],zones:i};return a.smallBlind=Dd(a),a.bigBlind=Bd(a),a}function vl(e){e.zones.deck.shared=e.deck,e.zones.community.shared=e.community;for(const t of Object.keys(e.players))e.zones.hand[t]=e.players[t].hand}function p6(e,t,r){const n=e.players[t];for(let i=0;i<r;i++){const s=e.deck.pop();s&&n.hand.push(s)}vl(e)}function Qp(e,t){for(let r=0;r<t;r++){const n=e.deck.pop();n&&e.community.push(n)}vl(e)}function Xp(e){const t=e.deck.pop();t&&e.zones.discard.shared.push(t)}function y6(e){e.deck=Pv(_v()),e.community=[],e.pot=0,e.sidePots=[],e.winners=[];for(const r of Object.values(e.players))r.hand=[],r.bet=0,r.folded=!1,r.hasActed=!1,r.isAllIn=!1;e.zones.discard.shared=[],e.zones.mucked.shared=[],vl(e),kv(e);for(const r of e.playerOrder)p6(e,r,2);e.phase="preflop";const t=wv(e);e.bettingRound=ml(e,t),e.bettingRound.currentBet=e.bigBlindAmount}function ho(e){if(c6(e),l6(e),pv(e)===1){e.phase="showdown";return}const r={waiting:"preflop",preflop:"flop",flop:"turn",turn:"river",river:"showdown",showdown:"gameOver",gameOver:"waiting"}[e.phase];switch(r){case"flop":Xp(e),Qp(e,3);break;case"turn":case"river":Xp(e),Qp(e,1);break;case"showdown":m6(e);return}if(e.phase=r,["flop","turn","river"].includes(r)){const n=Sv(e);n?e.bettingRound=ml(e,n):ho(e)}}function m6(e){e.phase="showdown";const t=hv(e);if(t.length===1){const o=t[0];e.players[o].chips+=e.pot,e.winners=[o],e.phase="gameOver";return}const r=new Map(t.map(o=>{const a=e.players[o],l=dv(a.hand,e.community);return[o,l]})),n=a6(r);e.winners=n;const i=Math.floor(e.pot/n.length),s=e.pot%n.length;for(let o=0;o<n.length;o++){const a=n[o];e.players[a].chips+=i+(o===0?s:0)}e.pot=0,e.phase="gameOver"}function v6(e,t,r){const n=r??t.currentPlayer;if(e.bettingRound.activePlayer!==n||!yv(e,n).valid)return q;const s=ar(e,n);return s&&!Bn(e)?e.bettingRound.activePlayer=s:ho(e),vl(e),e}function g6(e,t,r){const n=r??t.currentPlayer;if(e.bettingRound.activePlayer!==n||!mv(e,n).valid)return q;const s=ar(e,n);return s&&!Bn(e)?e.bettingRound.activePlayer=s:ho(e),e}function b6(e,t,r){const n=r??t.currentPlayer;if(e.bettingRound.activePlayer!==n||!vv(e,n).valid)return q;const s=ar(e,n);return s&&!Bn(e)?e.bettingRound.activePlayer=s:ho(e),e}function x6(e,t,r,n){const i=n??t.currentPlayer;if(e.bettingRound.activePlayer!==i||!gv(e,i,r).valid)return q;const o=ar(e,i);return o&&(e.bettingRound.activePlayer=o),e}function w6(e,t,r,n){const i=n??t.currentPlayer;if(e.bettingRound.activePlayer!==i||!bv(e,i,r).valid)return q;const o=ar(e,i);return o&&(e.bettingRound.activePlayer=o),e}function S6(e,t,r){const n=r??t.currentPlayer;if(e.bettingRound.activePlayer!==n||!xv(e,n).valid)return q;const s=ar(e,n);return s&&!Bn(e)?e.bettingRound.activePlayer=s:ho(e),e}function k6(e,t){return e.phase!=="waiting"&&e.phase!=="gameOver"?q:(e.phase==="gameOver"&&u6(e),y6(e),e)}const _6={name:"poker",setup:e=>h6({numPlayers:e.numPlayers??2,playerIDs:e.playOrder??["0","1"]}),turn:{order:{first:()=>0,next:({G:e})=>{const t=e.playerOrder.indexOf(e.bettingRound.activePlayer);return t>=0?t:0}}},phases:{play:{start:!0,moves:{fold:{move:({G:e,ctx:t},r)=>v6(e,t,r),client:!1},check:{move:({G:e,ctx:t},r)=>g6(e,t,r),client:!1},call:{move:({G:e,ctx:t},r)=>b6(e,t,r),client:!1},bet:{move:({G:e,ctx:t},r,n)=>x6(e,t,r,n),client:!1},raise:{move:({G:e,ctx:t},r,n)=>w6(e,t,r,n),client:!1},allIn:{move:({G:e,ctx:t},r)=>S6(e,t,r),client:!1},newHand:{move:({G:e,ctx:t})=>k6(e),client:!1}}}},endIf:({G:e})=>{const t=Object.entries(e.players).filter(([r,n])=>n.chips>0);if(t.length===1)return{winner:t[0][0]}}},jc=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");class _s extends Error{constructor(t){super(t),this.name="ShareValidationError"}}function P6(e){const t=Math.ceil(e.toString(16).length/2),r=new Uint8Array(t);crypto.getRandomValues(r);let n=BigInt(0);for(const i of r)n=n<<BigInt(8)|BigInt(i);return n%e}function C6(e,t,r){return(e%r+t%r+r)%r}function Zp(e,t,r){return(e%r*(t%r)+r)%r}function M6(e,t,r){let n=BigInt(0),i=BigInt(1);for(const s of e)n=C6(n,Zp(s,i,r),r),i=Zp(i,t,r);return n}function E6(e){const t=e.startsWith("0x")?e.slice(2):e;if(!/^[0-9a-fA-F]+$/.test(t))throw new _s(`Invalid hex string: ${e}`);return BigInt("0x"+t)}function A6(e,t=32){return e.toString(16).padStart(t*2,"0")}function I6(e,t){const{threshold:r,totalShares:n}=t;if(r<2)throw new _s("Threshold must be at least 2");if(n<r)throw new _s("Total shares must be >= threshold");if(n>255)throw new _s("Maximum 255 shares supported");const i=E6(e);if(i>=jc)throw new _s("Secret too large for prime field");const s=[i];for(let a=1;a<r;a++)s.push(P6(jc));const o=[];for(let a=1;a<=n;a++){const l=BigInt(a),f=M6(s,l,jc);o.push({index:a,value:A6(f)})}return{threshold:r,totalShares:n,shares:o}}function R6(e,t,r,n){const i=r.length+1,s=n??Math.max(2,r.length),o=I6(e,{threshold:s,totalShares:i});return r.map((a,l)=>({fromPlayer:t,forPlayer:a,share:o.shares[l+1]}))}var Cv={};const O6="6.6.1",j6={version:O6};var Xt={},zd={exports:{}};const N6={},T6=Object.freeze(Object.defineProperty({__proto__:null,default:N6},Symbol.toStringTag,{value:"Module"})),Mv=Pg(T6);zd.exports;(function(e){(function(t,r){function n(A,c){if(!A)throw new Error(c||"Assertion failed")}function i(A,c){A.super_=c;var h=function(){};h.prototype=c.prototype,A.prototype=new h,A.prototype.constructor=A}function s(A,c,h){if(s.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((c==="le"||c==="be")&&(h=c,c=10),this._init(A||0,c||10,h||"be"))}typeof t=="object"?t.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Mv.Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,h){return c.cmp(h)>0?c:h},s.min=function(c,h){return c.cmp(h)<0?c:h},s.prototype._init=function(c,h,g){if(typeof c=="number")return this._initNumber(c,h,g);if(typeof c=="object")return this._initArray(c,h,g);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var w=0;c[0]==="-"&&(w++,this.negative=1),w<c.length&&(h===16?this._parseHex(c,w,g):(this._parseBase(c,h,w),g==="le"&&this._initArray(this.toArray(),h,g)))},s.prototype._initNumber=function(c,h,g){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),h,g)},s.prototype._initArray=function(c,h,g){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,R,E=0;if(g==="be")for(w=c.length-1,C=0;w>=0;w-=3)R=c[w]|c[w-1]<<8|c[w-2]<<16,this.words[C]|=R<<E&67108863,this.words[C+1]=R>>>26-E&67108863,E+=24,E>=26&&(E-=26,C++);else if(g==="le")for(w=0,C=0;w<c.length;w+=3)R=c[w]|c[w+1]<<8|c[w+2]<<16,this.words[C]|=R<<E&67108863,this.words[C+1]=R>>>26-E&67108863,E+=24,E>=26&&(E-=26,C++);return this.strip()};function a(A,c){var h=A.charCodeAt(c);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function l(A,c,h){var g=a(A,h);return h-1>=c&&(g|=a(A,h-1)<<4),g}s.prototype._parseHex=function(c,h,g){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C=0,R=0,E;if(g==="be")for(w=c.length-1;w>=h;w-=2)E=l(c,h,w)<<C,this.words[R]|=E&67108863,C>=18?(C-=18,R+=1,this.words[R]|=E>>>26):C+=8;else{var x=c.length-h;for(w=x%2===0?h+1:h;w<c.length;w+=2)E=l(c,h,w)<<C,this.words[R]|=E&67108863,C>=18?(C-=18,R+=1,this.words[R]|=E>>>26):C+=8}this.strip()};function f(A,c,h,g){for(var w=0,C=Math.min(A.length,h),R=c;R<C;R++){var E=A.charCodeAt(R)-48;w*=g,E>=49?w+=E-49+10:E>=17?w+=E-17+10:w+=E}return w}s.prototype._parseBase=function(c,h,g){this.words=[0],this.length=1;for(var w=0,C=1;C<=67108863;C*=h)w++;w--,C=C/h|0;for(var R=c.length-g,E=R%w,x=Math.min(R,R-E)+g,u=0,_=g;_<x;_+=w)u=f(c,_,_+w,h),this.imuln(C),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(E!==0){var $=1;for(u=f(c,_,c.length,h),_=0;_<E;_++)$*=h;this.imuln($),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,h){c=c||10,h=h|0||1;var g;if(c===16||c==="hex"){g="";for(var w=0,C=0,R=0;R<this.length;R++){var E=this.words[R],x=((E<<w|C)&16777215).toString(16);C=E>>>24-w&16777215,w+=2,w>=26&&(w-=26,R--),C!==0||R!==this.length-1?g=d[6-x.length]+x+g:g=x+g}for(C!==0&&(g=C.toString(16)+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(c===(c|0)&&c>=2&&c<=36){var u=y[c],_=m[c];g="";var $=this.clone();for($.negative=0;!$.isZero();){var J=$.modn(_).toString(c);$=$.idivn(_),$.isZero()?g=J+g:g=d[u-J.length]+J+g}for(this.isZero()&&(g="0"+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(c,h){return n(typeof o<"u"),this.toArrayLike(o,c,h)},s.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)},s.prototype.toArrayLike=function(c,h,g){var w=this.byteLength(),C=g||Math.max(1,w);n(w<=C,"byte array longer than desired length"),n(C>0,"Requested array length <= 0"),this.strip();var R=h==="le",E=new c(C),x,u,_=this.clone();if(R){for(u=0;!_.isZero();u++)x=_.andln(255),_.iushrn(8),E[u]=x;for(;u<C;u++)E[u]=0}else{for(u=0;u<C-w;u++)E[u]=0;for(u=0;!_.isZero();u++)x=_.andln(255),_.iushrn(8),E[C-u-1]=x}return E},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var h=c,g=0;return h>=4096&&(g+=13,h>>>=13),h>=64&&(g+=7,h>>>=7),h>=8&&(g+=4,h>>>=4),h>=2&&(g+=2,h>>>=2),g+h},s.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,g=0;return h&8191||(g+=13,h>>>=13),h&127||(g+=7,h>>>=7),h&15||(g+=4,h>>>=4),h&3||(g+=2,h>>>=2),h&1||g++,g},s.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function b(A){for(var c=new Array(A.bitLength()),h=0;h<c.length;h++){var g=h/26|0,w=h%26;c[h]=(A.words[g]&1<<w)>>>w}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var g=this._zeroBits(this.words[h]);if(c+=g,g!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this.strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var g=0;g<h.length;g++)this.words[g]=this.words[g]&c.words[g];return this.length=h.length,this.strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var h,g;this.length>c.length?(h=this,g=c):(h=c,g=this);for(var w=0;w<g.length;w++)this.words[w]=h.words[w]^g.words[w];if(this!==h)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=h.length,this.strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,g=c%26;this._expand(h),g>0&&h--;for(var w=0;w<h;w++)this.words[w]=~this.words[w]&67108863;return g>0&&(this.words[w]=~this.words[w]&67108863>>26-g),this.strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,h){n(typeof c=="number"&&c>=0);var g=c/26|0,w=c%26;return this._expand(g+1),h?this.words[g]=this.words[g]|1<<w:this.words[g]=this.words[g]&~(1<<w),this.strip()},s.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var g,w;this.length>c.length?(g=this,w=c):(g=c,w=this);for(var C=0,R=0;R<w.length;R++)h=(g.words[R]|0)+(w.words[R]|0)+C,this.words[R]=h&67108863,C=h>>>26;for(;C!==0&&R<g.length;R++)h=(g.words[R]|0)+C,this.words[R]=h&67108863,C=h>>>26;if(this.length=g.length,C!==0)this.words[this.length]=C,this.length++;else if(g!==this)for(;R<g.length;R++)this.words[R]=g.words[R];return this},s.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var g=this.cmp(c);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,C;g>0?(w=this,C=c):(w=c,C=this);for(var R=0,E=0;E<C.length;E++)h=(w.words[E]|0)-(C.words[E]|0)+R,R=h>>26,this.words[E]=h&67108863;for(;R!==0&&E<w.length;E++)h=(w.words[E]|0)+R,R=h>>26,this.words[E]=h&67108863;if(R===0&&E<w.length&&w!==this)for(;E<w.length;E++)this.words[E]=w.words[E];return this.length=Math.max(this.length,E),w!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function k(A,c,h){h.negative=c.negative^A.negative;var g=A.length+c.length|0;h.length=g,g=g-1|0;var w=A.words[0]|0,C=c.words[0]|0,R=w*C,E=R&67108863,x=R/67108864|0;h.words[0]=E;for(var u=1;u<g;u++){for(var _=x>>>26,$=x&67108863,J=Math.min(u,c.length-1),Y=Math.max(0,u-A.length+1);Y<=J;Y++){var B=u-Y|0;w=A.words[B]|0,C=c.words[Y]|0,R=w*C+$,_+=R/67108864|0,$=R&67108863}h.words[u]=$|0,x=_|0}return x!==0?h.words[u]=x|0:h.length--,h.strip()}var M=function(c,h,g){var w=c.words,C=h.words,R=g.words,E=0,x,u,_,$=w[0]|0,J=$&8191,Y=$>>>13,B=w[1]|0,W=B&8191,X=B>>>13,ae=w[2]|0,I=ae&8191,O=ae>>>13,z=w[3]|0,Q=z&8191,K=z>>>13,te=w[4]|0,ne=te&8191,re=te>>>13,Pt=w[5]|0,ie=Pt&8191,se=Pt>>>13,st=w[6]|0,he=st&8191,me=st>>>13,ur=w[7]|0,Se=ur&8191,Pe=ur>>>13,an=w[8]|0,ke=an&8191,ve=an>>>13,go=w[9]|0,Ae=go&8191,Ne=go>>>13,rh=C[0]|0,Te=rh&8191,De=rh>>>13,nh=C[1]|0,Be=nh&8191,ze=nh>>>13,ih=C[2]|0,Le=ih&8191,$e=ih>>>13,sh=C[3]|0,Fe=sh&8191,Ue=sh>>>13,oh=C[4]|0,He=oh&8191,We=oh>>>13,ah=C[5]|0,qe=ah&8191,Ke=ah>>>13,lh=C[6]|0,Ve=lh&8191,Je=lh>>>13,ch=C[7]|0,Ye=ch&8191,Qe=ch>>>13,uh=C[8]|0,Xe=uh&8191,Ze=uh>>>13,fh=C[9]|0,Ge=fh&8191,et=fh>>>13;g.negative=c.negative^h.negative,g.length=19,x=Math.imul(J,Te),u=Math.imul(J,De),u=u+Math.imul(Y,Te)|0,_=Math.imul(Y,De);var Rl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Rl>>>26)|0,Rl&=67108863,x=Math.imul(W,Te),u=Math.imul(W,De),u=u+Math.imul(X,Te)|0,_=Math.imul(X,De),x=x+Math.imul(J,Be)|0,u=u+Math.imul(J,ze)|0,u=u+Math.imul(Y,Be)|0,_=_+Math.imul(Y,ze)|0;var Ol=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Ol>>>26)|0,Ol&=67108863,x=Math.imul(I,Te),u=Math.imul(I,De),u=u+Math.imul(O,Te)|0,_=Math.imul(O,De),x=x+Math.imul(W,Be)|0,u=u+Math.imul(W,ze)|0,u=u+Math.imul(X,Be)|0,_=_+Math.imul(X,ze)|0,x=x+Math.imul(J,Le)|0,u=u+Math.imul(J,$e)|0,u=u+Math.imul(Y,Le)|0,_=_+Math.imul(Y,$e)|0;var jl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(jl>>>26)|0,jl&=67108863,x=Math.imul(Q,Te),u=Math.imul(Q,De),u=u+Math.imul(K,Te)|0,_=Math.imul(K,De),x=x+Math.imul(I,Be)|0,u=u+Math.imul(I,ze)|0,u=u+Math.imul(O,Be)|0,_=_+Math.imul(O,ze)|0,x=x+Math.imul(W,Le)|0,u=u+Math.imul(W,$e)|0,u=u+Math.imul(X,Le)|0,_=_+Math.imul(X,$e)|0,x=x+Math.imul(J,Fe)|0,u=u+Math.imul(J,Ue)|0,u=u+Math.imul(Y,Fe)|0,_=_+Math.imul(Y,Ue)|0;var Nl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Nl>>>26)|0,Nl&=67108863,x=Math.imul(ne,Te),u=Math.imul(ne,De),u=u+Math.imul(re,Te)|0,_=Math.imul(re,De),x=x+Math.imul(Q,Be)|0,u=u+Math.imul(Q,ze)|0,u=u+Math.imul(K,Be)|0,_=_+Math.imul(K,ze)|0,x=x+Math.imul(I,Le)|0,u=u+Math.imul(I,$e)|0,u=u+Math.imul(O,Le)|0,_=_+Math.imul(O,$e)|0,x=x+Math.imul(W,Fe)|0,u=u+Math.imul(W,Ue)|0,u=u+Math.imul(X,Fe)|0,_=_+Math.imul(X,Ue)|0,x=x+Math.imul(J,He)|0,u=u+Math.imul(J,We)|0,u=u+Math.imul(Y,He)|0,_=_+Math.imul(Y,We)|0;var Tl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Tl>>>26)|0,Tl&=67108863,x=Math.imul(ie,Te),u=Math.imul(ie,De),u=u+Math.imul(se,Te)|0,_=Math.imul(se,De),x=x+Math.imul(ne,Be)|0,u=u+Math.imul(ne,ze)|0,u=u+Math.imul(re,Be)|0,_=_+Math.imul(re,ze)|0,x=x+Math.imul(Q,Le)|0,u=u+Math.imul(Q,$e)|0,u=u+Math.imul(K,Le)|0,_=_+Math.imul(K,$e)|0,x=x+Math.imul(I,Fe)|0,u=u+Math.imul(I,Ue)|0,u=u+Math.imul(O,Fe)|0,_=_+Math.imul(O,Ue)|0,x=x+Math.imul(W,He)|0,u=u+Math.imul(W,We)|0,u=u+Math.imul(X,He)|0,_=_+Math.imul(X,We)|0,x=x+Math.imul(J,qe)|0,u=u+Math.imul(J,Ke)|0,u=u+Math.imul(Y,qe)|0,_=_+Math.imul(Y,Ke)|0;var Dl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Dl>>>26)|0,Dl&=67108863,x=Math.imul(he,Te),u=Math.imul(he,De),u=u+Math.imul(me,Te)|0,_=Math.imul(me,De),x=x+Math.imul(ie,Be)|0,u=u+Math.imul(ie,ze)|0,u=u+Math.imul(se,Be)|0,_=_+Math.imul(se,ze)|0,x=x+Math.imul(ne,Le)|0,u=u+Math.imul(ne,$e)|0,u=u+Math.imul(re,Le)|0,_=_+Math.imul(re,$e)|0,x=x+Math.imul(Q,Fe)|0,u=u+Math.imul(Q,Ue)|0,u=u+Math.imul(K,Fe)|0,_=_+Math.imul(K,Ue)|0,x=x+Math.imul(I,He)|0,u=u+Math.imul(I,We)|0,u=u+Math.imul(O,He)|0,_=_+Math.imul(O,We)|0,x=x+Math.imul(W,qe)|0,u=u+Math.imul(W,Ke)|0,u=u+Math.imul(X,qe)|0,_=_+Math.imul(X,Ke)|0,x=x+Math.imul(J,Ve)|0,u=u+Math.imul(J,Je)|0,u=u+Math.imul(Y,Ve)|0,_=_+Math.imul(Y,Je)|0;var Bl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Bl>>>26)|0,Bl&=67108863,x=Math.imul(Se,Te),u=Math.imul(Se,De),u=u+Math.imul(Pe,Te)|0,_=Math.imul(Pe,De),x=x+Math.imul(he,Be)|0,u=u+Math.imul(he,ze)|0,u=u+Math.imul(me,Be)|0,_=_+Math.imul(me,ze)|0,x=x+Math.imul(ie,Le)|0,u=u+Math.imul(ie,$e)|0,u=u+Math.imul(se,Le)|0,_=_+Math.imul(se,$e)|0,x=x+Math.imul(ne,Fe)|0,u=u+Math.imul(ne,Ue)|0,u=u+Math.imul(re,Fe)|0,_=_+Math.imul(re,Ue)|0,x=x+Math.imul(Q,He)|0,u=u+Math.imul(Q,We)|0,u=u+Math.imul(K,He)|0,_=_+Math.imul(K,We)|0,x=x+Math.imul(I,qe)|0,u=u+Math.imul(I,Ke)|0,u=u+Math.imul(O,qe)|0,_=_+Math.imul(O,Ke)|0,x=x+Math.imul(W,Ve)|0,u=u+Math.imul(W,Je)|0,u=u+Math.imul(X,Ve)|0,_=_+Math.imul(X,Je)|0,x=x+Math.imul(J,Ye)|0,u=u+Math.imul(J,Qe)|0,u=u+Math.imul(Y,Ye)|0,_=_+Math.imul(Y,Qe)|0;var zl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(zl>>>26)|0,zl&=67108863,x=Math.imul(ke,Te),u=Math.imul(ke,De),u=u+Math.imul(ve,Te)|0,_=Math.imul(ve,De),x=x+Math.imul(Se,Be)|0,u=u+Math.imul(Se,ze)|0,u=u+Math.imul(Pe,Be)|0,_=_+Math.imul(Pe,ze)|0,x=x+Math.imul(he,Le)|0,u=u+Math.imul(he,$e)|0,u=u+Math.imul(me,Le)|0,_=_+Math.imul(me,$e)|0,x=x+Math.imul(ie,Fe)|0,u=u+Math.imul(ie,Ue)|0,u=u+Math.imul(se,Fe)|0,_=_+Math.imul(se,Ue)|0,x=x+Math.imul(ne,He)|0,u=u+Math.imul(ne,We)|0,u=u+Math.imul(re,He)|0,_=_+Math.imul(re,We)|0,x=x+Math.imul(Q,qe)|0,u=u+Math.imul(Q,Ke)|0,u=u+Math.imul(K,qe)|0,_=_+Math.imul(K,Ke)|0,x=x+Math.imul(I,Ve)|0,u=u+Math.imul(I,Je)|0,u=u+Math.imul(O,Ve)|0,_=_+Math.imul(O,Je)|0,x=x+Math.imul(W,Ye)|0,u=u+Math.imul(W,Qe)|0,u=u+Math.imul(X,Ye)|0,_=_+Math.imul(X,Qe)|0,x=x+Math.imul(J,Xe)|0,u=u+Math.imul(J,Ze)|0,u=u+Math.imul(Y,Xe)|0,_=_+Math.imul(Y,Ze)|0;var Ll=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Ll>>>26)|0,Ll&=67108863,x=Math.imul(Ae,Te),u=Math.imul(Ae,De),u=u+Math.imul(Ne,Te)|0,_=Math.imul(Ne,De),x=x+Math.imul(ke,Be)|0,u=u+Math.imul(ke,ze)|0,u=u+Math.imul(ve,Be)|0,_=_+Math.imul(ve,ze)|0,x=x+Math.imul(Se,Le)|0,u=u+Math.imul(Se,$e)|0,u=u+Math.imul(Pe,Le)|0,_=_+Math.imul(Pe,$e)|0,x=x+Math.imul(he,Fe)|0,u=u+Math.imul(he,Ue)|0,u=u+Math.imul(me,Fe)|0,_=_+Math.imul(me,Ue)|0,x=x+Math.imul(ie,He)|0,u=u+Math.imul(ie,We)|0,u=u+Math.imul(se,He)|0,_=_+Math.imul(se,We)|0,x=x+Math.imul(ne,qe)|0,u=u+Math.imul(ne,Ke)|0,u=u+Math.imul(re,qe)|0,_=_+Math.imul(re,Ke)|0,x=x+Math.imul(Q,Ve)|0,u=u+Math.imul(Q,Je)|0,u=u+Math.imul(K,Ve)|0,_=_+Math.imul(K,Je)|0,x=x+Math.imul(I,Ye)|0,u=u+Math.imul(I,Qe)|0,u=u+Math.imul(O,Ye)|0,_=_+Math.imul(O,Qe)|0,x=x+Math.imul(W,Xe)|0,u=u+Math.imul(W,Ze)|0,u=u+Math.imul(X,Xe)|0,_=_+Math.imul(X,Ze)|0,x=x+Math.imul(J,Ge)|0,u=u+Math.imul(J,et)|0,u=u+Math.imul(Y,Ge)|0,_=_+Math.imul(Y,et)|0;var $l=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+($l>>>26)|0,$l&=67108863,x=Math.imul(Ae,Be),u=Math.imul(Ae,ze),u=u+Math.imul(Ne,Be)|0,_=Math.imul(Ne,ze),x=x+Math.imul(ke,Le)|0,u=u+Math.imul(ke,$e)|0,u=u+Math.imul(ve,Le)|0,_=_+Math.imul(ve,$e)|0,x=x+Math.imul(Se,Fe)|0,u=u+Math.imul(Se,Ue)|0,u=u+Math.imul(Pe,Fe)|0,_=_+Math.imul(Pe,Ue)|0,x=x+Math.imul(he,He)|0,u=u+Math.imul(he,We)|0,u=u+Math.imul(me,He)|0,_=_+Math.imul(me,We)|0,x=x+Math.imul(ie,qe)|0,u=u+Math.imul(ie,Ke)|0,u=u+Math.imul(se,qe)|0,_=_+Math.imul(se,Ke)|0,x=x+Math.imul(ne,Ve)|0,u=u+Math.imul(ne,Je)|0,u=u+Math.imul(re,Ve)|0,_=_+Math.imul(re,Je)|0,x=x+Math.imul(Q,Ye)|0,u=u+Math.imul(Q,Qe)|0,u=u+Math.imul(K,Ye)|0,_=_+Math.imul(K,Qe)|0,x=x+Math.imul(I,Xe)|0,u=u+Math.imul(I,Ze)|0,u=u+Math.imul(O,Xe)|0,_=_+Math.imul(O,Ze)|0,x=x+Math.imul(W,Ge)|0,u=u+Math.imul(W,et)|0,u=u+Math.imul(X,Ge)|0,_=_+Math.imul(X,et)|0;var Fl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Fl>>>26)|0,Fl&=67108863,x=Math.imul(Ae,Le),u=Math.imul(Ae,$e),u=u+Math.imul(Ne,Le)|0,_=Math.imul(Ne,$e),x=x+Math.imul(ke,Fe)|0,u=u+Math.imul(ke,Ue)|0,u=u+Math.imul(ve,Fe)|0,_=_+Math.imul(ve,Ue)|0,x=x+Math.imul(Se,He)|0,u=u+Math.imul(Se,We)|0,u=u+Math.imul(Pe,He)|0,_=_+Math.imul(Pe,We)|0,x=x+Math.imul(he,qe)|0,u=u+Math.imul(he,Ke)|0,u=u+Math.imul(me,qe)|0,_=_+Math.imul(me,Ke)|0,x=x+Math.imul(ie,Ve)|0,u=u+Math.imul(ie,Je)|0,u=u+Math.imul(se,Ve)|0,_=_+Math.imul(se,Je)|0,x=x+Math.imul(ne,Ye)|0,u=u+Math.imul(ne,Qe)|0,u=u+Math.imul(re,Ye)|0,_=_+Math.imul(re,Qe)|0,x=x+Math.imul(Q,Xe)|0,u=u+Math.imul(Q,Ze)|0,u=u+Math.imul(K,Xe)|0,_=_+Math.imul(K,Ze)|0,x=x+Math.imul(I,Ge)|0,u=u+Math.imul(I,et)|0,u=u+Math.imul(O,Ge)|0,_=_+Math.imul(O,et)|0;var Ul=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Ul>>>26)|0,Ul&=67108863,x=Math.imul(Ae,Fe),u=Math.imul(Ae,Ue),u=u+Math.imul(Ne,Fe)|0,_=Math.imul(Ne,Ue),x=x+Math.imul(ke,He)|0,u=u+Math.imul(ke,We)|0,u=u+Math.imul(ve,He)|0,_=_+Math.imul(ve,We)|0,x=x+Math.imul(Se,qe)|0,u=u+Math.imul(Se,Ke)|0,u=u+Math.imul(Pe,qe)|0,_=_+Math.imul(Pe,Ke)|0,x=x+Math.imul(he,Ve)|0,u=u+Math.imul(he,Je)|0,u=u+Math.imul(me,Ve)|0,_=_+Math.imul(me,Je)|0,x=x+Math.imul(ie,Ye)|0,u=u+Math.imul(ie,Qe)|0,u=u+Math.imul(se,Ye)|0,_=_+Math.imul(se,Qe)|0,x=x+Math.imul(ne,Xe)|0,u=u+Math.imul(ne,Ze)|0,u=u+Math.imul(re,Xe)|0,_=_+Math.imul(re,Ze)|0,x=x+Math.imul(Q,Ge)|0,u=u+Math.imul(Q,et)|0,u=u+Math.imul(K,Ge)|0,_=_+Math.imul(K,et)|0;var Hl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Hl>>>26)|0,Hl&=67108863,x=Math.imul(Ae,He),u=Math.imul(Ae,We),u=u+Math.imul(Ne,He)|0,_=Math.imul(Ne,We),x=x+Math.imul(ke,qe)|0,u=u+Math.imul(ke,Ke)|0,u=u+Math.imul(ve,qe)|0,_=_+Math.imul(ve,Ke)|0,x=x+Math.imul(Se,Ve)|0,u=u+Math.imul(Se,Je)|0,u=u+Math.imul(Pe,Ve)|0,_=_+Math.imul(Pe,Je)|0,x=x+Math.imul(he,Ye)|0,u=u+Math.imul(he,Qe)|0,u=u+Math.imul(me,Ye)|0,_=_+Math.imul(me,Qe)|0,x=x+Math.imul(ie,Xe)|0,u=u+Math.imul(ie,Ze)|0,u=u+Math.imul(se,Xe)|0,_=_+Math.imul(se,Ze)|0,x=x+Math.imul(ne,Ge)|0,u=u+Math.imul(ne,et)|0,u=u+Math.imul(re,Ge)|0,_=_+Math.imul(re,et)|0;var Wl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Wl>>>26)|0,Wl&=67108863,x=Math.imul(Ae,qe),u=Math.imul(Ae,Ke),u=u+Math.imul(Ne,qe)|0,_=Math.imul(Ne,Ke),x=x+Math.imul(ke,Ve)|0,u=u+Math.imul(ke,Je)|0,u=u+Math.imul(ve,Ve)|0,_=_+Math.imul(ve,Je)|0,x=x+Math.imul(Se,Ye)|0,u=u+Math.imul(Se,Qe)|0,u=u+Math.imul(Pe,Ye)|0,_=_+Math.imul(Pe,Qe)|0,x=x+Math.imul(he,Xe)|0,u=u+Math.imul(he,Ze)|0,u=u+Math.imul(me,Xe)|0,_=_+Math.imul(me,Ze)|0,x=x+Math.imul(ie,Ge)|0,u=u+Math.imul(ie,et)|0,u=u+Math.imul(se,Ge)|0,_=_+Math.imul(se,et)|0;var ql=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(ql>>>26)|0,ql&=67108863,x=Math.imul(Ae,Ve),u=Math.imul(Ae,Je),u=u+Math.imul(Ne,Ve)|0,_=Math.imul(Ne,Je),x=x+Math.imul(ke,Ye)|0,u=u+Math.imul(ke,Qe)|0,u=u+Math.imul(ve,Ye)|0,_=_+Math.imul(ve,Qe)|0,x=x+Math.imul(Se,Xe)|0,u=u+Math.imul(Se,Ze)|0,u=u+Math.imul(Pe,Xe)|0,_=_+Math.imul(Pe,Ze)|0,x=x+Math.imul(he,Ge)|0,u=u+Math.imul(he,et)|0,u=u+Math.imul(me,Ge)|0,_=_+Math.imul(me,et)|0;var Kl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Kl>>>26)|0,Kl&=67108863,x=Math.imul(Ae,Ye),u=Math.imul(Ae,Qe),u=u+Math.imul(Ne,Ye)|0,_=Math.imul(Ne,Qe),x=x+Math.imul(ke,Xe)|0,u=u+Math.imul(ke,Ze)|0,u=u+Math.imul(ve,Xe)|0,_=_+Math.imul(ve,Ze)|0,x=x+Math.imul(Se,Ge)|0,u=u+Math.imul(Se,et)|0,u=u+Math.imul(Pe,Ge)|0,_=_+Math.imul(Pe,et)|0;var Vl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Vl>>>26)|0,Vl&=67108863,x=Math.imul(Ae,Xe),u=Math.imul(Ae,Ze),u=u+Math.imul(Ne,Xe)|0,_=Math.imul(Ne,Ze),x=x+Math.imul(ke,Ge)|0,u=u+Math.imul(ke,et)|0,u=u+Math.imul(ve,Ge)|0,_=_+Math.imul(ve,et)|0;var Jl=(E+x|0)+((u&8191)<<13)|0;E=(_+(u>>>13)|0)+(Jl>>>26)|0,Jl&=67108863,x=Math.imul(Ae,Ge),u=Math.imul(Ae,et),u=u+Math.imul(Ne,Ge)|0,_=Math.imul(Ne,et);var Yl=(E+x|0)+((u&8191)<<13)|0;return E=(_+(u>>>13)|0)+(Yl>>>26)|0,Yl&=67108863,R[0]=Rl,R[1]=Ol,R[2]=jl,R[3]=Nl,R[4]=Tl,R[5]=Dl,R[6]=Bl,R[7]=zl,R[8]=Ll,R[9]=$l,R[10]=Fl,R[11]=Ul,R[12]=Hl,R[13]=Wl,R[14]=ql,R[15]=Kl,R[16]=Vl,R[17]=Jl,R[18]=Yl,E!==0&&(R[19]=E,g.length++),g};Math.imul||(M=k);function N(A,c,h){h.negative=c.negative^A.negative,h.length=A.length+c.length;for(var g=0,w=0,C=0;C<h.length-1;C++){var R=w;w=0;for(var E=g&67108863,x=Math.min(C,c.length-1),u=Math.max(0,C-A.length+1);u<=x;u++){var _=C-u,$=A.words[_]|0,J=c.words[u]|0,Y=$*J,B=Y&67108863;R=R+(Y/67108864|0)|0,B=B+E|0,E=B&67108863,R=R+(B>>>26)|0,w+=R>>>26,R&=67108863}h.words[C]=E,g=R,R=w}return g!==0?h.words[C]=g:h.length--,h.strip()}function S(A,c,h){var g=new v;return g.mulp(A,c,h)}s.prototype.mulTo=function(c,h){var g,w=this.length+c.length;return this.length===10&&c.length===10?g=M(this,c,h):w<63?g=k(this,c,h):w<1024?g=N(this,c,h):g=S(this,c,h),g};function v(A,c){this.x=A,this.y=c}v.prototype.makeRBT=function(c){for(var h=new Array(c),g=s.prototype._countBits(c)-1,w=0;w<c;w++)h[w]=this.revBin(w,g,c);return h},v.prototype.revBin=function(c,h,g){if(c===0||c===g-1)return c;for(var w=0,C=0;C<h;C++)w|=(c&1)<<h-C-1,c>>=1;return w},v.prototype.permute=function(c,h,g,w,C,R){for(var E=0;E<R;E++)w[E]=h[c[E]],C[E]=g[c[E]]},v.prototype.transform=function(c,h,g,w,C,R){this.permute(R,c,h,g,w,C);for(var E=1;E<C;E<<=1)for(var x=E<<1,u=Math.cos(2*Math.PI/x),_=Math.sin(2*Math.PI/x),$=0;$<C;$+=x)for(var J=u,Y=_,B=0;B<E;B++){var W=g[$+B],X=w[$+B],ae=g[$+B+E],I=w[$+B+E],O=J*ae-Y*I;I=J*I+Y*ae,ae=O,g[$+B]=W+ae,w[$+B]=X+I,g[$+B+E]=W-ae,w[$+B+E]=X-I,B!==x&&(O=u*J-_*Y,Y=u*Y+_*J,J=O)}},v.prototype.guessLen13b=function(c,h){var g=Math.max(h,c)|1,w=g&1,C=0;for(g=g/2|0;g;g=g>>>1)C++;return 1<<C+1+w},v.prototype.conjugate=function(c,h,g){if(!(g<=1))for(var w=0;w<g/2;w++){var C=c[w];c[w]=c[g-w-1],c[g-w-1]=C,C=h[w],h[w]=-h[g-w-1],h[g-w-1]=-C}},v.prototype.normalize13b=function(c,h){for(var g=0,w=0;w<h/2;w++){var C=Math.round(c[2*w+1]/h)*8192+Math.round(c[2*w]/h)+g;c[w]=C&67108863,C<67108864?g=0:g=C/67108864|0}return c},v.prototype.convert13b=function(c,h,g,w){for(var C=0,R=0;R<h;R++)C=C+(c[R]|0),g[2*R]=C&8191,C=C>>>13,g[2*R+1]=C&8191,C=C>>>13;for(R=2*h;R<w;++R)g[R]=0;n(C===0),n((C&-8192)===0)},v.prototype.stub=function(c){for(var h=new Array(c),g=0;g<c;g++)h[g]=0;return h},v.prototype.mulp=function(c,h,g){var w=2*this.guessLen13b(c.length,h.length),C=this.makeRBT(w),R=this.stub(w),E=new Array(w),x=new Array(w),u=new Array(w),_=new Array(w),$=new Array(w),J=new Array(w),Y=g.words;Y.length=w,this.convert13b(c.words,c.length,E,w),this.convert13b(h.words,h.length,_,w),this.transform(E,R,x,u,w,C),this.transform(_,R,$,J,w,C);for(var B=0;B<w;B++){var W=x[B]*$[B]-u[B]*J[B];u[B]=x[B]*J[B]+u[B]*$[B],x[B]=W}return this.conjugate(x,u,w),this.transform(x,u,Y,R,w,C),this.conjugate(Y,R,w),this.normalize13b(Y,w),g.negative=c.negative^h.negative,g.length=c.length+h.length,g.strip()},s.prototype.mul=function(c){var h=new s(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},s.prototype.mulf=function(c){var h=new s(null);return h.words=new Array(this.length+c.length),S(this,c,h)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){n(typeof c=="number"),n(c<67108864);for(var h=0,g=0;g<this.length;g++){var w=(this.words[g]|0)*c,C=(w&67108863)+(h&67108863);h>>=26,h+=w/67108864|0,h+=C>>>26,this.words[g]=C&67108863}return h!==0&&(this.words[g]=h,this.length++),this.length=c===0?1:this.length,this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var h=b(c);if(h.length===0)return new s(1);for(var g=this,w=0;w<h.length&&h[w]===0;w++,g=g.sqr());if(++w<h.length)for(var C=g.sqr();w<h.length;w++,C=C.sqr())h[w]!==0&&(g=g.mul(C));return g},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var h=c%26,g=(c-h)/26,w=67108863>>>26-h<<26-h,C;if(h!==0){var R=0;for(C=0;C<this.length;C++){var E=this.words[C]&w,x=(this.words[C]|0)-E<<h;this.words[C]=x|R,R=E>>>26-h}R&&(this.words[C]=R,this.length++)}if(g!==0){for(C=this.length-1;C>=0;C--)this.words[C+g]=this.words[C];for(C=0;C<g;C++)this.words[C]=0;this.length+=g}return this.strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,h,g){n(typeof c=="number"&&c>=0);var w;h?w=(h-h%26)/26:w=0;var C=c%26,R=Math.min((c-C)/26,this.length),E=67108863^67108863>>>C<<C,x=g;if(w-=R,w=Math.max(0,w),x){for(var u=0;u<R;u++)x.words[u]=this.words[u];x.length=R}if(R!==0)if(this.length>R)for(this.length-=R,u=0;u<this.length;u++)this.words[u]=this.words[u+R];else this.words[0]=0,this.length=1;var _=0;for(u=this.length-1;u>=0&&(_!==0||u>=w);u--){var $=this.words[u]|0;this.words[u]=_<<26-C|$>>>C,_=$&E}return x&&_!==0&&(x.words[x.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(c,h,g){return n(this.negative===0),this.iushrn(c,h,g)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,g=(c-h)/26,w=1<<h;if(this.length<=g)return!1;var C=this.words[g];return!!(C&w)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,g=(c-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(h!==0&&g++,this.length=Math.min(g,this.length),h!==0){var w=67108863^67108863>>>h<<h;this.words[this.length-1]&=w}return this.strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,h,g){var w=c.length+g,C;this._expand(w);var R,E=0;for(C=0;C<c.length;C++){R=(this.words[C+g]|0)+E;var x=(c.words[C]|0)*h;R-=x&67108863,E=(R>>26)-(x/67108864|0),this.words[C+g]=R&67108863}for(;C<this.length-g;C++)R=(this.words[C+g]|0)+E,E=R>>26,this.words[C+g]=R&67108863;if(E===0)return this.strip();for(n(E===-1),E=0,C=0;C<this.length;C++)R=-(this.words[C]|0)+E,E=R>>26,this.words[C]=R&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(c,h){var g=this.length-c.length,w=this.clone(),C=c,R=C.words[C.length-1]|0,E=this._countBits(R);g=26-E,g!==0&&(C=C.ushln(g),w.iushln(g),R=C.words[C.length-1]|0);var x=w.length-C.length,u;if(h!=="mod"){u=new s(null),u.length=x+1,u.words=new Array(u.length);for(var _=0;_<u.length;_++)u.words[_]=0}var $=w.clone()._ishlnsubmul(C,1,x);$.negative===0&&(w=$,u&&(u.words[x]=1));for(var J=x-1;J>=0;J--){var Y=(w.words[C.length+J]|0)*67108864+(w.words[C.length+J-1]|0);for(Y=Math.min(Y/R|0,67108863),w._ishlnsubmul(C,Y,J);w.negative!==0;)Y--,w.negative=0,w._ishlnsubmul(C,1,J),w.isZero()||(w.negative^=1);u&&(u.words[J]=Y)}return u&&u.strip(),w.strip(),h!=="div"&&g!==0&&w.iushrn(g),{div:u||null,mod:w}},s.prototype.divmod=function(c,h,g){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,C,R;return this.negative!==0&&c.negative===0?(R=this.neg().divmod(c,h),h!=="mod"&&(w=R.div.neg()),h!=="div"&&(C=R.mod.neg(),g&&C.negative!==0&&C.iadd(c)),{div:w,mod:C}):this.negative===0&&c.negative!==0?(R=this.divmod(c.neg(),h),h!=="mod"&&(w=R.div.neg()),{div:w,mod:R.mod}):this.negative&c.negative?(R=this.neg().divmod(c.neg(),h),h!=="div"&&(C=R.mod.neg(),g&&C.negative!==0&&C.isub(c)),{div:R.div,mod:C}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modn(c.words[0]))}:this._wordDiv(c,h)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var g=h.div.negative!==0?h.mod.isub(c):h.mod,w=c.ushrn(1),C=c.andln(1),R=g.cmp(w);return R<0||C===1&&R===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modn=function(c){n(c<=67108863);for(var h=(1<<26)%c,g=0,w=this.length-1;w>=0;w--)g=(h*g+(this.words[w]|0))%c;return g},s.prototype.idivn=function(c){n(c<=67108863);for(var h=0,g=this.length-1;g>=0;g--){var w=(this.words[g]|0)+h*67108864;this.words[g]=w/c|0,h=w%c}return this.strip()},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var h=this,g=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var w=new s(1),C=new s(0),R=new s(0),E=new s(1),x=0;h.isEven()&&g.isEven();)h.iushrn(1),g.iushrn(1),++x;for(var u=g.clone(),_=h.clone();!h.isZero();){for(var $=0,J=1;!(h.words[0]&J)&&$<26;++$,J<<=1);if($>0)for(h.iushrn($);$-- >0;)(w.isOdd()||C.isOdd())&&(w.iadd(u),C.isub(_)),w.iushrn(1),C.iushrn(1);for(var Y=0,B=1;!(g.words[0]&B)&&Y<26;++Y,B<<=1);if(Y>0)for(g.iushrn(Y);Y-- >0;)(R.isOdd()||E.isOdd())&&(R.iadd(u),E.isub(_)),R.iushrn(1),E.iushrn(1);h.cmp(g)>=0?(h.isub(g),w.isub(R),C.isub(E)):(g.isub(h),R.isub(w),E.isub(C))}return{a:R,b:E,gcd:g.iushln(x)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var h=this,g=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var w=new s(1),C=new s(0),R=g.clone();h.cmpn(1)>0&&g.cmpn(1)>0;){for(var E=0,x=1;!(h.words[0]&x)&&E<26;++E,x<<=1);if(E>0)for(h.iushrn(E);E-- >0;)w.isOdd()&&w.iadd(R),w.iushrn(1);for(var u=0,_=1;!(g.words[0]&_)&&u<26;++u,_<<=1);if(u>0)for(g.iushrn(u);u-- >0;)C.isOdd()&&C.iadd(R),C.iushrn(1);h.cmp(g)>=0?(h.isub(g),w.isub(C)):(g.isub(h),C.isub(w))}var $;return h.cmpn(1)===0?$=w:$=C,$.cmpn(0)<0&&$.iadd(c),$},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),g=c.clone();h.negative=0,g.negative=0;for(var w=0;h.isEven()&&g.isEven();w++)h.iushrn(1),g.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;g.isEven();)g.iushrn(1);var C=h.cmp(g);if(C<0){var R=h;h=g,g=R}else if(C===0||g.cmpn(1)===0)break;h.isub(g)}while(!0);return g.iushln(w)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var h=c%26,g=(c-h)/26,w=1<<h;if(this.length<=g)return this._expand(g+1),this.words[g]|=w,this;for(var C=w,R=g;C!==0&&R<this.length;R++){var E=this.words[R]|0;E+=C,C=E>>>26,E&=67108863,this.words[R]=E}return C!==0&&(this.words[R]=C,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var g;if(this.length>1)g=1;else{h&&(c=-c),n(c<=67108863,"Number is too big");var w=this.words[0]|0;g=w===c?0:w<c?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,g=this.length-1;g>=0;g--){var w=this.words[g]|0,C=c.words[g]|0;if(w!==C){w<C?h=-1:w>C&&(h=1);break}}return h},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new V(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var P={k256:null,p224:null,p192:null,p25519:null};function j(A,c){this.name=A,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},j.prototype.ireduce=function(c){var h=c,g;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),g=h.bitLength();while(g>this.n);var w=g<this.n?-1:h.ucmp(this.p);return w===0?(h.words[0]=0,h.length=1):w>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},j.prototype.split=function(c,h){c.iushrn(this.n,0,h)},j.prototype.imulK=function(c){return c.imul(this.k)};function D(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(D,j),D.prototype.split=function(c,h){for(var g=4194303,w=Math.min(c.length,9),C=0;C<w;C++)h.words[C]=c.words[C];if(h.length=w,c.length<=9){c.words[0]=0,c.length=1;return}var R=c.words[9];for(h.words[h.length++]=R&g,C=10;C<c.length;C++){var E=c.words[C]|0;c.words[C-10]=(E&g)<<4|R>>>22,R=E}R>>>=22,c.words[C-10]=R,R===0&&c.length>10?c.length-=10:c.length-=9},D.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,g=0;g<c.length;g++){var w=c.words[g]|0;h+=w*977,c.words[g]=h&67108863,h=w*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function F(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(F,j);function T(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(T,j);function L(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(L,j),L.prototype.imulK=function(c){for(var h=0,g=0;g<c.length;g++){var w=(c.words[g]|0)*19+h,C=w&67108863;w>>>=26,c.words[g]=C,h=w}return h!==0&&(c.words[c.length++]=h),c},s._prime=function(c){if(P[c])return P[c];var h;if(c==="k256")h=new D;else if(c==="p224")h=new F;else if(c==="p192")h=new T;else if(c==="p25519")h=new L;else throw new Error("Unknown prime "+c);return P[c]=h,h};function V(A){if(typeof A=="string"){var c=s._prime(A);this.m=c.p,this.prime=c}else n(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}V.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},V.prototype._verify2=function(c,h){n((c.negative|h.negative)===0,"red works only with positives"),n(c.red&&c.red===h.red,"red works only with red numbers")},V.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},V.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},V.prototype.add=function(c,h){this._verify2(c,h);var g=c.add(h);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},V.prototype.iadd=function(c,h){this._verify2(c,h);var g=c.iadd(h);return g.cmp(this.m)>=0&&g.isub(this.m),g},V.prototype.sub=function(c,h){this._verify2(c,h);var g=c.sub(h);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},V.prototype.isub=function(c,h){this._verify2(c,h);var g=c.isub(h);return g.cmpn(0)<0&&g.iadd(this.m),g},V.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},V.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},V.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},V.prototype.isqr=function(c){return this.imul(c,c.clone())},V.prototype.sqr=function(c){return this.mul(c,c)},V.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(c,g)}for(var w=this.m.subn(1),C=0;!w.isZero()&&w.andln(1)===0;)C++,w.iushrn(1);n(!w.isZero());var R=new s(1).toRed(this),E=R.redNeg(),x=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,x).cmp(E)!==0;)u.redIAdd(E);for(var _=this.pow(u,w),$=this.pow(c,w.addn(1).iushrn(1)),J=this.pow(c,w),Y=C;J.cmp(R)!==0;){for(var B=J,W=0;B.cmp(R)!==0;W++)B=B.redSqr();n(W<Y);var X=this.pow(_,new s(1).iushln(Y-W-1));$=$.redMul(X),_=X.redSqr(),J=J.redMul(_),Y=W}return $},V.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},V.prototype.pow=function(c,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var g=4,w=new Array(1<<g);w[0]=new s(1).toRed(this),w[1]=c;for(var C=2;C<w.length;C++)w[C]=this.mul(w[C-1],c);var R=w[0],E=0,x=0,u=h.bitLength()%26;for(u===0&&(u=26),C=h.length-1;C>=0;C--){for(var _=h.words[C],$=u-1;$>=0;$--){var J=_>>$&1;if(R!==w[0]&&(R=this.sqr(R)),J===0&&E===0){x=0;continue}E<<=1,E|=J,x++,!(x!==g&&(C!==0||$!==0))&&(R=this.mul(R,w[E]),x=0,E=0)}u=26}return R},V.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},V.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},s.mont=function(c){return new ee(c)};function ee(A){V.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(ee,V),ee.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},ee.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},ee.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var g=c.imul(h),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=g.isub(w).iushrn(this.shift),R=C;return C.cmp(this.m)>=0?R=C.isub(this.m):C.cmpn(0)<0&&(R=C.iadd(this.m)),R._forceRed(this)},ee.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new s(0)._forceRed(this);var g=c.mul(h),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=g.isub(w).iushrn(this.shift),R=C;return C.cmp(this.m)>=0?R=C.isub(this.m):C.cmpn(0)<0&&(R=C.iadd(this.m)),R._forceRed(this)},ee.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(e,Ci)})(zd);var on=zd.exports,ci=Ev;function Ev(e,t){if(!e)throw new Error(t||"Assertion failed")}Ev.equal=function(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var Ld={};(function(e){var t=e;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var l=0;l<s.length;l++)a[l]=s[l]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var l=0;l<s.length;l+=2)a.push(parseInt(s[l]+s[l+1],16))}else for(var l=0;l<s.length;l++){var f=s.charCodeAt(l),d=f>>8,y=f&255;d?a.push(d,y):a.push(y)}return a}t.toArray=r;function n(s){return s.length===1?"0"+s:s}t.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}t.toHex=i,t.encode=function(o,a){return a==="hex"?i(o):o}})(Ld);(function(e){var t=e,r=on,n=ci,i=Ld;t.assert=n,t.toArray=i.toArray,t.zero2=i.zero2,t.toHex=i.toHex,t.encode=i.encode;function s(d,y,m){var b=new Array(Math.max(d.bitLength(),m)+1),k;for(k=0;k<b.length;k+=1)b[k]=0;var M=1<<y+1,N=d.clone();for(k=0;k<b.length;k++){var S,v=N.andln(M-1);N.isOdd()?(v>(M>>1)-1?S=(M>>1)-v:S=v,N.isubn(S)):S=0,b[k]=S,N.iushrn(1)}return b}t.getNAF=s;function o(d,y){var m=[[],[]];d=d.clone(),y=y.clone();for(var b=0,k=0,M;d.cmpn(-b)>0||y.cmpn(-k)>0;){var N=d.andln(3)+b&3,S=y.andln(3)+k&3;N===3&&(N=-1),S===3&&(S=-1);var v;N&1?(M=d.andln(7)+b&7,(M===3||M===5)&&S===2?v=-N:v=N):v=0,m[0].push(v);var P;S&1?(M=y.andln(7)+k&7,(M===3||M===5)&&N===2?P=-S:P=S):P=0,m[1].push(P),2*b===v+1&&(b=1-b),2*k===P+1&&(k=1-k),d.iushrn(1),y.iushrn(1)}return m}t.getJSF=o;function a(d,y,m){var b="_"+y;d.prototype[y]=function(){return this[b]!==void 0?this[b]:this[b]=m.call(this)}}t.cachedProperty=a;function l(d){return typeof d=="string"?t.toArray(d,"hex"):d}t.parseBytes=l;function f(d){return new r(d,"hex","le")}t.intFromLE=f})(Xt);var $d={exports:{}},Nc;$d.exports=function(t){return Nc||(Nc=new vn(null)),Nc.generate(t)};function vn(e){this.rand=e}$d.exports.Rand=vn;vn.prototype.generate=function(t){return this._rand(t)};vn.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var r=new Uint8Array(t),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?vn.prototype._rand=function(t){var r=new Uint8Array(t);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?vn.prototype._rand=function(t){var r=new Uint8Array(t);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(vn.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Gp=Mv;if(typeof Gp.randomBytes!="function")throw new Error("Not supported");vn.prototype._rand=function(t){return Gp.randomBytes(t)}}catch{}var Av=$d.exports,Fd={},Fn=on,po=Xt,La=po.getNAF,D6=po.getJSF,$a=po.assert;function zn(e,t){this.type=e,this.p=new Fn(t.p,16),this.red=t.prime?Fn.red(t.prime):Fn.mont(this.p),this.zero=new Fn(0).toRed(this.red),this.one=new Fn(1).toRed(this.red),this.two=new Fn(2).toRed(this.red),this.n=t.n&&new Fn(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var gl=zn;zn.prototype.point=function(){throw new Error("Not implemented")};zn.prototype.validate=function(){throw new Error("Not implemented")};zn.prototype._fixedNafMul=function(t,r){$a(t.precomputed);var n=t._getDoubles(),i=La(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,l;for(a=0;a<i.length;a+=n.step){l=0;for(var f=a+n.step-1;f>=a;f--)l=(l<<1)+i[f];o.push(l)}for(var d=this.jpoint(null,null,null),y=this.jpoint(null,null,null),m=s;m>0;m--){for(a=0;a<o.length;a++)l=o[a],l===m?y=y.mixedAdd(n.points[a]):l===-m&&(y=y.mixedAdd(n.points[a].neg()));d=d.add(y)}return d.toP()};zn.prototype._wnafMul=function(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=La(r,n,this._bitLength),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var f=0;l>=0&&o[l]===0;l--)f++;if(l>=0&&f++,a=a.dblp(f),l<0)break;var d=o[l];$a(d!==0),t.type==="affine"?d>0?a=a.mixedAdd(s[d-1>>1]):a=a.mixedAdd(s[-d-1>>1].neg()):d>0?a=a.add(s[d-1>>1]):a=a.add(s[-d-1>>1].neg())}return t.type==="affine"?a.toP():a};zn.prototype._wnafMulAdd=function(t,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,l=this._wnafT3,f=0,d,y,m;for(d=0;d<i;d++){m=r[d];var b=m._getNAFPoints(t);o[d]=b.wnd,a[d]=b.points}for(d=i-1;d>=1;d-=2){var k=d-1,M=d;if(o[k]!==1||o[M]!==1){l[k]=La(n[k],o[k],this._bitLength),l[M]=La(n[M],o[M],this._bitLength),f=Math.max(l[k].length,f),f=Math.max(l[M].length,f);continue}var N=[r[k],null,null,r[M]];r[k].y.cmp(r[M].y)===0?(N[1]=r[k].add(r[M]),N[2]=r[k].toJ().mixedAdd(r[M].neg())):r[k].y.cmp(r[M].y.redNeg())===0?(N[1]=r[k].toJ().mixedAdd(r[M]),N[2]=r[k].add(r[M].neg())):(N[1]=r[k].toJ().mixedAdd(r[M]),N[2]=r[k].toJ().mixedAdd(r[M].neg()));var S=[-3,-1,-5,-7,0,7,5,1,3],v=D6(n[k],n[M]);for(f=Math.max(v[0].length,f),l[k]=new Array(f),l[M]=new Array(f),y=0;y<f;y++){var P=v[0][y]|0,j=v[1][y]|0;l[k][y]=S[(P+1)*3+(j+1)],l[M][y]=0,a[k]=N}}var D=this.jpoint(null,null,null),F=this._wnafT4;for(d=f;d>=0;d--){for(var T=0;d>=0;){var L=!0;for(y=0;y<i;y++)F[y]=l[y][d]|0,F[y]!==0&&(L=!1);if(!L)break;T++,d--}if(d>=0&&T++,D=D.dblp(T),d<0)break;for(y=0;y<i;y++){var V=F[y];V!==0&&(V>0?m=a[y][V-1>>1]:V<0&&(m=a[y][-V-1>>1].neg()),m.type==="affine"?D=D.mixedAdd(m):D=D.add(m))}}for(d=0;d<i;d++)a[d]=null;return s?D:D.toP()};function lr(e,t){this.curve=e,this.type=t,this.precomputed=null}zn.BasePoint=lr;lr.prototype.eq=function(){throw new Error("Not implemented")};lr.prototype.validate=function(){return this.curve.validate(this)};zn.prototype.decodePoint=function(t,r){t=po.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?$a(t[t.length-1]%2===0):t[0]===7&&$a(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")};lr.prototype.encodeCompressed=function(t){return this.encode(t,!0)};lr.prototype._encode=function(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};lr.prototype.encode=function(t,r){return po.encode(this._encode(r),t)};lr.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};lr.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};lr.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=t){for(var o=0;o<t;o++)i=i.dbl();n.push(i)}return{step:t,points:n}};lr.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:t,points:r}};lr.prototype._getBeta=function(){return null};lr.prototype.dblp=function(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r};var sf={exports:{}};typeof Object.create=="function"?sf.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:sf.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var bl=sf.exports,B6=Xt,Oe=on,Ud=bl,Zi=gl,z6=B6.assert;function cr(e){Zi.call(this,"short",e),this.a=new Oe(e.a,16).toRed(this.red),this.b=new Oe(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Ud(cr,Zi);var L6=cr;cr.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(t.beta)r=new Oe(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(t.lambda)n=new Oe(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],z6(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return t.basis?o=t.basis.map(function(a){return{a:new Oe(a.a,16),b:new Oe(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};cr.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:Oe.mont(t),n=new Oe(2).toRed(r).redInvm(),i=n.redNeg(),s=new Oe(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};cr.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,i=this.n.clone(),s=new Oe(1),o=new Oe(0),a=new Oe(0),l=new Oe(1),f,d,y,m,b,k,M,N=0,S,v;n.cmpn(0)!==0;){var P=i.div(n);S=i.sub(P.mul(n)),v=a.sub(P.mul(s));var j=l.sub(P.mul(o));if(!y&&S.cmp(r)<0)f=M.neg(),d=s,y=S.neg(),m=v;else if(y&&++N===2)break;M=S,i=n,n=S,a=s,s=v,l=o,o=j}b=S.neg(),k=v;var D=y.sqr().add(m.sqr()),F=b.sqr().add(k.sqr());return F.cmp(D)>=0&&(b=f,k=d),y.negative&&(y=y.neg(),m=m.neg()),b.negative&&(b=b.neg(),k=k.neg()),[{a:y,b:m},{a:b,b:k}]};cr.prototype._endoSplit=function(t){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),a=s.mul(n.a),l=o.mul(i.a),f=s.mul(n.b),d=o.mul(i.b),y=t.sub(a).sub(l),m=f.add(d).neg();return{k1:y,k2:m}};cr.prototype.pointFromX=function(t,r){t=new Oe(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(t,i)};cr.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};cr.prototype._endoWnafMulAdd=function(t,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(r[o]),l=t[o],f=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),f=f.neg(!0)),i[o*2]=l,i[o*2+1]=f,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var d=this._wnafMulAdd(1,i,s,o*2,n),y=0;y<o*2;y++)i[y]=null,s[y]=null;return d};function ut(e,t,r,n){Zi.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Oe(t,16),this.y=new Oe(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Ud(ut,Zi.BasePoint);cr.prototype.point=function(t,r,n){return new ut(this,t,r,n)};cr.prototype.pointFromJSON=function(t,r){return ut.fromJSON(this,t,r)};ut.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r}};ut.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};ut.fromJSON=function(t,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function s(a){return t.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};ut.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};ut.prototype.isInfinity=function(){return this.inf};ut.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};ut.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};ut.prototype.getX=function(){return this.x.fromRed()};ut.prototype.getY=function(){return this.y.fromRed()};ut.prototype.mul=function(t){return t=new Oe(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};ut.prototype.mulAdd=function(t,r,n){var i=[this,r],s=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};ut.prototype.jmulAdd=function(t,r,n){var i=[this,r],s=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};ut.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};ut.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};ut.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function pt(e,t,r,n){Zi.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Oe(0)):(this.x=new Oe(t,16),this.y=new Oe(r,16),this.z=new Oe(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ud(pt,Zi.BasePoint);cr.prototype.jpoint=function(t,r,n){return new pt(this,t,r,n)};pt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};pt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};pt.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=t.x.redMul(n),o=this.y.redMul(r.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),l=i.redSub(s),f=o.redSub(a);if(l.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=l.redSqr(),y=d.redMul(l),m=i.redMul(d),b=f.redSqr().redIAdd(y).redISub(m).redISub(m),k=f.redMul(m.redISub(b)).redISub(o.redMul(y)),M=this.z.redMul(t.z).redMul(l);return this.curve.jpoint(b,k,M)};pt.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),s=this.y,o=t.y.redMul(r).redMul(this.z),a=n.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=a.redSqr(),d=f.redMul(a),y=n.redMul(f),m=l.redSqr().redIAdd(d).redISub(y).redISub(y),b=l.redMul(y.redISub(m)).redISub(s.redMul(d)),k=this.z.redMul(a);return this.curve.jpoint(m,b,k)};pt.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,l=this.z,f=l.redSqr().redSqr(),d=a.redAdd(a);for(r=0;r<t;r++){var y=o.redSqr(),m=d.redSqr(),b=m.redSqr(),k=y.redAdd(y).redIAdd(y).redIAdd(i.redMul(f)),M=o.redMul(m),N=k.redSqr().redISub(M.redAdd(M)),S=M.redISub(N),v=k.redMul(S);v=v.redIAdd(v).redISub(b);var P=d.redMul(l);r+1<t&&(f=f.redMul(b)),o=N,l=P,d=v}return this.curve.jpoint(o,d.redMul(s),l)};pt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};pt.prototype._zeroDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i),f=l.redSqr().redISub(a).redISub(a),d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),t=f,r=l.redMul(a.redISub(f)).redISub(d),n=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),m=this.y.redSqr(),b=m.redSqr(),k=this.x.redAdd(m).redSqr().redISub(y).redISub(b);k=k.redIAdd(k);var M=y.redAdd(y).redIAdd(y),N=M.redSqr(),S=b.redIAdd(b);S=S.redIAdd(S),S=S.redIAdd(S),t=N.redISub(k).redISub(k),r=M.redMul(k.redISub(t)).redISub(S),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};pt.prototype._threeDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),f=l.redSqr().redISub(a).redISub(a);t=f;var d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),r=l.redMul(a.redISub(f)).redISub(d),n=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),m=this.y.redSqr(),b=this.x.redMul(m),k=this.x.redSub(y).redMul(this.x.redAdd(y));k=k.redAdd(k).redIAdd(k);var M=b.redIAdd(b);M=M.redIAdd(M);var N=M.redAdd(M);t=k.redSqr().redISub(N),n=this.y.redAdd(this.z).redSqr().redISub(m).redISub(y);var S=m.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S),r=k.redMul(M.redISub(t)).redISub(S)}return this.curve.jpoint(t,r,n)};pt.prototype._dbl=function(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(s)),f=r.redAdd(r);f=f.redIAdd(f);var d=f.redMul(a),y=l.redSqr().redISub(d.redAdd(d)),m=d.redISub(y),b=a.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var k=l.redMul(m).redISub(b),M=n.redAdd(n).redMul(i);return this.curve.jpoint(y,k,M)};pt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=t.redAdd(t).redIAdd(t),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(t).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var l=a.redSqr(),f=i.redIAdd(i);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var d=s.redIAdd(a).redSqr().redISub(o).redISub(l).redISub(f),y=r.redMul(d);y=y.redIAdd(y),y=y.redIAdd(y);var m=this.x.redMul(l).redISub(y);m=m.redIAdd(m),m=m.redIAdd(m);var b=this.y.redMul(d.redMul(f.redISub(d)).redISub(a.redMul(l)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var k=this.z.redAdd(a).redSqr().redISub(n).redISub(l);return this.curve.jpoint(m,b,k)};pt.prototype.mul=function(t,r){return t=new Oe(t,r),this.curve._wnafMul(this,t)};pt.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(i)).cmpn(0)===0};pt.prototype.eqXToP=function(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=t.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};pt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};pt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Pi=on,Iv=bl,xl=gl,$6=Xt;function Gi(e){xl.call(this,"mont",e),this.a=new Pi(e.a,16).toRed(this.red),this.b=new Pi(e.b,16).toRed(this.red),this.i4=new Pi(4).toRed(this.red).redInvm(),this.two=new Pi(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Iv(Gi,xl);var F6=Gi;Gi.prototype.validate=function(t){var r=t.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function ct(e,t,r){xl.BasePoint.call(this,e,"projective"),t===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Pi(t,16),this.z=new Pi(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Iv(ct,xl.BasePoint);Gi.prototype.decodePoint=function(t,r){return this.point($6.toArray(t,r),1)};Gi.prototype.point=function(t,r){return new ct(this,t,r)};Gi.prototype.pointFromJSON=function(t){return ct.fromJSON(this,t)};ct.prototype.precompute=function(){};ct.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};ct.fromJSON=function(t,r){return new ct(t,r[0],r[1]||t.one)};ct.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ct.prototype.isInfinity=function(){return this.z.cmpn(0)===0};ct.prototype.dbl=function(){var t=this.x.redAdd(this.z),r=t.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};ct.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};ct.prototype.diffAdd=function(t,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=t.x.redAdd(t.z),o=t.x.redSub(t.z),a=o.redMul(n),l=s.redMul(i),f=r.z.redMul(a.redAdd(l).redSqr()),d=r.x.redMul(a.redISub(l).redSqr());return this.curve.point(f,d)};ct.prototype.mul=function(t){for(var r=t.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};ct.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};ct.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};ct.prototype.eq=function(t){return this.getX().cmp(t.getX())===0};ct.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};ct.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var U6=Xt,Vr=on,Rv=bl,wl=gl,H6=U6.assert;function $r(e){this.twisted=(e.a|0)!==1,this.mOneA=this.twisted&&(e.a|0)===-1,this.extended=this.mOneA,wl.call(this,"edwards",e),this.a=new Vr(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Vr(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Vr(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),H6(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(e.c|0)===1}Rv($r,wl);var W6=$r;$r.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)};$r.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)};$r.prototype.jpoint=function(t,r,n,i){return this.point(t,r,n,i)};$r.prototype.pointFromX=function(t,r){t=new Vr(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var l=a.fromRed().isOdd();return(r&&!l||!r&&l)&&(a=a.redNeg()),this.point(t,a)};$r.prototype.pointFromY=function(t,r){t=new Vr(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,t)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,t)};$r.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var r=t.x.redSqr(),n=t.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function be(e,t,r,n,i){wl.BasePoint.call(this,e,"projective"),t===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Vr(t,16),this.y=new Vr(r,16),this.z=n?new Vr(n,16):this.curve.one,this.t=i&&new Vr(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Rv(be,wl.BasePoint);$r.prototype.pointFromJSON=function(t){return be.fromJSON(this,t)};$r.prototype.point=function(t,r,n,i){return new be(this,t,r,n,i)};be.fromJSON=function(t,r){return new be(t,r[0],r[1],r[2])};be.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};be.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};be.prototype._extDbl=function(){var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(t),s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r),o=i.redAdd(r),a=o.redSub(n),l=i.redSub(r),f=s.redMul(a),d=o.redMul(l),y=s.redMul(l),m=a.redMul(o);return this.curve.point(f,d,m,y)};be.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,l,f;if(this.curve.twisted){a=this.curve._mulA(r);var d=a.redAdd(n);this.zOne?(i=t.redSub(r).redSub(n).redMul(d.redSub(this.curve.two)),s=d.redMul(a.redSub(n)),o=d.redSqr().redSub(d).redSub(d)):(l=this.z.redSqr(),f=d.redSub(l).redISub(l),i=t.redSub(r).redISub(n).redMul(f),s=d.redMul(a.redSub(n)),o=d.redMul(f))}else a=r.redAdd(n),l=this.curve._mulC(this.z).redSqr(),f=a.redSub(l).redSub(l),i=this.curve._mulC(t.redISub(a)).redMul(f),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(f);return this.curve.point(i,s,o)};be.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};be.prototype._extAdd=function(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),s=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(r),a=s.redSub(i),l=s.redAdd(i),f=n.redAdd(r),d=o.redMul(a),y=l.redMul(f),m=o.redMul(f),b=a.redMul(l);return this.curve.point(d,y,b,m)};be.prototype._projAdd=function(t){var r=this.z.redMul(t.z),n=r.redSqr(),i=this.x.redMul(t.x),s=this.y.redMul(t.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),l=n.redAdd(o),f=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(i).redISub(s),d=r.redMul(a).redMul(f),y,m;return this.curve.twisted?(y=r.redMul(l).redMul(s.redSub(this.curve._mulA(i))),m=a.redMul(l)):(y=r.redMul(l).redMul(s.redSub(i)),m=this.curve._mulC(a).redMul(l)),this.curve.point(d,y,m)};be.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)};be.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)};be.prototype.mulAdd=function(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,!1)};be.prototype.jmulAdd=function(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,!0)};be.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this};be.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};be.prototype.getX=function(){return this.normalize(),this.x.fromRed()};be.prototype.getY=function(){return this.normalize(),this.y.fromRed()};be.prototype.eq=function(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};be.prototype.eqXToP=function(t){var r=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=t.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};be.prototype.toP=be.prototype.normalize;be.prototype.mixedAdd=be.prototype.add;(function(e){var t=e;t.base=gl,t.short=L6,t.mont=F6,t.edwards=W6})(Fd);var Sl={},kl={},ce={},q6=ci,K6=bl;ce.inherits=K6;function V6(e,t){return(e.charCodeAt(t)&64512)!==55296||t<0||t+1>=e.length?!1:(e.charCodeAt(t+1)&64512)===56320}function J6(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e=="string")if(t){if(t==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):V6(e,i)?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<e.length;i++)r[i]=e[i]|0;return r}ce.toArray=J6;function Y6(e){for(var t="",r=0;r<e.length;r++)t+=jv(e[r].toString(16));return t}ce.toHex=Y6;function Ov(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}ce.htonl=Ov;function Q6(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];t==="little"&&(i=Ov(i)),r+=Nv(i.toString(16))}return r}ce.toHex32=Q6;function jv(e){return e.length===1?"0"+e:e}ce.zero2=jv;function Nv(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}ce.zero8=Nv;function X6(e,t,r,n){var i=r-t;q6(i%4===0);for(var s=new Array(i/4),o=0,a=t;o<s.length;o++,a+=4){var l;n==="big"?l=e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:l=e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],s[o]=l>>>0}return s}ce.join32=X6;function Z6(e,t){for(var r=new Array(e.length*4),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];t==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}ce.split32=Z6;function G6(e,t){return e>>>t|e<<32-t}ce.rotr32=G6;function e8(e,t){return e<<t|e>>>32-t}ce.rotl32=e8;function t8(e,t){return e+t>>>0}ce.sum32=t8;function r8(e,t,r){return e+t+r>>>0}ce.sum32_3=r8;function n8(e,t,r,n){return e+t+r+n>>>0}ce.sum32_4=n8;function i8(e,t,r,n,i){return e+t+r+n+i>>>0}ce.sum32_5=i8;function s8(e,t,r,n){var i=e[t],s=e[t+1],o=n+s>>>0,a=(o<n?1:0)+r+i;e[t]=a>>>0,e[t+1]=o}ce.sum64=s8;function o8(e,t,r,n){var i=t+n>>>0,s=(i<t?1:0)+e+r;return s>>>0}ce.sum64_hi=o8;function a8(e,t,r,n){var i=t+n;return i>>>0}ce.sum64_lo=a8;function l8(e,t,r,n,i,s,o,a){var l=0,f=t;f=f+n>>>0,l+=f<t?1:0,f=f+s>>>0,l+=f<s?1:0,f=f+a>>>0,l+=f<a?1:0;var d=e+r+i+o+l;return d>>>0}ce.sum64_4_hi=l8;function c8(e,t,r,n,i,s,o,a){var l=t+n+s+a;return l>>>0}ce.sum64_4_lo=c8;function u8(e,t,r,n,i,s,o,a,l,f){var d=0,y=t;y=y+n>>>0,d+=y<t?1:0,y=y+s>>>0,d+=y<s?1:0,y=y+a>>>0,d+=y<a?1:0,y=y+f>>>0,d+=y<f?1:0;var m=e+r+i+o+l+d;return m>>>0}ce.sum64_5_hi=u8;function f8(e,t,r,n,i,s,o,a,l,f){var d=t+n+s+a+f;return d>>>0}ce.sum64_5_lo=f8;function d8(e,t,r){var n=t<<32-r|e>>>r;return n>>>0}ce.rotr64_hi=d8;function h8(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}ce.rotr64_lo=h8;function p8(e,t,r){return e>>>r}ce.shr64_hi=p8;function y8(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}ce.shr64_lo=y8;var es={},e0=ce,m8=ci;function _l(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}es.BlockHash=_l;_l.prototype.update=function(t,r){if(t=e0.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var n=t.length%this._delta8;this.pending=t.slice(t.length-n,t.length),this.pending.length===0&&(this.pending=null),t=e0.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this};_l.prototype.digest=function(t){return this.update(this._pad()),m8(this.pending===null),this._digest(t)};_l.prototype._pad=function(){var t=this.pendingTotal,r=this._delta8,n=r-(t+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(t<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=t>>>24&255,i[s++]=t>>>16&255,i[s++]=t>>>8&255,i[s++]=t&255}else for(i[s++]=t&255,i[s++]=t>>>8&255,i[s++]=t>>>16&255,i[s++]=t>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var ts={},Fr={},v8=ce,jr=v8.rotr32;function g8(e,t,r,n){if(e===0)return Tv(t,r,n);if(e===1||e===3)return Bv(t,r,n);if(e===2)return Dv(t,r,n)}Fr.ft_1=g8;function Tv(e,t,r){return e&t^~e&r}Fr.ch32=Tv;function Dv(e,t,r){return e&t^e&r^t&r}Fr.maj32=Dv;function Bv(e,t,r){return e^t^r}Fr.p32=Bv;function b8(e){return jr(e,2)^jr(e,13)^jr(e,22)}Fr.s0_256=b8;function x8(e){return jr(e,6)^jr(e,11)^jr(e,25)}Fr.s1_256=x8;function w8(e){return jr(e,7)^jr(e,18)^e>>>3}Fr.g0_256=w8;function S8(e){return jr(e,17)^jr(e,19)^e>>>10}Fr.g1_256=S8;var Ui=ce,k8=es,_8=Fr,Tc=Ui.rotl32,ys=Ui.sum32,P8=Ui.sum32_5,C8=_8.ft_1,zv=k8.BlockHash,M8=[1518500249,1859775393,2400959708,3395469782];function Br(){if(!(this instanceof Br))return new Br;zv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Ui.inherits(Br,zv);var E8=Br;Br.blockSize=512;Br.outSize=160;Br.hmacStrength=80;Br.padLength=64;Br.prototype._update=function(t,r){for(var n=this.W,i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=Tc(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],f=this.h[4];for(i=0;i<n.length;i++){var d=~~(i/20),y=P8(Tc(s,5),C8(d,o,a,l),f,n[i],M8[d]);f=l,l=a,a=Tc(o,30),o=s,s=y}this.h[0]=ys(this.h[0],s),this.h[1]=ys(this.h[1],o),this.h[2]=ys(this.h[2],a),this.h[3]=ys(this.h[3],l),this.h[4]=ys(this.h[4],f)};Br.prototype._digest=function(t){return t==="hex"?Ui.toHex32(this.h,"big"):Ui.split32(this.h,"big")};var Hi=ce,A8=es,rs=Fr,I8=ci,dr=Hi.sum32,R8=Hi.sum32_4,O8=Hi.sum32_5,j8=rs.ch32,N8=rs.maj32,T8=rs.s0_256,D8=rs.s1_256,B8=rs.g0_256,z8=rs.g1_256,Lv=A8.BlockHash,L8=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function zr(){if(!(this instanceof zr))return new zr;Lv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=L8,this.W=new Array(64)}Hi.inherits(zr,Lv);var $v=zr;zr.blockSize=512;zr.outSize=256;zr.hmacStrength=192;zr.padLength=64;zr.prototype._update=function(t,r){for(var n=this.W,i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=R8(z8(n[i-2]),n[i-7],B8(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],f=this.h[4],d=this.h[5],y=this.h[6],m=this.h[7];for(I8(this.k.length===n.length),i=0;i<n.length;i++){var b=O8(m,D8(f),j8(f,d,y),this.k[i],n[i]),k=dr(T8(s),N8(s,o,a));m=y,y=d,d=f,f=dr(l,b),l=a,a=o,o=s,s=dr(b,k)}this.h[0]=dr(this.h[0],s),this.h[1]=dr(this.h[1],o),this.h[2]=dr(this.h[2],a),this.h[3]=dr(this.h[3],l),this.h[4]=dr(this.h[4],f),this.h[5]=dr(this.h[5],d),this.h[6]=dr(this.h[6],y),this.h[7]=dr(this.h[7],m)};zr.prototype._digest=function(t){return t==="hex"?Hi.toHex32(this.h,"big"):Hi.split32(this.h,"big")};var of=ce,Fv=$v;function tn(){if(!(this instanceof tn))return new tn;Fv.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}of.inherits(tn,Fv);var $8=tn;tn.blockSize=512;tn.outSize=224;tn.hmacStrength=192;tn.padLength=64;tn.prototype._digest=function(t){return t==="hex"?of.toHex32(this.h.slice(0,7),"big"):of.split32(this.h.slice(0,7),"big")};var Lt=ce,F8=es,U8=ci,Nr=Lt.rotr64_hi,Tr=Lt.rotr64_lo,Uv=Lt.shr64_hi,Hv=Lt.shr64_lo,cn=Lt.sum64,Dc=Lt.sum64_hi,Bc=Lt.sum64_lo,H8=Lt.sum64_4_hi,W8=Lt.sum64_4_lo,q8=Lt.sum64_5_hi,K8=Lt.sum64_5_lo,Wv=F8.BlockHash,V8=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function kr(){if(!(this instanceof kr))return new kr;Wv.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=V8,this.W=new Array(160)}Lt.inherits(kr,Wv);var qv=kr;kr.blockSize=1024;kr.outSize=512;kr.hmacStrength=192;kr.padLength=128;kr.prototype._prepareBlock=function(t,r){for(var n=this.W,i=0;i<32;i++)n[i]=t[r+i];for(;i<n.length;i+=2){var s=i5(n[i-4],n[i-3]),o=s5(n[i-4],n[i-3]),a=n[i-14],l=n[i-13],f=r5(n[i-30],n[i-29]),d=n5(n[i-30],n[i-29]),y=n[i-32],m=n[i-31];n[i]=H8(s,o,a,l,f,d,y,m),n[i+1]=W8(s,o,a,l,f,d,y,m)}};kr.prototype._update=function(t,r){this._prepareBlock(t,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],f=this.h[5],d=this.h[6],y=this.h[7],m=this.h[8],b=this.h[9],k=this.h[10],M=this.h[11],N=this.h[12],S=this.h[13],v=this.h[14],P=this.h[15];U8(this.k.length===n.length);for(var j=0;j<n.length;j+=2){var D=v,F=P,T=e5(m,b),L=t5(m,b),V=J8(m,b,k,M,N),ee=Y8(m,b,k,M,N,S),A=this.k[j],c=this.k[j+1],h=n[j],g=n[j+1],w=q8(D,F,T,L,V,ee,A,c,h,g),C=K8(D,F,T,L,V,ee,A,c,h,g);D=Z8(i,s),F=G8(i,s),T=Q8(i,s,o,a,l),L=X8(i,s,o,a,l,f);var R=Dc(D,F,T,L),E=Bc(D,F,T,L);v=N,P=S,N=k,S=M,k=m,M=b,m=Dc(d,y,w,C),b=Bc(y,y,w,C),d=l,y=f,l=o,f=a,o=i,a=s,i=Dc(w,C,R,E),s=Bc(w,C,R,E)}cn(this.h,0,i,s),cn(this.h,2,o,a),cn(this.h,4,l,f),cn(this.h,6,d,y),cn(this.h,8,m,b),cn(this.h,10,k,M),cn(this.h,12,N,S),cn(this.h,14,v,P)};kr.prototype._digest=function(t){return t==="hex"?Lt.toHex32(this.h,"big"):Lt.split32(this.h,"big")};function J8(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function Y8(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function Q8(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function X8(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function Z8(e,t){var r=Nr(e,t,28),n=Nr(t,e,2),i=Nr(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function G8(e,t){var r=Tr(e,t,28),n=Tr(t,e,2),i=Tr(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function e5(e,t){var r=Nr(e,t,14),n=Nr(e,t,18),i=Nr(t,e,9),s=r^n^i;return s<0&&(s+=4294967296),s}function t5(e,t){var r=Tr(e,t,14),n=Tr(e,t,18),i=Tr(t,e,9),s=r^n^i;return s<0&&(s+=4294967296),s}function r5(e,t){var r=Nr(e,t,1),n=Nr(e,t,8),i=Uv(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function n5(e,t){var r=Tr(e,t,1),n=Tr(e,t,8),i=Hv(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function i5(e,t){var r=Nr(e,t,19),n=Nr(t,e,29),i=Uv(e,t,6),s=r^n^i;return s<0&&(s+=4294967296),s}function s5(e,t){var r=Tr(e,t,19),n=Tr(t,e,29),i=Hv(e,t,6),s=r^n^i;return s<0&&(s+=4294967296),s}var af=ce,Kv=qv;function rn(){if(!(this instanceof rn))return new rn;Kv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}af.inherits(rn,Kv);var o5=rn;rn.blockSize=1024;rn.outSize=384;rn.hmacStrength=192;rn.padLength=128;rn.prototype._digest=function(t){return t==="hex"?af.toHex32(this.h.slice(0,12),"big"):af.split32(this.h.slice(0,12),"big")};ts.sha1=E8;ts.sha224=$8;ts.sha256=$v;ts.sha384=o5;ts.sha512=qv;var Vv={},oi=ce,a5=es,Uo=oi.rotl32,t0=oi.sum32,ms=oi.sum32_3,r0=oi.sum32_4,Jv=a5.BlockHash;function Lr(){if(!(this instanceof Lr))return new Lr;Jv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}oi.inherits(Lr,Jv);Vv.ripemd160=Lr;Lr.blockSize=512;Lr.outSize=160;Lr.hmacStrength=192;Lr.padLength=64;Lr.prototype._update=function(t,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=n,f=i,d=s,y=o,m=a,b=0;b<80;b++){var k=t0(Uo(r0(n,n0(b,i,s,o),t[u5[b]+r],l5(b)),d5[b]),a);n=a,a=o,o=Uo(s,10),s=i,i=k,k=t0(Uo(r0(l,n0(79-b,f,d,y),t[f5[b]+r],c5(b)),h5[b]),m),l=m,m=y,y=Uo(d,10),d=f,f=k}k=ms(this.h[1],s,y),this.h[1]=ms(this.h[2],o,m),this.h[2]=ms(this.h[3],a,l),this.h[3]=ms(this.h[4],n,f),this.h[4]=ms(this.h[0],i,d),this.h[0]=k};Lr.prototype._digest=function(t){return t==="hex"?oi.toHex32(this.h,"little"):oi.split32(this.h,"little")};function n0(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function l5(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function c5(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var u5=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f5=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d5=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h5=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p5=ce,y5=ci;function Wi(e,t,r){if(!(this instanceof Wi))return new Wi(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(p5.toArray(t,r))}var m5=Wi;Wi.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),y5(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=new this.Hash().update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=new this.Hash().update(t)};Wi.prototype.update=function(t,r){return this.inner.update(t,r),this};Wi.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};(function(e){var t=e;t.utils=ce,t.common=es,t.sha=ts,t.ripemd=Vv,t.hmac=m5,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160})(kl);var zc,i0;function v5(){return i0||(i0=1,zc={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),zc}(function(e){var t=e,r=kl,n=Fd,i=Xt,s=i.assert;function o(f){f.type==="short"?this.curve=new n.short(f):f.type==="edwards"?this.curve=new n.edwards(f):this.curve=new n.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=o;function a(f,d){Object.defineProperty(t,f,{configurable:!0,enumerable:!0,get:function(){var y=new o(d);return Object.defineProperty(t,f,{configurable:!0,enumerable:!0,value:y}),y}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var l;try{l=v5()}catch{l=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",l]})})(Sl);var g5=kl,Zn=Ld,Yv=ci;function On(e){if(!(this instanceof On))return new On(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Zn.toArray(e.entropy,e.entropyEnc||"hex"),r=Zn.toArray(e.nonce,e.nonceEnc||"hex"),n=Zn.toArray(e.pers,e.persEnc||"hex");Yv(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var b5=On;On.prototype._init=function(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};On.prototype._hmac=function(){return new g5.hmac(this.hash,this.K)};On.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};On.prototype.reseed=function(t,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),t=Zn.toArray(t,r),n=Zn.toArray(n,i),Yv(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1};On.prototype.generate=function(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Zn.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,t);return this._update(n),this._reseed++,Zn.encode(o,r)};var x5=on,w5=Xt,lf=w5.assert;function kt(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var S5=kt;kt.fromPublic=function(t,r,n){return r instanceof kt?r:new kt(t,{pub:r,pubEnc:n})};kt.fromPrivate=function(t,r,n){return r instanceof kt?r:new kt(t,{priv:r,privEnc:n})};kt.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};kt.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};kt.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};kt.prototype._importPrivate=function(t,r){this.priv=new x5(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};kt.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?lf(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&lf(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};kt.prototype.derive=function(t){return t.validate()||lf(t.validate(),"public point not validated"),t.mul(this.priv).getX()};kt.prototype.sign=function(t,r,n){return this.ec.sign(t,this,r,n)};kt.prototype.verify=function(t,r,n){return this.ec.verify(t,r,this,void 0,n)};kt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Fa=on,Hd=Xt,k5=Hd.assert;function Pl(e,t){if(e instanceof Pl)return e;this._importDER(e,t)||(k5(e.r&&e.s,"Signature without r or s"),this.r=new Fa(e.r,16),this.s=new Fa(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var _5=Pl;function P5(){this.place=0}function Lc(e,t){var r=e[t.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||e[t.place]===0)return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return i<=127?!1:(t.place=o,i)}function s0(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}Pl.prototype._importDER=function(t,r){t=Hd.toArray(t,r);var n=new P5;if(t[n.place++]!==48)return!1;var i=Lc(t,n);if(i===!1||i+n.place!==t.length||t[n.place++]!==2)return!1;var s=Lc(t,n);if(s===!1||t[n.place]&128)return!1;var o=t.slice(n.place,s+n.place);if(n.place+=s,t[n.place++]!==2)return!1;var a=Lc(t,n);if(a===!1||t.length!==a+n.place||t[n.place]&128)return!1;var l=t.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new Fa(o),this.s=new Fa(l),this.recoveryParam=null,!0};function $c(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}Pl.prototype.toDER=function(t){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=s0(r),n=s0(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];$c(i,r.length),i=i.concat(r),i.push(2),$c(i,n.length);var s=i.concat(n),o=[48];return $c(o,s.length),o=o.concat(s),Hd.encode(o,t)};var br=on,Qv=b5,C5=Xt,Fc=Sl,M5=Av,Kn=C5.assert,Wd=S5,Cl=_5;function or(e){if(!(this instanceof or))return new or(e);typeof e=="string"&&(Kn(Object.prototype.hasOwnProperty.call(Fc,e),"Unknown curve "+e),e=Fc[e]),e instanceof Fc.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var E5=or;or.prototype.keyPair=function(t){return new Wd(this,t)};or.prototype.keyFromPrivate=function(t,r){return Wd.fromPrivate(this,t,r)};or.prototype.keyFromPublic=function(t,r){return Wd.fromPublic(this,t,r)};or.prototype.genKeyPair=function(t){t||(t={});for(var r=new Qv({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||M5(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new br(2));;){var s=new br(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};or.prototype._truncateToN=function(t,r,n){var i;if(br.isBN(t)||typeof t=="number")t=new br(t,16),i=t.byteLength();else if(typeof t=="object")i=t.length,t=new br(t,16);else{var s=t.toString();i=s.length+1>>>1,t=new br(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(t=t.ushrn(o)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};or.prototype.sign=function(t,r,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof t!="string"&&typeof t!="number"&&!br.isBN(t)){Kn(typeof t=="object"&&t&&typeof t.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Kn(t.length>>>0===t.length);for(var s=0;s<t.length;s++)Kn((t[s]&255)===t[s])}r=this.keyFromPrivate(r,n),t=this._truncateToN(t,!1,i.msgBitLength),Kn(!t.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),l=t.toArray("be",o);Kn(new br(l).eq(t),"Can not sign message");for(var f=new Qv({hash:this.hash,entropy:a,nonce:l,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new br(1)),y=0;;y++){var m=i.k?i.k(y):new br(f.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(d)>=0)){var b=this.g.mul(m);if(!b.isInfinity()){var k=b.getX(),M=k.umod(this.n);if(M.cmpn(0)!==0){var N=m.invm(this.n).mul(M.mul(r.getPrivate()).iadd(t));if(N=N.umod(this.n),N.cmpn(0)!==0){var S=(b.getY().isOdd()?1:0)|(k.cmp(M)!==0?2:0);return i.canonical&&N.cmp(this.nh)>0&&(N=this.n.sub(N),S^=1),new Cl({r:M,s:N,recoveryParam:S})}}}}}};or.prototype.verify=function(t,r,n,i,s){s||(s={}),t=this._truncateToN(t,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new Cl(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var l=a.invm(this.n),f=l.mul(t).umod(this.n),d=l.mul(o).umod(this.n),y;return this.curve._maxwellTrick?(y=this.g.jmulAdd(f,n.getPublic(),d),y.isInfinity()?!1:y.eqXToP(o)):(y=this.g.mulAdd(f,n.getPublic(),d),y.isInfinity()?!1:y.getX().umod(this.n).cmp(o)===0)};or.prototype.recoverPubKey=function(e,t,r,n){Kn((3&r)===r,"The recovery param is more than two bits"),t=new Cl(t,n);var i=this.n,s=new br(e),o=t.r,a=t.s,l=r&1,f=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var d=t.r.invm(i),y=i.sub(s).mul(d).umod(i),m=a.mul(d).umod(i);return this.g.mulAdd(y,o,m)};or.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new Cl(t,n),t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var yo=Xt,Xv=yo.assert,o0=yo.parseBytes,ns=yo.cachedProperty;function lt(e,t){this.eddsa=e,this._secret=o0(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=o0(t.pub)}lt.fromPublic=function(t,r){return r instanceof lt?r:new lt(t,{pub:r})};lt.fromSecret=function(t,r){return r instanceof lt?r:new lt(t,{secret:r})};lt.prototype.secret=function(){return this._secret};ns(lt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});ns(lt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});ns(lt,"privBytes",function(){var t=this.eddsa,r=this.hash(),n=t.encodingLength-1,i=r.slice(0,t.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});ns(lt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});ns(lt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});ns(lt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});lt.prototype.sign=function(t){return Xv(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)};lt.prototype.verify=function(t,r){return this.eddsa.verify(t,r,this)};lt.prototype.getSecret=function(t){return Xv(this._secret,"KeyPair is public only"),yo.encode(this.secret(),t)};lt.prototype.getPublic=function(t){return yo.encode(this.pubBytes(),t)};var A5=lt,I5=on,Ml=Xt,a0=Ml.assert,El=Ml.cachedProperty,R5=Ml.parseBytes;function ui(e,t){this.eddsa=e,typeof t!="object"&&(t=R5(t)),Array.isArray(t)&&(a0(t.length===e.encodingLength*2,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a0(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof I5&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}El(ui,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});El(ui,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});El(ui,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});El(ui,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});ui.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ui.prototype.toHex=function(){return Ml.encode(this.toBytes(),"hex").toUpperCase()};var O5=ui,j5=kl,N5=Sl,qi=Xt,T5=qi.assert,Zv=qi.parseBytes,Gv=A5,l0=O5;function $t(e){if(T5(e==="ed25519","only tested with ed25519 so far"),!(this instanceof $t))return new $t(e);e=N5[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=j5.sha512}var D5=$t;$t.prototype.sign=function(t,r){t=Zv(t);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),t),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),t).mul(n.priv()),l=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:l,Rencoded:o})};$t.prototype.verify=function(t,r,n){if(t=Zv(t),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),t),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};$t.prototype.hashInt=function(){for(var t=this.hash(),r=0;r<arguments.length;r++)t.update(arguments[r]);return qi.intFromLE(t.digest()).umod(this.curve.n)};$t.prototype.keyFromPublic=function(t){return Gv.fromPublic(this,t)};$t.prototype.keyFromSecret=function(t){return Gv.fromSecret(this,t)};$t.prototype.makeSignature=function(t){return t instanceof l0?t:new l0(this,t)};$t.prototype.encodePoint=function(t){var r=t.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=t.getX().isOdd()?128:0,r};$t.prototype.decodePoint=function(t){t=qi.parseBytes(t);var r=t.length-1,n=t.slice(0,r).concat(t[r]&-129),i=(t[r]&128)!==0,s=qi.intFromLE(n);return this.curve.pointFromY(s,i)};$t.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)};$t.prototype.decodeInt=function(t){return qi.intFromLE(t)};$t.prototype.isPoint=function(t){return t instanceof this.pointClass};(function(e){var t=e;t.version=j6.version,t.utils=Xt,t.rand=Av,t.curve=Fd,t.curves=Sl,t.ec=E5,t.eddsa=D5})(Cv);const En=new Cv.ec("secp256k1");function eg(e){let t;return e?t=En.keyFromPrivate(e):t=En.genKeyPair(),{publicKey:t.getPublic("hex"),privateKey:t.getPrivate("hex")}}function qd(e,t){const r=En.keyFromPrivate(t,"hex");let n,i;return typeof e=="string"?(n=Kd(e),i=0):(n=En.curve.decodePoint(e.ciphertext,"hex"),i=e.layers),{ciphertext:n.mul(r.getPrivate()).encode("hex",!1),layers:i+1}}function Al(e,t){if(e.layers===0)throw new Error("Cannot decrypt a plaintext card");const r=En.keyFromPrivate(t,"hex"),n=En.curve.decodePoint(e.ciphertext,"hex"),i=r.getPrivate().invm(En.curve.n);return{ciphertext:n.mul(i).encode("hex",!1),layers:e.layers-1}}function Kd(e){const r=new TextEncoder().encode(e);for(let n=0;n<256;n++){const i=new Uint8Array(r.length+1);i.set(r),i[r.length]=n;const s=z5(i),o=B5(s);try{const a=En.curve.pointFromX(o,!1);if(a&&a.validate())return a}catch{continue}}throw new Error(`Failed to hash card ID to curve point: ${e}`)}function tg(e){return Kd(e).encode("hex",!1)}function rg(e,t){return e.map(r=>qd(r,t))}function ng(e,t){return e.map(r=>qd(r,t))}function B5(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function z5(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e[n]|0;const r=new Uint8Array(32);for(let n=0;n<32;n++)t=(t*1103515245+12345|0)>>>0,r[n]=t&255;return r}const L5=Object.freeze(Object.defineProperty({__proto__:null,decrypt:Al,encrypt:qd,encryptDeck:rg,generateKeyPair:eg,getCardPoint:tg,hashToPoint:Kd,reencryptDeck:ng},Symbol.toStringTag,{value:"Module"}));function $5(e){const t=Array.from({length:e},(r,n)=>n);for(let r=e-1;r>0;r--){const n=new Uint8Array(4);crypto.getRandomValues(n);const i=(n[0]|n[1]<<8|n[2]<<16)%(r+1);[t[r],t[i]]=[t[i],t[r]]}return t}function F5(e,t){if(e.length!==t.length)throw new Error("Deck and permutation must have same length");const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[t[n]];return r}function U5(e){const t=$5(e.length);return F5(e,t)}function ig(e){return e.playerOrder[e.setupPlayerIndex]}function sg(e){return e.setupPlayerIndex++,e.setupPlayerIndex>=e.playerOrder.length}function Vd(e){e.setupPlayerIndex=0}function Jd(e){var k,M,N;const t={...cv,...e.options},r=((k=e.options)==null?void 0:k.initialBalances)||{},n=((M=e.options)==null?void 0:M.handId)||`hand-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,i=((N=e.options)==null?void 0:N.dealerIndex)||0,s=Jx(),o={},a={},l={},f={deck:{shared:[]},hand:{},community:{shared:[]},discard:{shared:[]},mucked:{shared:[]}};for(const S of e.playerIDs){const v=r[S]??t.startingChips;a[S]=v,l[S]=0,o[S]={hand:[],chips:v,bet:0,folded:!1,hasActed:!1,isAllIn:!1,publicKey:null,hasEncrypted:!1,hasShuffled:!1,hasPeeked:!1,peekedCards:[],hasReleasedKey:!1,hasDistributedShares:!1,isConnected:!0,lastHeartbeat:Date.now()},f.hand[S]=[]}const d=[...e.playerIDs],y=d[i%d.length],m={phase:"init",publicKeys:{},commitments:{},shuffleProofs:{},encryptedZones:{},cardPointLookup:{},revealedCards:{},pendingReveals:{}},b={community:[],pot:0,sidePots:[],players:o,dealer:y,smallBlind:d.length>2?d[1]:d[0],bigBlind:d.length>2?d[2]:d[1],phase:"keyExchange",bettingRound:{currentBet:0,minRaise:t.bigBlind,activePlayer:"",actedPlayers:[],isComplete:!1,lastAggressor:null},smallBlindAmount:t.smallBlind,bigBlindAmount:t.bigBlind,playerOrder:d,winners:[],zones:f,crypto:m,cardIds:s,setupPlayerIndex:0,handId:n,contributions:l,startingChips:a,releasedKeys:{},keyEscrowShares:{},escrowThreshold:Math.max(2,d.length-1),disconnectedPlayers:[],peekNotifications:[],decryptRequests:[],decryptNotifications:[]};return b.smallBlind=Dd(b),b.bigBlind=Bd(b),b}function c0(e,t,r,n){var o;if(console.log("[CryptoPoker] submitPublicKey called for player",r,"phase:",e.phase,"existing key:",(o=e.players[r])==null?void 0:o.publicKey),e.phase!=="keyExchange")return console.log("[CryptoPoker] submitPublicKey INVALID_MOVE: not in keyExchange phase"),q;const i=e.players[r];if(!i||i.publicKey)return q;if(i.publicKey=n,e.crypto.publicKeys[r]=n,e.playerOrder.every(a=>e.players[a].publicKey!==null)){for(const a of e.cardIds)e.crypto.cardPointLookup[a]=tg(a);console.log("[CryptoPoker] Built card point lookup with",Object.keys(e.crypto.cardPointLookup).length,"cards"),e.phase="keyEscrow",Vd(e)}return e}function u0(e,t,r,n,i){if(e.phase!=="keyEscrow")return q;const s=e.players[r];return!s||s.hasDistributedShares?q:(e.keyEscrowShares[r]=i,s.hasDistributedShares=!0,e.crypto.privateKeys||(e.crypto.privateKeys={}),e.crypto.privateKeys[r]=n,e.playerOrder.every(a=>e.players[a].hasDistributedShares)&&(e.phase="encrypt",Vd(e)),e)}function f0(e,t,r,n){var a,l,f;if(e.phase!=="encrypt")return q;const i=ig(e);if(r!==i)return q;const s=e.players[r];if(s.hasEncrypted)return q;const o=e.crypto.encryptedZones.deck;if(!o||o.length===0){const d=e.cardIds;console.log("[CryptoPoker] First encryption by player",r,"- encrypting",d.length,"cards");const y=rg(d,n);e.crypto.encryptedZones.deck=y,console.log("[CryptoPoker] Encrypted deck has",y.length,"cards with",(a=y[0])==null?void 0:a.layers,"layers")}else{console.log("[CryptoPoker] Re-encryption by player",r,"- current layers:",(l=o[0])==null?void 0:l.layers);const d=ng(o,n);e.crypto.encryptedZones.deck=d,console.log("[CryptoPoker] Re-encrypted deck has",d.length,"cards with",(f=d[0])==null?void 0:f.layers,"layers")}return e.crypto.phase="encrypt",s.hasEncrypted=!0,sg(e)&&(e.phase="shuffle",Vd(e)),e}function d0(e,t,r,n,i){if(e.phase!=="shuffle")return q;const s=ig(e);if(r!==s)return q;const o=e.players[r];if(o.hasShuffled)return q;const a=e.crypto.encryptedZones.deck;if(!a||a.length===0)return console.error("[CryptoPoker] No encrypted deck to shuffle!"),q;console.log("[CryptoPoker] Shuffling deck for player",r,"- deck has",a.length,"cards");const l=U5(a);if(e.crypto.encryptedZones.deck=l,console.log("[CryptoPoker] Deck shuffled by player",r),e.crypto.phase="shuffle",o.hasShuffled=!0,sg(e)){e.crypto.phase="ready",H5(e),e.phase="preflop",kv(e);const f=wv(e);e.bettingRound=ml(e,f),e.bettingRound.currentBet=e.bigBlindAmount;const d=t.phase==="setup";console.log("[CryptoPoker] Shuffle complete. ctx.phase:",t.phase,"isInSetupPhase:",d),d&&(i!=null&&i.endPhase)?(console.log("[CryptoPoker] Ending setup phase, transitioning to play"),i.endPhase(),console.log("[CryptoPoker] Called events.endPhase()")):console.warn("[CryptoPoker] events.endPhase not available!")}return e}function H5(e){const t=e.crypto.encryptedZones.deck;if(!t||t.length===0){console.error("[CryptoPoker] No deck to deal from!");return}console.log("[CryptoPoker] Dealing hole cards to",e.playerOrder.length,"players");for(let r=0;r<2;r++)for(const n of e.playerOrder){const i=`hand:${n}`;e.crypto.encryptedZones[i]||(e.crypto.encryptedZones[i]=[]);const s=t.shift();s&&e.crypto.encryptedZones[i].push(s)}console.log("[CryptoPoker] Dealt cards. Deck remaining:",t.length)}function Uc(e,t){const r=e.crypto.encryptedZones.deck;if(!r||r.length<t){console.error("[CryptoPoker] Not enough cards in deck to deal community cards!");return}e.crypto.encryptedZones.community||(e.crypto.encryptedZones.community=[]),console.log("[CryptoPoker] Dealing",t,"community cards");for(let n=0;n<t;n++){const i=r.shift();if(i){e.crypto.encryptedZones.community.push(i);const s=W5(e,i);s?(e.community.push(Qd(s)),console.log("[CryptoPoker] Revealed community card:",s)):(e.community.push({id:`community-${e.community.length}`,rank:"?",suit:"spades"}),console.log("[CryptoPoker] Added placeholder community card (not yet revealed)"))}}console.log("[CryptoPoker] Community cards:",e.community.length,", Deck remaining:",r.length)}function W5(e,t){const r=[];if(e.crypto.privateKeys)for(const i of Object.values(e.crypto.privateKeys))i&&r.push(i);if(r.length===0)return console.log("[CryptoPoker] No private keys available for community card decryption"),null;let n={...t};for(const i of r)if(n.layers>0)try{n=Al(n,i)}catch(s){console.error("[CryptoPoker] Community card decryption failed:",s)}return n.layers===0?Yd(e.crypto.cardPointLookup,n.ciphertext):null}function q5(e,t,r,n){if(!["preflop","flop","turn","river"].includes(e.phase))return q;const i=e.players[r];if(!i||i.hasPeeked||i.folded)return q;const s=e.crypto.encryptedZones[`hand:${r}`];if(!s||s.length===0)return console.error("[CryptoPoker] No encrypted cards in hand zone for player",r),q;const o=[];if(o.push(n),e.crypto.privateKeys)for(const[l,f]of Object.entries(e.crypto.privateKeys))l!==r&&f&&o.push(f);console.log("[CryptoPoker] Peeking with",o.length,"private keys");const a=[];for(const l of s){let f={...l};for(const d of o)if(f.layers>0)try{f=Al(f,d),console.log("[CryptoPoker] Decrypted one layer, remaining:",f.layers)}catch(y){console.error("[CryptoPoker] Decryption failed with key:",y)}if(f.layers===0){const d=Yd(e.crypto.cardPointLookup,f.ciphertext);d?(console.log("[CryptoPoker] Decrypted card:",d),a.push(Qd(d))):(console.error("[CryptoPoker] Could not find card for point:",f.ciphertext),a.push({id:"unknown",rank:"?",suit:"spades"}))}else console.log("[CryptoPoker] Card still has",f.layers,"encryption layers remaining"),a.push({id:"unknown",rank:"?",suit:"spades"})}return console.log("[CryptoPoker] Player",r,"peeked at cards:",a.map(l=>`${l.rank}${l.suit[0]}`)),i.peekedCards=a,i.hasPeeked=!0,e.peekNotifications.push({playerId:r,timestamp:Date.now()}),e}function Yd(e,t){for(const[r,n]of Object.entries(e))if(n===t)return r;return null}function Qd(e){const t=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],r=["hearts","diamonds","clubs","spades"],n=e.split("-");if(n.length!==2)return console.error("[CryptoPoker] Invalid card ID format:",e),{id:e,rank:"?",suit:"spades"};const[i,s]=n;return r.includes(i)?t.includes(s)?{id:e,rank:s,suit:i}:(console.error("[CryptoPoker] Invalid rank in card ID:",s),{id:e,rank:s,suit:i}):(console.error("[CryptoPoker] Invalid suit in card ID:",i),{id:e,rank:s,suit:"spades"})}function K5(e,t,r,n,i){if(!["preflop","flop","turn","river"].includes(e.phase))return q;const s=e.players[r];if(!s||s.folded||e.decryptRequests.find(y=>y.zoneId===n&&y.requestingPlayer===r&&y.status==="pending"))return q;const a=`decrypt-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,l={};for(const y of e.playerOrder)l[y]=y===r;const f={id:a,requestingPlayer:r,zoneId:n,cardIndices:i,timestamp:Date.now(),status:"pending",approvals:l,decryptionShares:{}};e.decryptRequests.push(f);const d={type:"request",requestId:a,playerId:r,message:`Player ${r} requests to reveal their cards`,timestamp:Date.now()};return e.decryptNotifications.push(d),console.log("[CryptoPoker] Decrypt request created:",a,"for zone:",n),e}function V5(e,t,r,n,i){if(!e.players[r])return q;const o=e.decryptRequests.find(f=>f.id===n);if(!o)return console.error("[CryptoPoker] Decrypt request not found:",n),q;if(o.status!=="pending")return console.error("[CryptoPoker] Request is not pending:",o.status),q;if(o.approvals[r])return console.log("[CryptoPoker] Player",r,"already approved request",n),q;o.approvals[r]=!0,o.decryptionShares[r]||(o.decryptionShares[r]=[]),o.decryptionShares[r].push(i);const a={type:"approval",requestId:n,playerId:r,message:`Player ${r} approved the decrypt request`,timestamp:Date.now()};if(e.decryptNotifications.push(a),console.log("[CryptoPoker] Player",r,"approved decrypt request",n),e.playerOrder.every(f=>o.approvals[f])){console.log("[CryptoPoker] All players approved! Completing decryption..."),o.status="completed";const f=e.players[o.requestingPlayer],d=e.crypto.encryptedZones[o.zoneId];if(d&&f&&!f.hasPeeked){const m=[];for(const[k,M]of Object.entries(o.decryptionShares))m.push(...M);if(e.crypto.privateKeys)for(const k of Object.values(e.crypto.privateKeys))k&&!m.includes(k)&&m.push(k);const b=[];for(const k of d){let M={...k};for(const N of m)if(M.layers>0)try{M=Al(M,N)}catch(S){console.error("[CryptoPoker] Decryption failed:",S)}if(M.layers===0){const N=Yd(e.crypto.cardPointLookup,M.ciphertext);N?b.push(Qd(N)):b.push({id:"unknown",rank:"?",suit:"spades"})}else b.push({id:"unknown",rank:"?",suit:"spades"})}f.peekedCards=b,f.hasPeeked=!0,console.log("[CryptoPoker] Cooperative decryption complete for player",o.requestingPlayer)}const y={type:"completed",requestId:n,playerId:o.requestingPlayer,message:`Cards revealed for Player ${o.requestingPlayer}`,timestamp:Date.now()};e.decryptNotifications.push(y),e.peekNotifications.push({playerId:o.requestingPlayer,timestamp:Date.now()})}return e}function J5(e,t,r,n){return n<0||n>=e.decryptNotifications.length?q:(e.decryptNotifications.splice(n,1),e)}function Y5(e,t,r,n,i,s){return e.players[r]?e:q}function Q5(e,t,r,n){const i=e.players[r];return!i||!i.folded||i.hasReleasedKey?q:(e.releasedKeys[r]=n,i.hasReleasedKey=!0,e)}function X5(e,t,r,n){const i=e.players[r];return!i||!i.folded||i.hasReleasedKey?q:e}function Z5(e,t,r){const n=r??t.currentPlayer;if(e.bettingRound.activePlayer!==n||!yv(e,n).valid)return q;const s=ar(e,n);return s&&!Bn(e)?e.bettingRound.activePlayer=s:mo(e),e}function G5(e,t,r){const n=r??t.currentPlayer;if(e.bettingRound.activePlayer!==n||!mv(e,n).valid)return q;const s=ar(e,n);return s&&!Bn(e)?e.bettingRound.activePlayer=s:mo(e),e}function ew(e,t,r){const n=r??t.currentPlayer;if(e.bettingRound.activePlayer!==n||!vv(e,n).valid)return q;const s=ar(e,n);return s&&!Bn(e)?e.bettingRound.activePlayer=s:mo(e),e}function tw(e,t,r,n){const i=n??t.currentPlayer;if(e.bettingRound.activePlayer!==i||!gv(e,i,r).valid)return q;const o=ar(e,i);return o&&(e.bettingRound.activePlayer=o),e}function rw(e,t,r,n){const i=n??t.currentPlayer;if(e.bettingRound.activePlayer!==i||!bv(e,i,r).valid)return q;const o=ar(e,i);return o&&(e.bettingRound.activePlayer=o),e}function nw(e,t,r){const n=r??t.currentPlayer;if(e.bettingRound.activePlayer!==n||!xv(e,n).valid)return q;const s=ar(e,n);return s&&!Bn(e)?e.bettingRound.activePlayer=s:mo(e),e}function mo(e){for(const i of Object.values(e.players))i.bet=0,i.hasActed=!1;if(pv(e)===1){e.phase="showdown",h0(e);return}const t=["keyExchange","keyEscrow","encrypt","shuffle","preflop","flop","turn","river","showdown","gameOver"],r=t.indexOf(e.phase),n=t[r+1];if(!n){e.phase="gameOver";return}switch(n){case"flop":Uc(e,3),e.phase="flop";break;case"turn":Uc(e,1),e.phase="turn";break;case"river":Uc(e,1),e.phase="river";break;case"showdown":h0(e);return;default:e.phase=n}if(["flop","turn","river"].includes(n)){const i=Sv(e);i?e.bettingRound=ml(e,i):mo(e)}}function h0(e){e.phase="showdown";const t=hv(e);if(t.length===1){const o=t[0];e.players[o].chips+=e.pot,e.winners=[o],e.phase="gameOver";return}const r=[];for(const o of t){const l=e.players[o].peekedCards;if(!l||l.length===0){console.warn("[CryptoPoker] Player",o,"has no peeked cards at showdown");continue}const f=dv(l,e.community);r.push({playerId:o,hand:f}),console.log("[CryptoPoker] Player",o,"best hand:",f.description)}if(r.length===0){console.error("[CryptoPoker] No valid hands at showdown!"),e.phase="gameOver";return}let n=[];r.sort((o,a)=>{if(o.hand.rank!==a.hand.rank)return a.hand.rank-o.hand.rank;for(let l=0;l<o.hand.values.length;l++)if(o.hand.values[l]!==a.hand.values[l])return a.hand.values[l]-o.hand.values[l];return 0});const i=r[0].hand;n=r.filter(o=>{if(o.hand.rank!==i.rank)return!1;for(let a=0;a<o.hand.values.length;a++)if(o.hand.values[a]!==i.values[a])return!1;return!0}).map(o=>o.playerId),console.log("[CryptoPoker] Winner(s):",n,"with",i.description);const s=Math.floor(e.pot/n.length);for(const o of n)e.players[o].chips+=s;e.winners=n,e.pot=0,e.phase="gameOver"}const iw={name:"crypto-poker",setup:e=>Jd({numPlayers:e.numPlayers??2,playerIDs:e.playOrder??["0","1"]}),turn:{order:{first:()=>0,next:({G:e})=>{if(["keyExchange","keyEscrow","encrypt","shuffle"].includes(e.phase))return e.setupPlayerIndex%e.playerOrder.length;const t=e.playerOrder.indexOf(e.bettingRound.activePlayer);return t>=0?t:0}}},phases:{setup:{start:!0,moves:{submitPublicKey:{move:({G:e,ctx:t},r,n)=>c0(e,t,r,n),client:!1},distributeKeyShares:{move:({G:e,ctx:t},r,n,i)=>u0(e,t,r,n,i),client:!1},encryptDeck:{move:({G:e,ctx:t},r,n)=>f0(e,t,r,n),client:!1},shuffleDeck:{move:({G:e,ctx:t,events:r},n,i)=>d0(e,t,n,i,r),client:!1}},next:"play",endIf:({G:e})=>e.phase==="preflop"},play:{moves:{submitPublicKey:{move:({G:e,ctx:t},r,n)=>c0(e,t,r,n),client:!1},distributeKeyShares:{move:({G:e,ctx:t},r,n,i)=>u0(e,t,r,n,i),client:!1},encryptDeck:{move:({G:e,ctx:t},r,n)=>f0(e,t,r,n),client:!1},shuffleDeck:{move:({G:e,ctx:t,events:r},n,i)=>d0(e,t,n,i,r),client:!1},peekHoleCards:{move:({G:e,ctx:t},r,n)=>q5(e,t,r,n),client:!1},submitDecryptionShare:{move:({G:e,ctx:t},r,n,i,s)=>Y5(e,t,r),client:!1},requestDecrypt:{move:({G:e,ctx:t},r,n,i)=>K5(e,t,r,n,i),client:!1},approveDecrypt:{move:({G:e,ctx:t},r,n,i)=>V5(e,t,r,n,i),client:!1},dismissNotification:{move:({G:e,ctx:t},r,n)=>J5(e,t,r,n),client:!1},fold:{move:({G:e,ctx:t},r)=>Z5(e,t,r),client:!1},check:{move:({G:e,ctx:t},r)=>G5(e,t,r),client:!1},call:{move:({G:e,ctx:t},r)=>ew(e,t,r),client:!1},bet:{move:({G:e,ctx:t},r,n)=>tw(e,t,r,n),client:!1},raise:{move:({G:e,ctx:t},r,n)=>rw(e,t,r,n),client:!1},allIn:{move:({G:e,ctx:t},r)=>nw(e,t,r),client:!1},releaseKey:{move:({G:e,ctx:t},r,n)=>Q5(e,t,r,n),client:!1},showHand:{move:({G:e,ctx:t},r,n)=>X5(e,t,r),client:!1}}}},endIf:({G:e})=>{if(e.phase==="voided")return{draw:!0,reason:"voided",handResult:p0(e)};if(e.phase==="gameOver")return{winners:e.winners,handResult:p0(e)}}};function p0(e){const t={};for(const[i,s]of Object.entries(e.players))t[i]=e.startingChips[i]-s.chips;const r={},n=Object.values(t).reduce((i,s)=>i+s,0);for(const i of Object.keys(e.players))r[i]=0;if(e.winners.length>0){const i=Math.floor(n/e.winners.length),s=n%e.winners.length;for(let o=0;o<e.winners.length;o++)r[e.winners[o]]=i+(o<s?1:0)}return{handId:e.handId,winners:e.winners,payouts:r,contributions:t,totalPot:n,timestamp:Date.now()}}const sw={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13,A:14};function y0(e){return sw[e.rank]}function ow(e,t){return y0(e)-y0(t)}const aw=["hearts","diamonds","clubs","spades"],lw=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],cw=3;function uw(){const e=[];for(const t of aw)for(const r of lw)e.push({id:`${t}-${r}`,name:`${r} of ${t}`,suit:t,rank:r});return e}function Xd(e){const t=e.slice();for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}function fw(e){const t=Xd(uw()),r=Math.floor(t.length/2),n={},i={deck:{},played:{},won:{}};return e.playerIDs.forEach((s,o)=>{const a=o*r,l=t.slice(a,a+r);n[s]={deck:l,played:[],won:[]},i.deck[s]=l,i.played[s]=[],i.won[s]=[]}),{players:n,warInProgress:!1,winner:null,phase:"flip",zones:i}}function Zd(e){for(const t of Object.keys(e.players))e.zones.deck[t]=e.players[t].deck,e.zones.played[t]=e.players[t].played,e.zones.won[t]=e.players[t].won}function dw(e){return e.deck.length+e.played.length+e.won.length}function hw(e){const t=Object.keys(e.players);for(const r of t){const n=dw(e.players[r]);if(n===52)return r;if(n===0)return t.find(i=>i!==r)||null}return null}function og(e){return Object.values(e.players).every(t=>t.played.length>0)}function Ua(e){e.deck.length===0&&e.won.length>0&&(e.deck=Xd(e.won),e.won=[])}function pw(e,t,r){const n=r??t.currentPlayer,i=e.players[n];if(!i||i.played.length>0&&!e.warInProgress||(Ua(i),i.deck.length===0))return q;const s=i.deck.shift();return i.played.push(s),Zd(e),og(e)&&(e.phase="resolve"),e}function yw(e,t,r){const n=r??t.currentPlayer,i=e.players[n];if(!i||!e.warInProgress)return q;Ua(i);const s=Math.min(cw,i.deck.length);for(let o=0;o<s;o++){const a=i.deck.shift();i.played.push(a)}return Zd(e),e}function mw(e,t){if(!og(e))return q;const r=Object.keys(e.players),[n,i]=r,s=e.players[n],o=e.players[i],a=s.played[s.played.length-1],l=o.played[o.played.length-1];if(!a||!l)return q;const f=ow(a,l),d=[...s.played,...o.played];if(f===0)e.warInProgress=!0,e.phase="flip",Ua(s),Ua(o),s.deck.length===0&&s.won.length===0?(e.winner=i,e.phase="gameOver"):o.deck.length===0&&o.won.length===0&&(e.winner=n,e.phase="gameOver");else{const y=f>0?n:i;e.players[y].won.push(...Xd(d)),s.played=[],o.played=[],e.warInProgress=!1,e.phase="flip";const b=hw(e);b&&(e.winner=b,e.phase="gameOver")}return Zd(e),e}const vw={name:"war",setup:e=>fw({numPlayers:e.numPlayers??2,playerIDs:e.playOrder??["0","1"]}),turn:{activePlayers:{all:"play"}},phases:{play:{start:!0,moves:{flipCard:{move:({G:e,ctx:t},r)=>pw(e,t,r),client:!1},placeWarCards:{move:({G:e,ctx:t},r)=>yw(e,t,r),client:!1},resolveRound:{move:({G:e,ctx:t})=>mw(e),client:!1}}}},endIf:({G:e})=>{if(e.winner)return{winner:e.winner}}},ag=[{id:"poker",name:"Texas Hold'em",description:"Classic poker with betting rounds. Bluff, bet, and win the pot!",minPlayers:2,maxPlayers:6,getGame:()=>_6,getCryptoGame:()=>iw},{id:"war",name:"War",description:"Classic card battle. Flip cards and capture your opponent's deck!",minPlayers:2,maxPlayers:2,getGame:()=>vw},{id:"simple",name:"Simple Card Game",description:"Draw and play cards. First to play 5 cards wins!",minPlayers:2,maxPlayers:2,getGame:()=>Wx}];function gw(e){return ag.find(t=>t.id===e)}const bw=({game:e,onClick:t})=>{const r=n=>{switch(n){case"poker":return"";case"war":return"";case"simple":return"";default:return""}};return p.jsxs("button",{onClick:t,style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"24px",backgroundColor:"#16213e",border:"2px solid #3a3a5c",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",minWidth:"200px",textAlign:"center"},onMouseEnter:n=>{n.currentTarget.style.borderColor="#4CAF50",n.currentTarget.style.transform="translateY(-4px)",n.currentTarget.style.boxShadow="0 8px 16px rgba(0,0,0,0.3)"},onMouseLeave:n=>{n.currentTarget.style.borderColor="#3a3a5c",n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="none"},children:[p.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:r(e.id)}),p.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#e4e4e4",marginBottom:"8px"},children:e.name}),p.jsx("div",{style:{fontSize:"14px",color:"#a0a0a0",marginBottom:"12px",lineHeight:"1.4"},children:e.description}),p.jsx("div",{style:{fontSize:"12px",color:"#6a8a9a",padding:"4px 12px",backgroundColor:"#0f3460",borderRadius:"12px"},children:e.minPlayers===e.maxPlayers?`${e.minPlayers} players`:`${e.minPlayers}-${e.maxPlayers} players`})]})},m0=({onSelectGame:e,onBack:t})=>p.jsxs("div",{style:{padding:"40px",maxWidth:"900px",margin:"0 auto",fontFamily:"system-ui, sans-serif",textAlign:"center"},children:[t&&p.jsx("button",{onClick:t,style:{position:"absolute",top:"20px",left:"20px",padding:"8px 16px",cursor:"pointer",backgroundColor:"#3a3a5c",color:"#e4e4e4",border:"none",borderRadius:"4px"},children:" Back"}),p.jsx("h1",{style:{marginBottom:"8px",color:"#e4e4e4"},children:"ManaMesh"}),p.jsx("p",{style:{color:"#a0a0a0",marginBottom:"16px"},children:"Decentralized Card Game Platform"}),p.jsxs("div",{style:{backgroundColor:"#0f3460",padding:"12px 24px",borderRadius:"8px",marginBottom:"40px",display:"inline-block",border:"1px solid #3a3a5c"},children:[p.jsx("span",{style:{color:"#6fcf6f"},children:" P2P"}),p.jsx("span",{style:{color:"#a0a0a0",margin:"0 8px"},children:"|"}),p.jsx("span",{style:{color:"#a0a0a0"},children:"No servers required"})]}),p.jsx("h2",{style:{marginBottom:"24px",color:"#e4e4e4"},children:"Choose a Game"}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",justifyContent:"center"},children:ag.map(r=>p.jsx(bw,{game:r,onClick:()=>e(r.id)},r.id))})]});function xw(e,t=16){return e.length<=t*2?e:`${e.slice(0,t)}...${e.slice(-t)}`}async function lg(e){try{return await navigator.clipboard.writeText(e),!0}catch{return!1}}const ww=({status:e,label:t})=>{const n={secure:{bg:"#065f46",border:"#10b981",text:"#6ee7b7"},pending:{bg:"#78350f",border:"#f59e0b",text:"#fcd34d"},warning:{bg:"#7f1d1d",border:"#ef4444",text:"#fca5a5"}}[e];return p.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",backgroundColor:n.bg,border:`1px solid ${n.border}`,borderRadius:"12px",fontSize:"12px",color:n.text,fontWeight:500},children:[p.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:n.border}}),t]})},Un=({title:e,children:t,defaultOpen:r=!1})=>{const[n,i]=H.useState(r);return p.jsxs("div",{style:{marginBottom:"12px",border:"1px solid #3a3a5c",borderRadius:"8px",overflow:"hidden"},children:[p.jsxs("button",{onClick:()=>i(!n),style:{width:"100%",padding:"10px 12px",backgroundColor:"#1e293b",border:"none",color:"#e4e4e4",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("span",{children:e}),p.jsx("span",{style:{transform:n?"rotate(180deg)":"none",transition:"0.2s"},children:""})]}),n&&p.jsx("div",{style:{padding:"12px",backgroundColor:"#0f172a"},children:t})]})},di=({label:e,value:t,fullWidth:r})=>{const[n,i]=H.useState(!1),s=async()=>{await lg(t)&&(i(!0),setTimeout(()=>i(!1),2e3))};return p.jsxs("div",{style:{marginBottom:"8px"},children:[p.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px",fontWeight:500},children:e}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("code",{style:{flex:1,padding:"6px 8px",backgroundColor:"#1e293b",borderRadius:"4px",fontSize:"11px",color:"#67e8f9",fontFamily:"monospace",wordBreak:"break-all",overflow:"hidden",textOverflow:r?"clip":"ellipsis",whiteSpace:r?"normal":"nowrap"},children:r?t:xw(t,20)}),p.jsx("button",{onClick:s,style:{padding:"4px 8px",backgroundColor:n?"#065f46":"#334155",border:"none",borderRadius:"4px",color:"#e4e4e4",fontSize:"11px",cursor:"pointer",whiteSpace:"nowrap"},children:n?"":"Copy"})]})]})},Sw=({crypto:e,numPlayers:t,currentPlayerId:r,defaultExpanded:n=!1})=>{var j,D;const[i,s]=H.useState(n),[o,a]=H.useState(!1),l=e?Object.keys(e.publicKeys).length:0,f=((D=(j=e==null?void 0:e.encryptedZones)==null?void 0:j.deck)==null?void 0:D.length)||0,d=e?Object.keys(e.revealedCards).length:0,y=e?Object.keys(e.commitments).length:0,m=e?Object.keys(e.shuffleProofs).length:0,b=e?Object.keys(e.pendingReveals).length:0,M=e?(e.phase==="ready"||e.phase==="playing")&&l>=t&&f>0?"secure":(e.phase==="init"||e.phase==="keyExchange","pending"):"pending",N={secure:"Cryptographically Secured",pending:"Setup In Progress",warning:"Verification Needed"},S=()=>p.jsxs("div",{style:{padding:"16px"},children:[p.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:p.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",backgroundColor:"#1e3a5f",border:"1px solid #3b82f6",borderRadius:"12px",fontSize:"12px",color:"#93c5fd",fontWeight:500},children:[p.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#3b82f6"}}),"Local Hotseat Mode"]})}),p.jsxs("div",{style:{padding:"16px",backgroundColor:"#0f172a",borderRadius:"8px",border:"1px solid #3a3a5c",marginBottom:"16px"},children:[p.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:"#e4e4e4",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("span",{style:{fontSize:"20px"},children:""}),"Local Play - No Encryption Needed"]}),p.jsxs("p",{style:{margin:0,fontSize:"13px",color:"#94a3b8",lineHeight:"1.6"},children:["You're playing in ",p.jsx("strong",{style:{color:"#e4e4e4"},children:"local hotseat mode"})," where both players share the same screen. Cryptographic fairness verification is not needed because there's no network communication that could be tampered with."]})]}),p.jsxs("div",{style:{padding:"12px",backgroundColor:"#1e293b",borderRadius:"8px",border:"1px solid #3a3a5c"},children:[p.jsxs("div",{style:{fontSize:"13px",fontWeight:600,color:"#e4e4e4",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[p.jsx("span",{children:""})," Want Cryptographic Fairness?"]}),p.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#94a3b8",lineHeight:"1.5"},children:["Use ",p.jsx("strong",{style:{color:"#3b82f6"},children:"P2P Online"})," mode to play over the network with mental poker encryption. This ensures neither player can cheat, even without a trusted server."]})]})]}),v=()=>p.jsxs("div",{children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[p.jsx(ww,{status:M,label:N[M]}),p.jsxs("span",{style:{fontSize:"12px",color:"#94a3b8"},children:["Phase: ",p.jsx("strong",{style:{color:"#e4e4e4"},children:(e==null?void 0:e.phase)||"N/A"})]})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"16px"},children:[p.jsxs("div",{style:{padding:"12px",backgroundColor:"#1e293b",borderRadius:"8px",textAlign:"center"},children:[p.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#10b981"},children:[l,"/",t]}),p.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:"Keys Exchanged"})]}),p.jsxs("div",{style:{padding:"12px",backgroundColor:"#1e293b",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f59e0b"},children:f}),p.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:"Cards Encrypted"})]}),p.jsxs("div",{style:{padding:"12px",backgroundColor:"#1e293b",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#3b82f6"},children:d}),p.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:"Cards Revealed"})]})]}),p.jsxs("div",{style:{padding:"12px",backgroundColor:"#0f172a",borderRadius:"8px",border:"1px solid #3a3a5c",marginBottom:"12px"},children:[p.jsxs("div",{style:{fontSize:"13px",fontWeight:600,color:"#e4e4e4",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[p.jsx("span",{children:""})," How Mental Poker Works"]}),p.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"12px",color:"#94a3b8",lineHeight:"1.6"},children:[p.jsx("li",{children:"Each player generates a secret encryption key"}),p.jsx("li",{children:"The deck is encrypted by ALL players in sequence"}),p.jsx("li",{children:"No single player can see any card without cooperation"}),p.jsx("li",{children:"Cards are revealed only when ALL players decrypt together"}),p.jsx("li",{children:"Shuffle proofs ensure no tampering occurred"})]})]}),p.jsxs("div",{style:{padding:"12px",backgroundColor:"#1e293b",borderRadius:"8px",border:"1px dashed #3a3a5c"},children:[p.jsxs("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"8px"},children:[p.jsx("strong",{style:{color:"#e4e4e4"},children:"Verify in Console:"})," Open browser DevTools (F12) and run:"]}),p.jsx("code",{style:{display:"block",padding:"8px",backgroundColor:"#0f172a",borderRadius:"4px",fontSize:"11px",color:"#67e8f9",fontFamily:"monospace"},children:"console.log(window.__CRYPTO_STATE__)"})]})]}),P=()=>{var F;return p.jsxs("div",{children:[p.jsx(Un,{title:`Player Public Keys (${l})`,defaultOpen:!0,children:e&&Object.entries(e.publicKeys).length>0?Object.entries(e.publicKeys).map(([T,L])=>p.jsx(di,{label:`Player ${T}${T===r?" (You)":""}`,value:L},T)):p.jsx("div",{style:{color:"#64748b",fontSize:"12px"},children:"No keys exchanged yet"})}),p.jsx(Un,{title:`Encrypted Deck (${f} cards)`,children:(F=e==null?void 0:e.encryptedZones)!=null&&F.deck&&e.encryptedZones.deck.length>0?p.jsxs("div",{style:{maxHeight:"200px",overflowY:"auto"},children:[e.encryptedZones.deck.slice(0,10).map((T,L)=>p.jsx(di,{label:`Card ${L} (${T.layers} encryption layers)`,value:T.ciphertext},L)),e.encryptedZones.deck.length>10&&p.jsxs("div",{style:{color:"#64748b",fontSize:"12px",marginTop:"8px"},children:["... and ",e.encryptedZones.deck.length-10," more cards"]})]}):p.jsx("div",{style:{color:"#64748b",fontSize:"12px"},children:"Deck not encrypted yet"})}),p.jsx(Un,{title:`Deck Commitments (${y})`,children:e&&Object.entries(e.commitments).length>0?Object.entries(e.commitments).map(([T,L])=>p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsx(di,{label:`Player ${T} - Hash`,value:L.hash}),p.jsxs("div",{style:{fontSize:"11px",color:"#64748b"},children:["Timestamp: ",new Date(L.timestamp).toLocaleString()]})]},T)):p.jsx("div",{style:{color:"#64748b",fontSize:"12px"},children:"No commitments yet"})}),p.jsx(Un,{title:`Shuffle Proofs (${m})`,children:e&&Object.entries(e.shuffleProofs).length>0?Object.entries(e.shuffleProofs).map(([T,L])=>p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsxs("div",{style:{fontSize:"12px",color:"#e4e4e4",marginBottom:"8px"},children:["Player ",T]}),p.jsx(di,{label:"Commitment",value:L.commitment}),p.jsx(di,{label:"Input Hash",value:L.inputHash}),p.jsx(di,{label:"Output Hash",value:L.outputHash})]},T)):p.jsx("div",{style:{color:"#64748b",fontSize:"12px"},children:"No shuffle proofs yet"})}),p.jsx(Un,{title:`Revealed Cards (${d})`,children:e&&Object.entries(e.revealedCards).length>0?Object.entries(e.revealedCards).map(([T,L])=>p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",fontSize:"12px",borderBottom:"1px solid #1e293b"},children:[p.jsxs("span",{style:{color:"#94a3b8"},children:["Position ",T]}),p.jsx("span",{style:{color:"#10b981",fontFamily:"monospace"},children:L})]},T)):p.jsx("div",{style:{color:"#64748b",fontSize:"12px"},children:"No cards revealed yet"})}),b>0&&p.jsx(Un,{title:`Pending Reveals (${b})`,children:Object.entries(e.pendingReveals).map(([T,L])=>p.jsxs("div",{style:{marginBottom:"8px"},children:[p.jsxs("div",{style:{fontSize:"12px",color:"#f59e0b",marginBottom:"4px"},children:["Card ",T," - Waiting for decryption shares"]}),p.jsxs("div",{style:{fontSize:"11px",color:"#64748b"},children:["Shares received: ",Object.keys(L).length,"/",t]})]},T))}),p.jsxs(Un,{title:"Export Full State",children:[p.jsx("button",{onClick:()=>{const T=JSON.stringify(e,null,2);lg(T)},style:{width:"100%",padding:"10px",backgroundColor:"#3b82f6",border:"none",borderRadius:"6px",color:"white",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Copy Full Crypto State as JSON"}),p.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#64748b"},children:"Share this JSON with a cryptographer to verify fairness"})]})]})};return G.useEffect(()=>{e&&(window.__CRYPTO_STATE__=e)},[e]),p.jsxs("div",{style:{position:"fixed",bottom:"20px",left:"20px",width:i?"380px":"auto",maxHeight:i?"80vh":"auto",backgroundColor:"#16213e",border:"1px solid #3a3a5c",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",overflow:"hidden",zIndex:99999,fontFamily:"system-ui, sans-serif"},children:[p.jsxs("button",{onClick:()=>s(!i),style:{width:"100%",padding:"12px 16px",backgroundColor:"#1e293b",border:"none",color:"#e4e4e4",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[p.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("span",{style:{fontSize:"18px"},children:""}),i?"Fairness Proof":"Verify Fairness"]}),p.jsx("span",{style:{transform:i?"rotate(180deg)":"none",transition:"0.2s"},children:""})]}),i&&p.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(80vh - 50px)"},children:e?p.jsxs("div",{style:{padding:"16px"},children:[p.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[p.jsx("button",{onClick:()=>a(!1),style:{flex:1,padding:"8px",backgroundColor:o?"#334155":"#3b82f6",border:"none",borderRadius:"6px",color:"white",fontSize:"12px",fontWeight:500,cursor:"pointer"},children:"Simple View"}),p.jsx("button",{onClick:()=>a(!0),style:{flex:1,padding:"8px",backgroundColor:o?"#3b82f6":"#334155",border:"none",borderRadius:"6px",color:"white",fontSize:"12px",fontWeight:500,cursor:"pointer"},children:"Technical Details"})]}),o?P():v()]}):S()})]})},kw="modulepreload",_w=function(e,t){return new URL(e,t).href},v0={},Pw=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(f=>{if(f=_w(f,n),f in v0)return;v0[f]=!0;const d=f.endsWith(".css"),y=d?'[rel="stylesheet"]':"";if(!!n)for(let k=o.length-1;k>=0;k--){const M=o[k];if(M.href===f&&(!d||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=d?"stylesheet":kw,d||(b.as="script"),b.crossOrigin="",b.href=f,l&&b.setAttribute("nonce",l),document.head.appendChild(b),d)return new Promise((k,M)=>{b.addEventListener("load",k),b.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function g0(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;const r=[];for(let n=0;n<20;n++)t=(t*1103515245+12345|0)>>>0,r.push((t&255).toString(16).padStart(2,"0"));return"0x"+r.join("")}function Cw(e,t){const r=e+t;let n=0;for(let s=0;s<r.length;s++)n=(n<<5)-n+r.charCodeAt(s)|0;const i=[];for(let s=0;s<65;s++)n=(n*1103515245+12345|0)>>>0,i.push((n&255).toString(16).padStart(2,"0"));return"0x"+i.join("")}class Mw{constructor(t="Player",r=1){this.playerName=t,this.chainId=r,this.status="disconnected",this.wallet=null,this.accountChangeCallbacks=[],this.chainChangeCallbacks=[],this.privateKey=this.generatePrivateKey(t)}generatePrivateKey(t){let r=0;for(let i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;const n=[];for(let i=0;i<32;i++)r=(r*1103515245+12345|0)>>>0,n.push((r&255).toString(16).padStart(2,"0"));return n.join("")}async connect(){this.status="connecting",await new Promise(r=>setTimeout(r,100));const t=g0(this.playerName);return this.wallet={address:t,chainId:this.chainId,providerName:"MockWallet"},this.status="connected",console.log(`[MockWallet] Connected: ${t} (${this.playerName})`),this.wallet}async disconnect(){const t=this.wallet!==null;this.wallet=null,this.status="disconnected",t&&this.accountChangeCallbacks.forEach(r=>r(null)),console.log("[MockWallet] Disconnected")}async signMessage(t){if(!this.wallet)throw new Error("Wallet not connected");await new Promise(n=>setTimeout(n,50));const r=Cw(t,this.privateKey);return console.log(`[MockWallet] Signed message: "${t.slice(0,50)}..."`),r}getStatus(){return this.status}getWallet(){return this.wallet}onAccountChange(t){return this.accountChangeCallbacks.push(t),()=>{const r=this.accountChangeCallbacks.indexOf(t);r>=0&&this.accountChangeCallbacks.splice(r,1)}}onChainChange(t){return this.chainChangeCallbacks.push(t),()=>{const r=this.chainChangeCallbacks.indexOf(t);r>=0&&this.chainChangeCallbacks.splice(r,1)}}simulateAccountChange(t){if(this.playerName=t,this.privateKey=this.generatePrivateKey(t),this.wallet){const r=g0(t);this.wallet={...this.wallet,address:r},this.accountChangeCallbacks.forEach(n=>n(r))}}simulateChainChange(t){this.chainId=t,this.wallet&&(this.wallet={...this.wallet,chainId:t},this.chainChangeCallbacks.forEach(r=>r(t)))}}const Ew=`ManaMesh Poker Game Key
Game ID: {gameId}
Version: 1`;async function Aw(e,t){const r=e.getWallet();if(!r)throw new Error("Wallet not connected");const n=Ew.replace("{gameId}",t),i=await e.signMessage(n),s=Iw(i),{generateKeyPair:o}=await Pw(async()=>{const{generateKeyPair:l}=await Promise.resolve().then(()=>L5);return{generateKeyPair:l}},void 0,import.meta.url),a=o(s);return console.log(`[deriveGameKeys] Derived keys for game ${t} from ${r.address}`),{privateKey:a.privateKey,publicKey:a.publicKey,gameId:t,walletAddress:r.address}}function Iw(e){const r=(e.startsWith("0x")?e.slice(2):e).slice(0,64),n=new Uint8Array(32);for(let i=0;i<32;i++)n[i]=parseInt(r.slice(i*2,i*2+2),16);return n}function Rw(e,t=1){return new Mw(e,t)}const cg=H.createContext(null),Ow=({playerName:e,children:t})=>{const[r,n]=H.useState(null),[i,s]=H.useState("disconnected"),[o,a]=H.useState(new Map),l=H.useRef(null),f=H.useMemo(()=>e||`Player_${Math.random().toString(36).slice(2,8)}`,[e]);H.useEffect(()=>{const m=Rw(f);return l.current=m,s("connecting"),m.connect().then(b=>{n(b),s("connected"),console.log("[WalletContext] Connected:",b.address)}).catch(b=>{console.error("[WalletContext] Connection failed:",b),s("error")}),()=>{m.disconnect()}},[f]);const y={wallet:r,status:i,deriveKeys:async m=>{const b=o.get(m);if(b)return b;if(!l.current)throw new Error("Wallet not connected");const k=await Aw(l.current,m);return a(M=>{const N=new Map(M);return N.set(m,k),N}),k},derivedKeys:o,provider:l.current};return p.jsx(cg.Provider,{value:y,children:t})};function ug(){const e=H.useContext(cg);if(!e)throw new Error("useWallet must be used within a WalletProvider");return e}function jw(e){const{deriveKeys:t,derivedKeys:r}=ug(),[n,i]=H.useState(null),[s,o]=H.useState(!1);return H.useEffect(()=>{if(!e){i(null);return}const a=r.get(e);if(a){i(a);return}o(!0),t(e).then(l=>{i(l),o(!1)}).catch(l=>{console.error("[useGameKeys] Failed to derive keys:",l),o(!1)})},[e,t,r]),n}const Nw={hearts:"",diamonds:"",clubs:"",spades:""},b0={hearts:"#e74c3c",diamonds:"#e74c3c",clubs:"#2c3e50",spades:"#2c3e50"},Ps=({card:e,faceDown:t,small:r})=>{const n=r?50:70,i=r?70:100;return t?p.jsx("div",{style:{width:n,height:i,backgroundColor:"#1a365d",border:"2px solid #3182ce",borderRadius:"8px",margin:"4px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:"repeating-linear-gradient(45deg, #2a4365, #2a4365 10px, #1a365d 10px, #1a365d 20px)"},children:p.jsx("span",{style:{fontSize:r?"16px":"24px",color:"#63b3ed"},children:""})}):p.jsxs("div",{style:{width:n,height:i,backgroundColor:"#fff",border:"2px solid #ccc",borderRadius:"8px",margin:"4px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:[p.jsx("span",{style:{fontSize:r?"18px":"24px",fontWeight:"bold",color:b0[e.suit]},children:e.rank}),p.jsx("span",{style:{fontSize:r?"20px":"28px",color:b0[e.suit]},children:Nw[e.suit]})]})},Tw=({playerId:e,player:t,isDealer:r,isSmallBlind:n,isBigBlind:i,isActive:s,isCurrentUser:o,showCards:a,encryptedCardCount:l=0,peekedCards:f})=>p.jsxs("div",{style:{padding:"16px",backgroundColor:s?"#1e4d2b":o?"#1e2a45":"#16213e",borderRadius:"12px",border:s?"2px solid #4CAF50":"1px solid #3a3a5c",margin:"8px",minWidth:"180px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsxs("span",{style:{fontWeight:"bold",color:"#e4e4e4"},children:["Player ",e," ",o&&"(You)"]}),t.folded&&p.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#7f1d1d",color:"#fca5a5",borderRadius:"4px"},children:"FOLDED"}),t.isAllIn&&p.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#7c3aed",color:"#c4b5fd",borderRadius:"4px"},children:"ALL-IN"})]}),p.jsxs("div",{style:{display:"flex",gap:"4px"},children:[r&&p.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#f59e0b",color:"#1f2937",borderRadius:"4px",fontWeight:"bold"},children:"D"}),n&&p.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#3b82f6",color:"#fff",borderRadius:"4px"},children:"SB"}),i&&p.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#ef4444",color:"#fff",borderRadius:"4px"},children:"BB"})]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",color:"#a0a0a0",fontSize:"14px"},children:[p.jsxs("span",{children:["Chips: ",p.jsx("strong",{style:{color:"#fbbf24"},children:t.chips})]}),t.bet>0&&p.jsxs("span",{children:["Bet: ",p.jsx("strong",{style:{color:"#4ade80"},children:t.bet})]})]}),p.jsx("div",{style:{display:"flex",justifyContent:"center"},children:f&&f.length>0?f.map(d=>p.jsx(Ps,{card:d,small:!0},d.id)):t.hand.length>0?a?t.hand.map(d=>p.jsx(Ps,{card:d,small:!0},d.id)):t.hand.map((d,y)=>p.jsx(Ps,{card:{},faceDown:!0,small:!0},y)):l>0?Array.from({length:l}).map((d,y)=>p.jsx(Ps,{card:{},faceDown:!0,small:!0},y)):p.jsx("span",{style:{color:"#6a6a8a",fontSize:"12px"},children:"No cards"})})]}),Dw={waiting:"Waiting to Start",preflop:"Pre-Flop",flop:"Flop",turn:"Turn",river:"River",showdown:"Showdown",gameOver:"Hand Complete",keyExchange:" Key Exchange",keyEscrow:" Key Escrow",encrypt:" Encrypting Deck",shuffle:" Shuffling Deck",voided:" Game Voided"},x0=({G:e,ctx:t,moves:r,playerID:n,onNewHand:i})=>{var u,_,$,J,Y;H.useEffect(()=>{window.__POKER_G__=e,window.__POKER_CTX__=t,console.log("[PokerBoard] G.phase:",e.phase,"ctx.phase:",t.phase)},[e,t]);const[s,o]=H.useState(e.bigBlindAmount),a=n||"0",l=e.players[a],f=e.bettingRound.activePlayer===a,d=f&&!(l!=null&&l.folded)&&!(l!=null&&l.isAllIn),y=e.bettingRound.currentBet-((l==null?void 0:l.bet)||0),m=e.bigBlindAmount,b=e.bettingRound.currentBet+e.bettingRound.minRaise,k=H.useRef(null),[M,N]=H.useState(null),S=H.useRef(new Set),v=e,P=(u=v.players)==null?void 0:u[a],j=v.handId||null,D=jw(j);H.useEffect(()=>{if(D&&!k.current){const B={privateKey:D.privateKey,publicKey:D.publicKey};k.current=B,N(B),console.log("[Crypto] Using wallet-derived keys for player",a,"from wallet",D.walletAddress)}},[D,a]),H.useEffect(()=>{var ae,I;if(!v.crypto)return;const B=e.phase,W=`${B}-${a}`;if(console.log("[Crypto] G.phase:",B,"ctx.phase:",t.phase,"Player:",a,"Available moves:",Object.keys(r||{})),S.current.has(W))return;const X=()=>{if(k.current)return k.current;const O=eg();return k.current=O,N(O),console.log("[Crypto] Generated random key pair for player",a,"(wallet keys not yet available)"),O};if(B==="keyExchange"&&!(P!=null&&P.publicKey)){S.current.add(W);const O=X();console.log("[Crypto] Submitting public key for player",a,"moves:",Object.keys(r)),setTimeout(()=>{try{if(r.submitPublicKey){console.log("[Crypto] Calling moves.submitPublicKey for",a);const z=r.submitPublicKey(a,O.publicKey);console.log("[Crypto] submitPublicKey result:",z)}else console.error("[Crypto] moves.submitPublicKey is not defined!")}catch(z){console.error("[Crypto] Error calling submitPublicKey:",z)}},100);return}if(B==="keyEscrow"&&!(P!=null&&P.hasDistributedShares)){const O=k.current||X();if(!O){console.log("[Crypto] Waiting for key pair in escrow phase...");return}S.current.add(W);const Q=Object.keys(e.players).filter(ne=>ne!==a),K=Math.max(2,Q.length);console.log("[Crypto] Creating key shares for escrow, other players:",Q,"threshold:",K);const te=R6(O.privateKey,a,Q,K);setTimeout(()=>{r.distributeKeyShares&&r.distributeKeyShares(a,O.privateKey,te)},100);return}if(B==="encrypt"&&!(P!=null&&P.hasEncrypted)){const O=k.current||X();if(!O)return;const z=v.setupPlayerIndex||0;((ae=v.playerOrder)==null?void 0:ae[z])===a&&(S.current.add(W),console.log("[Crypto] Encrypting deck for player",a),setTimeout(()=>{r.encryptDeck&&r.encryptDeck(a,O.privateKey)},100));return}if(B==="shuffle"&&!(P!=null&&P.hasShuffled)){const O=k.current||X();if(!O)return;const z=v.setupPlayerIndex||0;((I=v.playerOrder)==null?void 0:I[z])===a&&(S.current.add(W),console.log("[Crypto] Shuffling deck for player",a),setTimeout(()=>{r.shuffleDeck&&r.shuffleDeck(a,O.privateKey)},100));return}},[e.phase,v,a,P,r]),H.useEffect(()=>{const B=e.bettingRound.currentBet===0?m:b;o(B)},[e.phase,e.bettingRound.currentBet,m,b]);const F=()=>{var W;const B=(W=t.gameover)==null?void 0:W.handResult;if(!B){console.error("[PokerBoard] No hand result available for settlement");return}console.log("[PokerBoard] Starting new hand with result:",B),i?i(B):console.warn("[PokerBoard] No onNewHand callback provided - cannot start new hand")},T=()=>{r.fold(a)},L=()=>{r.check(a)},V=()=>{r.call(a)},ee=()=>{r.bet(s,a)},A=()=>{r.raise(s,a)},c=()=>{r.allIn(a)},h=d&&e.bettingRound.currentBet===((l==null?void 0:l.bet)||0),g=d&&y>0&&y<((l==null?void 0:l.chips)||0),w=d&&e.bettingRound.currentBet===0&&((l==null?void 0:l.chips)||0)>=m,C=d&&e.bettingRound.currentBet>0&&((l==null?void 0:l.chips)||0)>=b-((l==null?void 0:l.bet)||0),R=["keyExchange","keyEscrow","encrypt","shuffle"],E=R.includes(e.phase),x=e.crypto;if(t.gameover){const B=t.gameover.handResult,W=t.gameover.reason==="voided",X=t.gameover.winners,ae=Object.entries(e.players).filter(([O,z])=>z.chips>0);return ae.length<=1&&ae.length===1?p.jsxs("div",{style:{padding:"40px",textAlign:"center",fontFamily:"system-ui, sans-serif",color:"#e4e4e4"},children:[p.jsx("h1",{children:"Tournament Over!"}),p.jsxs("p",{style:{fontSize:"24px"},children:["Player ",ae[0][0]," wins the tournament!"]}),p.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",marginTop:"20px"},children:"Play Again"})]}):p.jsxs("div",{style:{padding:"40px",textAlign:"center",fontFamily:"system-ui, sans-serif",color:"#e4e4e4",backgroundColor:"#16213e",borderRadius:"12px",maxWidth:"600px",margin:"40px auto"},children:[p.jsx("h2",{style:{color:"#fbbf24",marginBottom:"20px"},children:W?"Hand Voided":"Hand Complete!"}),X&&X.length>0&&p.jsx("p",{style:{fontSize:"20px",marginBottom:"16px"},children:X.length===1?`Player ${X[0]} wins the pot!`:`Split pot: Players ${X.join(", ")}`}),B&&p.jsxs("div",{style:{backgroundColor:"#0f172a",borderRadius:"8px",padding:"16px",marginBottom:"20px",textAlign:"left"},children:[p.jsx("h4",{style:{margin:"0 0 12px 0",color:"#94a3b8"},children:"Settlement Details"}),p.jsxs("div",{style:{display:"grid",gap:"8px",fontSize:"14px",color:"#cbd5e1"},children:[p.jsxs("div",{children:["Pot: ",p.jsx("strong",{style:{color:"#fbbf24"},children:B.totalPot})]}),Object.entries(B.payouts).map(([O,z])=>p.jsxs("div",{children:["Player ",O,": ",z>0?p.jsxs("span",{style:{color:"#4ade80"},children:["+",z]}):p.jsx("span",{style:{color:"#6b7280"},children:"0"})]},O))]})]}),p.jsxs("div",{style:{backgroundColor:"#1e293b",borderRadius:"8px",padding:"16px",marginBottom:"24px"},children:[p.jsx("h4",{style:{margin:"0 0 12px 0",color:"#94a3b8"},children:"Chip Counts"}),p.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"24px"},children:Object.entries(e.players).map(([O,z])=>p.jsxs("div",{style:{textAlign:"center"},children:[p.jsxs("div",{style:{color:"#9ca3af",fontSize:"12px"},children:["Player ",O]}),p.jsx("div",{style:{color:z.chips>0?"#fbbf24":"#ef4444",fontSize:"18px",fontWeight:"bold"},children:z.chips})]},O))})]}),p.jsx("button",{onClick:F,disabled:!i,style:{padding:"16px 32px",fontSize:"18px",cursor:i?"pointer":"not-allowed",backgroundColor:i?"#4CAF50":"#374151",color:"white",border:"none",borderRadius:"8px",opacity:i?1:.6},children:"Deal Next Hand"}),!i&&p.jsx("p",{style:{color:"#6b7280",fontSize:"12px",marginTop:"8px"},children:"New hand callback not configured"})]})}return p.jsxs("div",{style:{padding:"20px",maxWidth:"1000px",margin:"0 auto",fontFamily:"system-ui, sans-serif",color:"#e4e4e4"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"12px 20px",backgroundColor:"#16213e",borderRadius:"8px",border:"1px solid #3a3a5c"},children:[p.jsx("h2",{style:{margin:0},children:"Texas Hold'em"}),p.jsxs("div",{style:{display:"flex",gap:"24px",color:"#a0a0a0"},children:[p.jsxs("span",{children:["Phase: ",p.jsx("strong",{style:{color:"#4ade80"},children:Dw[e.phase]})]}),p.jsxs("span",{children:["Blinds: ",p.jsxs("strong",{children:[e.smallBlindAmount,"/",e.bigBlindAmount]})]})]})]}),(e.phase==="waiting"||e.phase==="gameOver")&&p.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#16213e",borderRadius:"12px",marginBottom:"20px"},children:[e.phase==="gameOver"&&e.winners.length>0&&p.jsx("div",{style:{marginBottom:"20px"},children:p.jsx("h3",{style:{color:"#fbbf24"},children:e.winners.length===1?`Player ${e.winners[0]} wins the hand!`:`Split pot: ${e.winners.join(", ")}`})}),p.jsx("button",{onClick:F,style:{padding:"16px 32px",fontSize:"18px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px"},children:e.phase==="waiting"?"Start Hand":"Deal Next Hand"})]}),E&&p.jsxs("div",{style:{backgroundColor:"#1a2d4a",borderRadius:"12px",padding:"24px",marginBottom:"20px",border:"1px solid #3b82f6"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[p.jsx("span",{style:{fontSize:"24px"},children:""}),p.jsxs("div",{children:[p.jsx("h3",{style:{margin:0,color:"#60a5fa"},children:"Cryptographic Setup"}),p.jsx("p",{style:{margin:"4px 0 0 0",color:"#94a3b8",fontSize:"14px"},children:"Establishing secure P2P card encryption"})]})]}),p.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["keyExchange","keyEscrow","encrypt","shuffle"].map((B,W)=>{const X=R.indexOf(e.phase),ae=W<X,I=B===e.phase;return p.jsxs("div",{style:{flex:1,padding:"12px",borderRadius:"8px",backgroundColor:ae?"#166534":I?"#1e3a5f":"#1f2937",border:`2px solid ${ae?"#22c55e":I?"#3b82f6":"#374151"}`,textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"16px",marginBottom:"4px"},children:ae?"":I?"":""}),p.jsxs("div",{style:{fontSize:"12px",color:ae?"#86efac":I?"#93c5fd":"#6b7280"},children:[B==="keyExchange"&&"Keys",B==="keyEscrow"&&"Escrow",B==="encrypt"&&"Encrypt",B==="shuffle"&&"Shuffle"]})]},B)})}),p.jsxs("div",{style:{padding:"16px",backgroundColor:"#0f172a",borderRadius:"8px",color:"#94a3b8",fontSize:"14px"},children:[e.phase==="keyExchange"&&p.jsxs(p.Fragment,{children:[p.jsx("strong",{style:{color:"#60a5fa"},children:"Key Exchange:"})," Players are exchanging public keys for secure card encryption.",x&&p.jsx("div",{style:{marginTop:"8px"},children:p.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.keys(e.players).map(B=>{var X;const W=(X=x.publicKeys)==null?void 0:X[B];return p.jsxs("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:W?"#166534":"#374151",color:W?"#86efac":"#9ca3af",fontSize:"12px"},children:["Player ",B,": ",W?" Key submitted":" Waiting..."]},B)})})})]}),e.phase==="keyEscrow"&&p.jsxs(p.Fragment,{children:[p.jsx("strong",{style:{color:"#60a5fa"},children:"Key Escrow:"})," Players are distributing key shares for abandonment recovery.",p.jsx("div",{style:{marginTop:"8px",display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(v.players||{}).map(([B,W])=>{const X=W;return p.jsxs("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:X.hasDistributedShares?"#166534":"#374151",color:X.hasDistributedShares?"#86efac":"#9ca3af",fontSize:"12px"},children:["Player ",B,": ",X.hasDistributedShares?" Shares distributed":" Waiting..."]},B)})})]}),e.phase==="encrypt"&&p.jsxs(p.Fragment,{children:[p.jsx("strong",{style:{color:"#60a5fa"},children:"Encryption:"})," Each player encrypts the deck in turn.",p.jsx("div",{style:{marginTop:"8px"},children:(()=>{var X;const B=v.setupPlayerIndex||0,W=(X=v.playerOrder)==null?void 0:X[B];return p.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(v.players||{}).map(([ae,I])=>{const O=I,z=W===ae&&!O.hasEncrypted;return p.jsxs("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:O.hasEncrypted?"#166534":z?"#1e3a5f":"#374151",color:O.hasEncrypted?"#86efac":z?"#93c5fd":"#9ca3af",fontSize:"12px",border:z?"1px solid #3b82f6":"none"},children:["Player ",ae,": ",O.hasEncrypted?" Encrypted":z?" Encrypting...":" Waiting"]},ae)})})})()})]}),e.phase==="shuffle"&&p.jsxs(p.Fragment,{children:[p.jsx("strong",{style:{color:"#60a5fa"},children:"Shuffle:"})," Each player shuffles the encrypted deck in turn.",p.jsx("div",{style:{marginTop:"8px"},children:(()=>{var X;const B=v.setupPlayerIndex||0,W=(X=v.playerOrder)==null?void 0:X[B];return p.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(v.players||{}).map(([ae,I])=>{const O=I,z=W===ae&&!O.hasShuffled;return p.jsxs("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:O.hasShuffled?"#166534":z?"#1e3a5f":"#374151",color:O.hasShuffled?"#86efac":z?"#93c5fd":"#9ca3af",fontSize:"12px",border:z?"1px solid #3b82f6":"none"},children:["Player ",ae,": ",O.hasShuffled?" Shuffled":z?" Shuffling...":" Waiting"]},ae)})})})()})]})]}),p.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",backgroundColor:"#1e293b",borderRadius:"4px",fontSize:"12px",color:"#64748b"},children:" Check browser console (F12) for crypto operation logs"})]}),e.phase!=="waiting"&&!E&&p.jsxs("div",{style:{backgroundColor:"#0f3460",borderRadius:"12px",padding:"20px",marginBottom:"20px",textAlign:"center"},children:[p.jsx("div",{style:{marginBottom:"16px"},children:p.jsxs("span",{style:{padding:"8px 24px",backgroundColor:"#16213e",borderRadius:"20px",color:"#fbbf24",fontWeight:"bold",fontSize:"18px"},children:["Pot: ",e.pot]})}),p.jsx("div",{style:{display:"flex",justifyContent:"center",minHeight:"108px",alignItems:"center"},children:e.community.length>0?e.community.map(B=>p.jsx(Ps,{card:B},B.id)):p.jsx("span",{style:{color:"#6a6a8a"},children:"Community cards will appear here"})})]}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",marginBottom:"20px"},children:Object.entries(e.players).map(([B,W])=>{var z,Q,K;const X=(Q=(z=v.crypto)==null?void 0:z.encryptedZones)==null?void 0:Q[`hand:${B}`],ae=(X==null?void 0:X.length)||0,I=(K=v.players)==null?void 0:K[B],O=I==null?void 0:I.peekedCards;return p.jsx(Tw,{playerId:B,player:W,isDealer:e.dealer===B,isSmallBlind:e.smallBlind===B,isBigBlind:e.bigBlind===B,isActive:e.bettingRound.activePlayer===B,isCurrentUser:B===a,showCards:B===a||e.phase==="showdown",encryptedCardCount:ae,peekedCards:B===a?O:void 0},B)})}),e.phase!=="waiting"&&e.phase!=="gameOver"&&e.phase!=="showdown"&&!E&&p.jsx("div",{style:{padding:"12px",backgroundColor:f?"#1a4a3a":"#3d2a1a",borderRadius:"8px",marginBottom:"20px",textAlign:"center",border:"1px solid #3a3a5c"},children:f?p.jsxs("span",{style:{color:"#6fcf6f",fontWeight:"bold"},children:["Your turn! ",y>0?`${y} to call.`:"Check or bet."]}):p.jsxs("span",{style:{color:"#ff9800"},children:["Waiting for Player ",e.bettingRound.activePlayer,"..."]})}),v.decryptRequests&&v.decryptRequests.length>0&&!E&&p.jsxs("div",{style:{marginBottom:"20px",backgroundColor:"#1a2d4a",borderRadius:"12px",padding:"16px",border:"2px solid #f59e0b"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[p.jsx("span",{style:{fontSize:"20px"},children:""}),p.jsx("h3",{style:{margin:0,color:"#f59e0b"},children:"Cooperative Card Reveal"})]}),v.decryptRequests.filter(B=>B.status==="pending").map(B=>{const W=B.requestingPlayer===a,X=B.approvals[a],ae=Object.values(B.approvals).filter(Boolean).length,I=v.playerOrder.length;return p.jsxs("div",{style:{backgroundColor:"#0f172a",borderRadius:"8px",padding:"12px",marginBottom:"8px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsx("span",{style:{color:"#e2e8f0"},children:W?" You requested to reveal your cards":` Player ${B.requestingPlayer} wants to reveal their cards`}),p.jsxs("span",{style:{padding:"4px 8px",backgroundColor:ae===I?"#166534":"#374151",color:ae===I?"#86efac":"#9ca3af",borderRadius:"4px",fontSize:"12px"},children:[ae,"/",I," approved"]})]}),p.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:v.playerOrder.map(O=>p.jsxs("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"11px",backgroundColor:B.approvals[O]?"#166534":"#374151",color:B.approvals[O]?"#86efac":"#9ca3af"},children:["Player ",O,": ",B.approvals[O]?"":""]},O))}),!X&&!W&&p.jsx("button",{onClick:()=>{const O=k.current;O&&r.approveDecrypt&&(console.log("[PokerBoard] Approving decrypt request:",B.id),r.approveDecrypt(a,B.id,O.privateKey))},style:{padding:"10px 20px",fontSize:"14px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",width:"100%"},children:" Approve & Share Decryption Key"}),X&&!W&&p.jsx("div",{style:{textAlign:"center",color:"#86efac",fontSize:"14px"},children:" You approved this request"}),W&&p.jsx("div",{style:{textAlign:"center",color:"#fbbf24",fontSize:"14px"},children:" Waiting for other players to approve..."})]},B.id)})]}),v.crypto&&!(P!=null&&P.hasPeeked)&&!(P!=null&&P.folded)&&!E&&(($=(_=v.crypto.encryptedZones)==null?void 0:_[`hand:${a}`])==null?void 0:$.length)>0&&p.jsxs("div",{style:{marginBottom:"20px",textAlign:"center",backgroundColor:"#16213e",borderRadius:"12px",padding:"20px",border:"1px solid #3a3a5c"},children:[p.jsx("h3",{style:{margin:"0 0 16px 0",color:"#e2e8f0"},children:"Reveal Your Cards"}),!((J=v.decryptRequests)!=null&&J.some(B=>B.requestingPlayer===a&&B.status==="pending"))&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>{if(k.current&&r.requestDecrypt){const W=`hand:${a}`,X=[0,1];console.log("[PokerBoard] Requesting cooperative decrypt for",W),r.requestDecrypt(a,W,X)}},style:{padding:"16px 32px",fontSize:"18px",cursor:"pointer",backgroundColor:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px rgba(139, 92, 246, 0.3)",marginBottom:"12px"},children:" Request Cooperative Reveal"}),p.jsx("p",{style:{color:"#a0a0a0",fontSize:"12px",marginBottom:"16px"},children:"All players must approve to decrypt your cards (secure)"}),p.jsxs("div",{style:{borderTop:"1px solid #3a3a5c",paddingTop:"16px",marginTop:"8px"},children:[p.jsx("button",{onClick:()=>{const B=k.current;B&&r.peekHoleCards&&(console.log("[PokerBoard] Instant peek at hole cards"),r.peekHoleCards(a,B.privateKey))},style:{padding:"10px 20px",fontSize:"14px",cursor:"pointer",backgroundColor:"#374151",color:"#9ca3af",border:"1px solid #4b5563",borderRadius:"8px"},children:" Instant Peek (Demo Mode)"}),p.jsx("p",{style:{color:"#6b7280",fontSize:"11px",marginTop:"8px"},children:"Uses stored keys - less secure, for demo only"})]})]}),((Y=v.decryptRequests)==null?void 0:Y.some(B=>B.requestingPlayer===a&&B.status==="pending"))&&p.jsx("div",{style:{color:"#fbbf24"},children:" Waiting for approval from other players..."})]}),d&&e.phase!=="waiting"&&e.phase!=="gameOver"&&e.phase!=="showdown"&&!E&&p.jsxs("div",{style:{backgroundColor:"#16213e",borderRadius:"12px",padding:"20px",border:"1px solid #3a3a5c"},children:[p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap",marginBottom:"16px"},children:[p.jsx("button",{onClick:T,style:{padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px"},children:"Fold"}),h&&p.jsx("button",{onClick:L,style:{padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px"},children:"Check"}),g&&p.jsxs("button",{onClick:V,style:{padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px"},children:["Call ",y]}),p.jsxs("button",{onClick:c,style:{padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#7c3aed",color:"white",border:"none",borderRadius:"8px"},children:["All-In (",l==null?void 0:l.chips,")"]})]}),(w||C)&&p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",alignItems:"center"},children:[p.jsx("input",{type:"range",min:w?m:b,max:(l==null?void 0:l.chips)||0,value:s,onChange:B=>o(Number(B.target.value)),style:{width:"200px"}}),p.jsx("input",{type:"number",min:w?m:b,max:(l==null?void 0:l.chips)||0,value:s,onChange:B=>o(Number(B.target.value)),style:{width:"80px",padding:"8px",borderRadius:"4px",border:"1px solid #3a3a5c",backgroundColor:"#0f3460",color:"#e4e4e4"}}),p.jsxs("button",{onClick:w?ee:A,style:{padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px"},children:[w?"Bet":"Raise to"," ",s]})]})]}),p.jsx(Sw,{crypto:e.crypto,numPlayers:Object.keys(e.players).length,currentPlayerId:a})]})},Bw={hearts:"",diamonds:"",clubs:"",spades:""},w0={hearts:"#e74c3c",diamonds:"#e74c3c",clubs:"#2c3e50",spades:"#2c3e50"},Hc=({card:e,faceDown:t,large:r})=>{const n=r?100:70,i=r?140:100;return t||!e?p.jsx("div",{style:{width:n,height:i,backgroundColor:"#1a365d",border:"2px solid #3182ce",borderRadius:"8px",margin:"4px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:"repeating-linear-gradient(45deg, #2a4365, #2a4365 10px, #1a365d 10px, #1a365d 20px)"},children:p.jsx("span",{style:{fontSize:r?"32px":"24px",color:"#63b3ed"},children:""})}):p.jsxs("div",{style:{width:n,height:i,backgroundColor:"#fff",border:"2px solid #ccc",borderRadius:"8px",margin:"4px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:[p.jsx("span",{style:{fontSize:r?"32px":"24px",fontWeight:"bold",color:w0[e.suit]},children:e.rank}),p.jsx("span",{style:{fontSize:r?"40px":"28px",color:w0[e.suit]},children:Bw[e.suit]})]})},S0=({playerId:e,player:t,isCurrentUser:r,isTop:n})=>{const i=t.deck.length+t.won.length+t.played.length;return p.jsxs("div",{style:{display:"flex",flexDirection:n?"column":"column-reverse",alignItems:"center",padding:"20px",backgroundColor:r?"#1e2a45":"#16213e",borderRadius:"12px",border:"1px solid #3a3a5c",minWidth:"300px"},children:[p.jsxs("div",{style:{marginBottom:n?"16px":"0",marginTop:n?"0":"16px",textAlign:"center"},children:[p.jsxs("div",{style:{fontWeight:"bold",color:"#e4e4e4",fontSize:"18px"},children:["Player ",e," ",r&&"(You)"]}),p.jsxs("div",{style:{color:"#a0a0a0",fontSize:"14px"},children:[i," cards total"]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"40px"},children:[p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx("div",{style:{position:"relative",width:"70px",height:"100px"},children:t.deck.length>0?p.jsxs(p.Fragment,{children:[t.deck.length>2&&p.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"70px",height:"100px",backgroundColor:"#1a365d",border:"2px solid #3182ce",borderRadius:"8px"}}),t.deck.length>1&&p.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",width:"70px",height:"100px",backgroundColor:"#1a365d",border:"2px solid #3182ce",borderRadius:"8px"}}),p.jsx("div",{style:{position:"absolute",top:0,left:0},children:p.jsx(Hc,{faceDown:!0})})]}):p.jsx("div",{style:{width:"70px",height:"100px",border:"2px dashed #3a3a5c",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#6a6a8a",fontSize:"12px"},children:"Empty"})}),p.jsxs("div",{style:{color:"#a0a0a0",fontSize:"12px",marginTop:"8px"},children:["Deck: ",t.deck.length]})]}),p.jsx("div",{style:{textAlign:"center"},children:t.played.length>0?p.jsx("div",{style:{display:"flex",gap:"4px"},children:t.played.map((s,o)=>p.jsx(Hc,{card:s,faceDown:o<t.played.length-1,large:o===t.played.length-1},s.id))}):p.jsx("div",{style:{width:"100px",height:"140px",border:"2px dashed #3a3a5c",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#6a6a8a",fontSize:"14px"},children:"Play Area"})}),p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx("div",{style:{position:"relative",width:"70px",height:"100px"},children:t.won.length>0?p.jsxs(p.Fragment,{children:[t.won.length>2&&p.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"70px",height:"100px",backgroundColor:"#1a365d",border:"2px solid #22c55e",borderRadius:"8px"}}),t.won.length>1&&p.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",width:"70px",height:"100px",backgroundColor:"#1a365d",border:"2px solid #22c55e",borderRadius:"8px"}}),p.jsx("div",{style:{position:"absolute",top:0,left:0},children:p.jsx(Hc,{faceDown:!0})})]}):p.jsx("div",{style:{width:"70px",height:"100px",border:"2px dashed #22c55e",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#6a6a8a",fontSize:"12px"},children:"Won"})}),p.jsxs("div",{style:{color:"#22c55e",fontSize:"12px",marginTop:"8px"},children:["Won: ",t.won.length]})]})]})]})},zw=({G:e,ctx:t,moves:r,playerID:n})=>{var k;const i=n||"0",s=i==="0"?"1":"0",o=e.players[i],a=e.players[s],l=e.phase==="flip"&&(o==null?void 0:o.played.length)===0&&(o==null?void 0:o.deck.length)>0,f=e.warInProgress&&e.phase==="flip"&&(o==null?void 0:o.played.length)>0&&(o==null?void 0:o.deck.length)>=4,d=()=>{r.flipCard(i)},y=()=>{r.placeWarCards(i)},m=()=>{r.resolveRound()},b=(o==null?void 0:o.played.length)>0&&(a==null?void 0:a.played.length)>0;if(e.phase==="resolve"||b&&e.warInProgress,t.gameover||e.phase==="gameOver"){const M=((k=t.gameover)==null?void 0:k.winner)||e.winner;return p.jsxs("div",{style:{padding:"40px",textAlign:"center",fontFamily:"system-ui, sans-serif",color:"#e4e4e4"},children:[p.jsx("h1",{children:"Game Over!"}),p.jsx("p",{style:{fontSize:"24px"},children:M===i?p.jsx("span",{style:{color:"#4ade80"},children:"You win!"}):p.jsxs("span",{style:{color:"#f87171"},children:["Player ",M," wins!"]})}),p.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",marginTop:"20px"},children:"Play Again"})]})}return p.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",fontFamily:"system-ui, sans-serif",color:"#e4e4e4"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"12px 20px",backgroundColor:"#16213e",borderRadius:"8px",border:"1px solid #3a3a5c"},children:[p.jsx("h2",{style:{margin:0},children:"War"}),e.warInProgress&&p.jsx("span",{style:{padding:"8px 16px",backgroundColor:"#dc2626",borderRadius:"8px",fontWeight:"bold",animation:"pulse 1s infinite"},children:"WAR!"})]}),p.jsx(S0,{playerId:s,player:a,isCurrentUser:!1,isTop:!0}),p.jsx("div",{style:{padding:"20px",margin:"20px 0",textAlign:"center",backgroundColor:"#0f3460",borderRadius:"12px"},children:e.warInProgress?p.jsxs("div",{children:[p.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:" WAR! "}),p.jsx("div",{style:{color:"#a0a0a0"},children:"Place 3 cards face-down, then flip the 4th!"})]}):b?p.jsxs("div",{children:[p.jsx("div",{style:{fontSize:"20px",marginBottom:"12px"},children:"Cards revealed!"}),p.jsx("button",{onClick:m,style:{padding:"12px 32px",fontSize:"16px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px"},children:"Resolve Round"})]}):p.jsx("div",{style:{color:"#a0a0a0"},children:"Flip your cards to battle!"})}),p.jsx(S0,{playerId:i,player:o,isCurrentUser:!0,isTop:!1}),p.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",marginTop:"20px"},children:[l&&p.jsx("button",{onClick:d,style:{padding:"16px 48px",fontSize:"18px",cursor:"pointer",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px"},children:"Flip Card!"}),f&&p.jsx("button",{onClick:y,style:{padding:"16px 48px",fontSize:"18px",cursor:"pointer",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px"},children:"Place War Cards!"})]})]})},Lw=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}];class $w{constructor(t){this.dataChannel=null,this.iceCandidates=[],this.iceGatheringComplete=!1,this._state="new",this.events=t,this.pc=new RTCPeerConnection({iceServers:Lw}),this.setupPeerConnectionHandlers()}get state(){return this._state}setState(t){this._state=t,this.events.onStateChange(t)}setupPeerConnectionHandlers(){this.pc.onicecandidate=t=>{t.candidate&&this.iceCandidates.push(t.candidate.toJSON())},this.pc.onicegatheringstatechange=()=>{this.pc.iceGatheringState==="complete"&&(this.iceGatheringComplete=!0)},this.pc.onconnectionstatechange=()=>{switch(this.pc.connectionState){case"connecting":this.setState("connecting");break;case"connected":this.setState("connected");break;case"disconnected":this.setState("disconnected");break;case"failed":this.setState("failed"),this.events.onError(new Error("Connection failed"));break}},this.pc.ondatachannel=t=>{this.setupDataChannel(t.channel)}}setupDataChannel(t){this.dataChannel=t,t.onopen=()=>{console.log("[WebRTC] Data channel opened"),this.setState("connected")},t.onclose=()=>{console.log("[WebRTC] Data channel closed"),this.setState("disconnected")},t.onerror=r=>{console.error("[WebRTC] Data channel error:",r),this.events.onError(new Error("Data channel error"))},t.onmessage=r=>{this.events.onMessage(r.data)}}async createOffer(){this.setState("connecting");const t=this.pc.createDataChannel("game",{ordered:!0});this.setupDataChannel(t);const r=await this.pc.createOffer();return await this.pc.setLocalDescription(r),await this.waitForIceGathering(),{sdp:this.pc.localDescription.sdp,iceCandidates:this.iceCandidates}}async acceptOffer(t){this.setState("connecting"),await this.pc.setRemoteDescription({type:"offer",sdp:t.sdp});for(const n of t.iceCandidates)await this.pc.addIceCandidate(n);const r=await this.pc.createAnswer();return await this.pc.setLocalDescription(r),await this.waitForIceGathering(),{sdp:this.pc.localDescription.sdp,iceCandidates:this.iceCandidates}}async acceptAnswer(t){await this.pc.setRemoteDescription({type:"answer",sdp:t.sdp});for(const r of t.iceCandidates)await this.pc.addIceCandidate(r)}send(t){if(!this.dataChannel||this.dataChannel.readyState!=="open")throw new Error("Data channel not open");this.dataChannel.send(t)}close(){this.dataChannel&&this.dataChannel.close(),this.pc.close(),this.setState("disconnected")}waitForIceGathering(t=5e3){return new Promise((r,n)=>{if(this.iceGatheringComplete||this.pc.iceGatheringState==="complete"){r();return}const i=setTimeout(()=>{console.log("[WebRTC] ICE gathering timeout, proceeding with available candidates"),r()},t),s=()=>{this.pc.iceGatheringState==="complete"&&(clearTimeout(i),this.pc.removeEventListener("icegatheringstatechange",s),r())};this.pc.addEventListener("icegatheringstatechange",s)})}}async function Fw(e){const r=new TextEncoder().encode(e);if(typeof CompressionStream>"u")return r;const n=new CompressionStream("gzip"),i=n.writable.getWriter();i.write(r),i.close();const s=[],o=n.readable.getReader();for(;;){const{done:d,value:y}=await o.read();if(d)break;s.push(y)}const a=s.reduce((d,y)=>d+y.length,0),l=new Uint8Array(a);let f=0;for(const d of s)l.set(d,f),f+=d.length;return l}async function Uw(e){const t=new TextDecoder;if(typeof DecompressionStream>"u")return t.decode(e);try{const r=new DecompressionStream("gzip"),n=r.writable.getWriter();n.write(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),n.close();const i=[],s=r.readable.getReader();for(;;){const{done:f,value:d}=await s.read();if(f)break;i.push(d)}const o=i.reduce((f,d)=>f+d.length,0),a=new Uint8Array(o);let l=0;for(const f of i)a.set(f,l),l+=f.length;return t.decode(a)}catch{return t.decode(e)}}function Hw(e){const t=Array.from(e).map(r=>String.fromCharCode(r)).join("");return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Ww(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=t+"===".slice(0,(4-t.length%4)%4),n=atob(r),i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}function qw(e){return e.split(`\r
`).filter(t=>t.trim()&&!t.startsWith("a=extmap")).join(`
`)}function Kw(e){return e.split(`
`).join(`\r
`)+`\r
`}async function k0(e){const t={s:qw(e.sdp),i:e.iceCandidates.map(i=>({c:i.candidate,m:i.sdpMid,l:i.sdpMLineIndex}))},r=JSON.stringify(t),n=await Fw(r);return Hw(n)}async function _0(e){try{const t=Ww(e.trim()),r=await Uw(t),n=JSON.parse(r);return{sdp:Kw(n.s),iceCandidates:n.i.map(i=>({candidate:i.c,sdpMid:i.m,sdpMLineIndex:i.l}))}}catch(t){throw new Error("Invalid join code: "+(t instanceof Error?t.message:"Unknown error"))}}function P0(e){const t=e.trim();return/^[A-Za-z0-9_-]{50,}$/.test(t)}class Vw{constructor(t){this.peerConnection=null,this._state={phase:"idle"},this.signalHandlers=new Set,this.events=t}get state(){return this._state}setState(t){this._state=t,this.events.onStateChange(t)}createPeerConnection(){const t={onStateChange:r=>{this.events.onConnectionStateChange(r),r==="connected"?this.setState({phase:"connected"}):(r==="failed"||r==="disconnected")&&this._state.phase!=="error"&&this.setState({phase:"error",error:`Connection ${r}`})},onMessage:r=>{try{const n=JSON.parse(r);if(n.type==="__signal__"){this._dispatchSignal(n.payload);return}}catch{}this.events.onMessage(r)},onError:r=>{this.setState({phase:"error",error:r.message})}};return new $w(t)}async createGame(){this.cleanup(),this.setState({phase:"creating-offer",role:"host"});try{this.peerConnection=this.createPeerConnection();const t=await this.peerConnection.createOffer(),r=await k0(t);return this.setState({phase:"waiting-for-answer",role:"host",offerCode:r}),r}catch(t){const r=t instanceof Error?t.message:"Failed to create offer";throw this.setState({phase:"error",error:r}),t}}async joinGame(t){if(!P0(t))throw new Error("Invalid offer code format");this.cleanup(),this.setState({phase:"entering-offer",role:"guest"});try{const r=await _0(t);this.peerConnection=this.createPeerConnection();const n=await this.peerConnection.acceptOffer(r),i=await k0(n);return this.setState({phase:"waiting-for-host",role:"guest",answerCode:i}),i}catch(r){const n=r instanceof Error?r.message:"Failed to join game";throw this.setState({phase:"error",error:n}),r}}async acceptAnswer(t){if(!P0(t))throw new Error("Invalid answer code format");if(!this.peerConnection)throw new Error("No pending connection - create a game first");if(this._state.phase!=="waiting-for-answer")throw new Error("Not waiting for answer");this.setState({phase:"connecting"});try{const r=await _0(t);await this.peerConnection.acceptAnswer(r)}catch(r){const n=r instanceof Error?r.message:"Failed to accept answer";throw this.setState({phase:"error",error:n}),r}}send(t){if(!this.peerConnection)throw new Error("Not connected");this.peerConnection.send(t)}isConnected(){return this._state.phase==="connected"}cleanup(){this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.setState({phase:"idle"})}close(){this.cleanup()}sendSignal(t){const r=JSON.stringify({type:"__signal__",payload:t});this.send(r)}onSignal(t){this.signalHandlers.add(t)}offSignal(t){this.signalHandlers.delete(t)}_dispatchSignal(t){this.signalHandlers.forEach(r=>{try{r(t)}catch(n){console.error("[JoinCodeConnection] Signal handler error:",n)}})}}function Jw(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Yw(e){return new TextEncoder().encode(e)}function Qw(e){return new TextDecoder().decode(e)}function Xw(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,l=e.charAt(0),f=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function y(k){if(k instanceof Uint8Array||(ArrayBuffer.isView(k)?k=new Uint8Array(k.buffer,k.byteOffset,k.byteLength):Array.isArray(k)&&(k=Uint8Array.from(k))),!(k instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(k.length===0)return"";for(var M=0,N=0,S=0,v=k.length;S!==v&&k[S]===0;)S++,M++;for(var P=(v-S)*d+1>>>0,j=new Uint8Array(P);S!==v;){for(var D=k[S],F=0,T=P-1;(D!==0||F<N)&&T!==-1;T--,F++)D+=256*j[T]>>>0,j[T]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");N=F,S++}for(var L=P-N;L!==P&&j[L]===0;)L++;for(var V=l.repeat(M);L<P;++L)V+=e.charAt(j[L]);return V}function m(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return new Uint8Array;var M=0;if(k[M]!==" "){for(var N=0,S=0;k[M]===l;)N++,M++;for(var v=(k.length-M)*f+1>>>0,P=new Uint8Array(v);k[M];){var j=r[k.charCodeAt(M)];if(j===255)return;for(var D=0,F=v-1;(j!==0||D<S)&&F!==-1;F--,D++)j+=a*P[F]>>>0,P[F]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");S=D,M++}if(k[M]!==" "){for(var T=v-S;T!==v&&P[T]===0;)T++;for(var L=new Uint8Array(N+(v-T)),V=N;T!==v;)L[V++]=P[T++];return L}}}function b(k){var M=m(k);if(M)return M;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:m,decode:b}}var Zw=Xw,Gw=Zw;class e9{constructor(t,r,n){le(this,"name");le(this,"prefix");le(this,"baseEncode");this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class t9{constructor(t,r,n){le(this,"name");le(this,"prefix");le(this,"baseDecode");le(this,"prefixCodePoint");this.name=t,this.prefix=r;const i=r.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return fg(this,t)}}class r9{constructor(t){le(this,"decoders");this.decoders=t}or(t){return fg(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function fg(e,t){return new r9({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class n9{constructor(t,r,n,i){le(this,"name");le(this,"prefix");le(this,"baseEncode");le(this,"baseDecode");le(this,"encoder");le(this,"decoder");this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new e9(t,r,n),this.decoder=new t9(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function Il({name:e,prefix:t,encode:r,decode:n}){return new n9(e,t,r,n)}function vo({name:e,prefix:t,alphabet:r}){const{encode:n,decode:i}=Gw(r,e);return Il({prefix:t,name:e,encode:n,decode:s=>Jw(i(s))})}function i9(e,t,r,n){let i=e.length;for(;e[i-1]==="=";)--i;const s=new Uint8Array(i*r/8|0);let o=0,a=0,l=0;for(let f=0;f<i;++f){const d=t[e[f]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|d,o+=r,o>=8&&(o-=8,s[l++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return s}function s9(e,t,r){const n=t[t.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<e.length;++l)for(a=a<<8|e[l],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o!==0&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s}function o9(e){const t={};for(let r=0;r<e.length;++r)t[e[r]]=r;return t}function yt({name:e,prefix:t,bitsPerChar:r,alphabet:n}){const i=o9(n);return Il({prefix:t,name:e,encode(s){return s9(s,n,r)},decode(s){return i9(s,i,r,e)}})}const a9=vo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),l9=vo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),c9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:a9,base58flickr:l9},Symbol.toStringTag,{value:"Module"})),u9=yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),f9=yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),d9=yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),h9=yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),p9=yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),y9=yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),m9=yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),v9=yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),g9=yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),b9=Object.freeze(Object.defineProperty({__proto__:null,base32:u9,base32hex:p9,base32hexpad:m9,base32hexpadupper:v9,base32hexupper:y9,base32pad:d9,base32padupper:h9,base32upper:f9,base32z:g9},Symbol.toStringTag,{value:"Module"})),x9=vo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),w9=vo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),S9=Object.freeze(Object.defineProperty({__proto__:null,base36:x9,base36upper:w9},Symbol.toStringTag,{value:"Module"}));function C0(e=0){return new Uint8Array(e)}function Ha(e=0){return new Uint8Array(e)}const k9=vo({prefix:"9",name:"base10",alphabet:"0123456789"}),_9=Object.freeze(Object.defineProperty({__proto__:null,base10:k9},Symbol.toStringTag,{value:"Module"})),P9=yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),C9=yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),M9=Object.freeze(Object.defineProperty({__proto__:null,base16:P9,base16upper:C9},Symbol.toStringTag,{value:"Module"})),E9=yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),A9=Object.freeze(Object.defineProperty({__proto__:null,base2:E9},Symbol.toStringTag,{value:"Module"})),dg=Array.from(""),I9=dg.reduce((e,t,r)=>(e[r]=t,e),[]),R9=dg.reduce((e,t,r)=>{const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function O9(e){return e.reduce((t,r)=>(t+=I9[r],t),"")}function j9(e){const t=[];for(const r of e){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const i=R9[n];if(i==null)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const N9=Il({prefix:"",name:"base256emoji",encode:O9,decode:j9}),T9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:N9},Symbol.toStringTag,{value:"Module"})),D9=yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),B9=yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),z9=yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),L9=yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),$9=Object.freeze(Object.defineProperty({__proto__:null,base64:D9,base64pad:B9,base64url:z9,base64urlpad:L9},Symbol.toStringTag,{value:"Module"})),F9=yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),U9=Object.freeze(Object.defineProperty({__proto__:null,base8:F9},Symbol.toStringTag,{value:"Module"})),H9=Il({prefix:"\0",name:"identity",encode:e=>Qw(e),decode:e=>Yw(e)}),W9=Object.freeze(Object.defineProperty({__proto__:null,identity:H9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const M0={...W9,...A9,...U9,..._9,...M9,...b9,...S9,...c9,...$9,...T9};function hg(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const E0=hg("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Wc=hg("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=Ha(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),q9={utf8:E0,"utf-8":E0,hex:M0.base16,latin1:Wc,ascii:Wc,binary:Wc,...M0};function K9(e,t="utf8"){const r=q9[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}const V9=Math.pow(2,7),J9=Math.pow(2,14),Y9=Math.pow(2,21),pg=Math.pow(2,28),yg=Math.pow(2,35),mg=Math.pow(2,42),vg=Math.pow(2,49),Et=128,un=127;function Gd(e){if(e<V9)return 1;if(e<J9)return 2;if(e<Y9)return 3;if(e<pg)return 4;if(e<yg)return 5;if(e<mg)return 6;if(e<vg)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Q9(e,t,r=0){switch(Gd(e)){case 8:t[r++]=e&255|Et,e/=128;case 7:t[r++]=e&255|Et,e/=128;case 6:t[r++]=e&255|Et,e/=128;case 5:t[r++]=e&255|Et,e/=128;case 4:t[r++]=e&255|Et,e>>>=7;case 3:t[r++]=e&255|Et,e>>>=7;case 2:t[r++]=e&255|Et,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function X9(e,t){let r=e[t],n=0;if(n+=r&un,r<Et||(r=e[t+1],n+=(r&un)<<7,r<Et)||(r=e[t+2],n+=(r&un)<<14,r<Et)||(r=e[t+3],n+=(r&un)<<21,r<Et)||(r=e[t+4],n+=(r&un)*pg,r<Et)||(r=e[t+5],n+=(r&un)*yg,r<Et)||(r=e[t+6],n+=(r&un)*mg,r<Et)||(r=e[t+7],n+=(r&un)*vg,r<Et))return n;throw new RangeError("Could not decode varint")}const eh=new Float32Array([-0]),gn=new Uint8Array(eh.buffer);function Z9(e,t,r){eh[0]=e,t[r]=gn[0],t[r+1]=gn[1],t[r+2]=gn[2],t[r+3]=gn[3]}function G9(e,t){return gn[0]=e[t],gn[1]=e[t+1],gn[2]=e[t+2],gn[3]=e[t+3],eh[0]}const th=new Float64Array([-0]),bt=new Uint8Array(th.buffer);function e7(e,t,r){th[0]=e,t[r]=bt[0],t[r+1]=bt[1],t[r+2]=bt[2],t[r+3]=bt[3],t[r+4]=bt[4],t[r+5]=bt[5],t[r+6]=bt[6],t[r+7]=bt[7]}function t7(e,t){return bt[0]=e[t],bt[1]=e[t+1],bt[2]=e[t+2],bt[3]=e[t+3],bt[4]=e[t+4],bt[5]=e[t+5],bt[6]=e[t+6],bt[7]=e[t+7],th[0]}const r7=BigInt(Number.MAX_SAFE_INTEGER),n7=BigInt(Number.MIN_SAFE_INTEGER);class St{constructor(t,r){le(this,"lo");le(this,"hi");this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){const t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){const t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){const t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return Gn;if(t<r7&&t>n7)return this.fromNumber(Number(t));const r=t<0n;r&&(t=-t);let n=t>>32n,i=t-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>A0&&(i=0n,++n>A0&&(n=0n))),new St(Number(i),Number(n))}static fromNumber(t){if(t===0)return Gn;const r=t<0;r&&(t=-t);let n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new St(n,i)}static from(t){return typeof t=="number"?St.fromNumber(t):typeof t=="bigint"?St.fromBigInt(t):typeof t=="string"?St.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new St(t.low>>>0,t.high>>>0):Gn}}const Gn=new St(0,0);Gn.toBigInt=function(){return 0n};Gn.zzEncode=Gn.zzDecode=function(){return this};Gn.length=function(){return 1};const A0=4294967296n;function i7(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function s7(e,t,r){if(r-t<1)return"";let i;const s=[];let o=0,a;for(;t<r;)a=e[t++],a<128?s[o++]=a:a>191&&a<224?s[o++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[o++]=55296+(a>>10),s[o++]=56320+(a&1023)):s[o++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,o>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i!=null?(o>0&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))}function gg(e,t,r){const n=r;let i,s;for(let o=0;o<e.length;++o)i=e.charCodeAt(o),i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&((s=e.charCodeAt(o+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++o,t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128);return r-n}function hr(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function Ho(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}class o7{constructor(t){le(this,"buf");le(this,"pos");le(this,"len");le(this,"_slice",Uint8Array.prototype.subarray);this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,hr(this,10);return t}int32(){return this.uint32()|0}sint32(){const t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw hr(this,4);return Ho(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw hr(this,4);return Ho(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw hr(this,4);const t=G9(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw hr(this,4);const t=t7(this.buf,this.pos);return this.pos+=8,t}bytes(){const t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw hr(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const t=this.bytes();return s7(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw hr(this,t);this.pos+=t}else do if(this.pos>=this.len)throw hr(this);while(this.buf[this.pos++]&128);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){const t=new St(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw hr(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw hr(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw hr(this,8);const t=Ho(this.buf,this.pos+=4),r=Ho(this.buf,this.pos+=4);return new St(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const t=X9(this.buf,this.pos);return this.pos+=Gd(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function a7(e){return new o7(e instanceof Uint8Array?e:e.subarray())}function bg(e,t,r){const n=a7(e);return t.decode(n,void 0,r)}function l7(e){let n,i=8192;return function(o){if(o<1||o>4096)return Ha(o);i+o>8192&&(n=Ha(8192),i=0);const a=n.subarray(i,i+=o);return i&7&&(i=(i|7)+1),a}}class Cs{constructor(t,r,n){le(this,"fn");le(this,"len");le(this,"next");le(this,"val");this.fn=t,this.len=r,this.next=void 0,this.val=n}}function qc(){}class c7{constructor(t){le(this,"head");le(this,"tail");le(this,"len");le(this,"next");this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}}const u7=l7();function f7(e){return globalThis.Buffer!=null?Ha(e):u7(e)}class cf{constructor(){le(this,"len");le(this,"head");le(this,"tail");le(this,"states");this.len=0,this.head=new Cs(qc,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new Cs(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new h7((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(Wo,10,St.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){const r=St.fromBigInt(t);return this._push(Wo,r.length(),r)}uint64Number(t){return this._push(Q9,Gd(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){const r=St.fromBigInt(t).zzEncode();return this._push(Wo,r.length(),r)}sint64Number(t){const r=St.fromNumber(t).zzEncode();return this._push(Wo,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(Kc,1,t?1:0)}fixed32(t){return this._push(vs,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){const r=St.fromBigInt(t);return this._push(vs,4,r.lo)._push(vs,4,r.hi)}fixed64Number(t){const r=St.fromNumber(t);return this._push(vs,4,r.lo)._push(vs,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(Z9,4,t)}double(t){return this._push(e7,8,t)}bytes(t){const r=t.length>>>0;return r===0?this._push(Kc,1,0):this.uint32(r)._push(p7,r,t)}string(t){const r=i7(t);return r!==0?this.uint32(r)._push(gg,r,t):this._push(Kc,1,0)}fork(){return this.states=new c7(this),this.head=this.tail=new Cs(qc,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Cs(qc,0,0),this.len=0),this}ldelim(){const t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next;const r=f7(this.len);let n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}}function Kc(e,t,r){t[r]=e&255}function d7(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}class h7 extends Cs{constructor(r,n){super(d7,r,n);le(this,"next");this.next=void 0}}function Wo(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function vs(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function p7(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(cf.prototype.bytes=function(e){const t=e.length>>>0;return this.uint32(t),t>0&&this._push(y7,t,e),this},cf.prototype.string=function(e){const t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(m7,t,e),this});function y7(e,t,r){t.set(e,r)}function m7(e,t,r){e.length<40?gg(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(K9(e),r)}function v7(){return new cf}function xg(e,t){const r=v7();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var uf;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(uf||(uf={}));function g7(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function wg(e,t){return g7("message",uf.LENGTH_DELIMITED,e,t)}class I0 extends Error{constructor(){super(...arguments);le(this,"code","ERR_MAX_LENGTH");le(this,"name","MaxLengthError")}}var T0,D0;(D0=(T0=globalThis.process)==null?void 0:T0.env)!=null&&D0.DUMP_SESSION_KEYS;var Wa;(function(e){let t;e.codec=()=>(t==null&&(t=wg((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.webtransportCerthashes!=null)for(const s of r.webtransportCerthashes)n.uint32(10),n.bytes(s);if(r.streamMuxers!=null)for(const s of r.streamMuxers)n.uint32(18),n.string(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{var a,l;const s={webtransportCerthashes:[],streamMuxers:[]},o=n==null?r.len:r.pos+n;for(;r.pos<o;){const f=r.uint32();switch(f>>>3){case 1:{if(((a=i.limits)==null?void 0:a.webtransportCerthashes)!=null&&s.webtransportCerthashes.length===i.limits.webtransportCerthashes)throw new I0('Decode error - map field "webtransportCerthashes" had too many elements');s.webtransportCerthashes.push(r.bytes());break}case 2:{if(((l=i.limits)==null?void 0:l.streamMuxers)!=null&&s.streamMuxers.length===i.limits.streamMuxers)throw new I0('Decode error - map field "streamMuxers" had too many elements');s.streamMuxers.push(r.string());break}default:{r.skipType(f&7);break}}}return s})),t),e.encode=r=>xg(r,e.codec()),e.decode=(r,n)=>bg(r,e.codec(),n)})(Wa||(Wa={}));var R0;(function(e){let t;e.codec=()=>(t==null&&(t=wg((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.identityKey!=null&&r.identityKey.byteLength>0&&(n.uint32(10),n.bytes(r.identityKey)),r.identitySig!=null&&r.identitySig.byteLength>0&&(n.uint32(18),n.bytes(r.identitySig)),r.extensions!=null&&(n.uint32(34),Wa.codec().encode(r.extensions,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{var a;const s={identityKey:C0(0),identitySig:C0(0)},o=n==null?r.len:r.pos+n;for(;r.pos<o;){const l=r.uint32();switch(l>>>3){case 1:{s.identityKey=r.bytes();break}case 2:{s.identitySig=r.bytes();break}case 4:{s.extensions=Wa.codec().decode(r,r.uint32(),{limits:(a=i.limits)==null?void 0:a.extensions});break}default:{r.skipType(l&7);break}}}return s})),t),e.encode=r=>xg(r,e.codec()),e.decode=(r,n)=>bg(r,e.codec(),n)})(R0||(R0={}));var O0;(function(e){e[e.Data=0]="Data",e[e.WindowUpdate=1]="WindowUpdate",e[e.Ping=2]="Ping",e[e.GoAway=3]="GoAway"})(O0||(O0={}));var ff;(function(e){e[e.SYN=1]="SYN",e[e.ACK=2]="ACK",e[e.FIN=4]="FIN",e[e.RST=8]="RST"})(ff||(ff={}));Object.values(ff).filter(e=>typeof e!="string");var j0;(function(e){e[e.NormalTermination=0]="NormalTermination",e[e.ProtocolError=1]="ProtocolError",e[e.InternalError=2]="InternalError"})(j0||(j0={}));var N0;(function(e){e[e.Init=0]="Init",e[e.SYNSent=1]="SYNSent",e[e.SYNReceived=2]="SYNReceived",e[e.Established=3]="Established",e[e.Finished=4]="Finished",e[e.Paused=5]="Paused"})(N0||(N0={}));class b7{constructor(){this.state=null,this.initialState=null,this.metadata=null,this.log=[]}async createMatch(t,r){this.state=r.initialState,this.initialState=r.initialState,this.metadata=r.metadata,this.log=[]}async fetch(t,r){const n={};return r.state&&(n.state=this.state||void 0),r.initialState&&(n.initialState=this.initialState||void 0),r.metadata&&(n.metadata=this.metadata),r.log&&(n.log=this.log),n}async setState(t,r,n){this.state=r,n&&(this.log=[...this.log,...n])}}function x7(e){const t=e.phases;if(!t)return null;for(const[r,n]of Object.entries(t))if(n.start===!0)return r;return null}function w7(e,t){const r=x7(e),n={numPlayers:t,playOrder:Array.from({length:t},(s,o)=>String(o)),playOrderPos:0,activePlayers:null,currentPlayer:"0",numMoves:0,turn:1,phase:r||null};return{G:e.setup?e.setup({ctx:n}):{},ctx:n,plugins:{},_stateID:0,_undo:[],_redo:[]}}function S7(e,t,r){var i,s,o;let n=(i=e.moves)==null?void 0:i[t];if(!n&&r){const a=e.phases;n=(o=(s=a==null?void 0:a[r])==null?void 0:s.moves)==null?void 0:o[t]}return n?typeof n=="function"?n:typeof n=="object"&&typeof n.move=="function"?n.move:null:null}function k7(e,t,r){var j;const{type:n,playerID:i,payload:s}=r;if(n!=="MAKE_MOVE")return q;const{type:o,args:a}=s,l=S7(e,o,t.ctx.phase);if(!l)return console.log("[applyAction] Move not found:",o,"phase:",t.ctx.phase),q;let f=JSON.parse(JSON.stringify(t.G)),d={...t.ctx},y=!1,m=!1;const M=l({G:f,ctx:d,playerID:i,events:{endPhase:()=>{console.log("[applyAction] endPhase called"),y=!0},endTurn:()=>{console.log("[applyAction] endTurn called"),m=!0}}},...a);if(M===q)return q;if(M!==void 0&&(f=M),y&&e.phases){const D=d.phase,F=e.phases[D];if(F!=null&&F.next){const T=typeof F.next=="function"?F.next({G:f,ctx:d}):F.next;console.log("[applyAction] Transitioning from phase",D,"to",T),d={...d,phase:T}}}if(!y&&e.phases&&d.phase){const D=e.phases[d.phase];if(D!=null&&D.endIf&&D.endIf({G:f,ctx:d})&&D.next){const T=typeof D.next=="function"?D.next({G:f,ctx:d}):D.next;console.log("[applyAction] Phase endIf triggered, transitioning to",T),d={...d,phase:T}}}const N=d.numMoves+1,S=m||((j=e.turn)==null?void 0:j.maxMoves)&&N>=e.turn.maxMoves;let v={...d,numMoves:N};if(S){const D=(d.playOrderPos+1)%d.numPlayers;v={...v,playOrderPos:D,currentPlayer:d.playOrder[D],numMoves:0,turn:d.turn+1}}let P;return e.endIf&&(P=e.endIf({G:f,ctx:v})),{G:f,ctx:P?{...v,gameover:P}:v,plugins:t.plugins,_stateID:t._stateID+1}}class _7{constructor(t,r,n){this.subscribers=new Map,this._isInitialized=!1,this.game=t,this.db=new b7,this.matchID=r,this.numPlayers=n,this.initialized=this.initGame()}async initGame(){const t=w7(this.game,this.numPlayers);await this.db.createMatch(this.matchID,{initialState:t,metadata:{gameName:this.game.name||"unknown",players:this.createInitialPlayers(),createdAt:Date.now(),updatedAt:Date.now()}}),this._isInitialized=!0,console.log("[P2PMaster] Game initialized with state:",t)}async waitForInit(){await this.initialized}get isInitialized(){return this._isInitialized}createInitialPlayers(){const t={};for(let r=0;r<this.numPlayers;r++)t[r]={id:r};return t}subscribe(t,r){this.subscribers.set(t,r)}unsubscribe(t){this.subscribers.delete(t)}notifyAll(t){this.subscribers.forEach(r=>{r(t)})}async onUpdate(t,r,n,i){if(await this.initialized,n!==this.matchID)return{error:"Match ID mismatch"};const{state:s}=await this.db.fetch(n,{state:!0});if(!s)return{error:"Match not found"};if(s._stateID!==r)return console.log(`[P2PMaster] Stale state: expected ${s._stateID}, got ${r}`),{error:"Stale state"};const o=k7(this.game,s,t);if(o===q)return{error:"Invalid move"};await this.db.setState(n,o),this.notifyAll({type:"update",args:[n,o,[]]})}async onSync(t,r,n,i=2){if(await this.initialized,t!==this.matchID)return{error:"Match ID mismatch"};const{state:s,initialState:o,metadata:a,log:l}=await this.db.fetch(t,{state:!0,initialState:!0,metadata:!0,log:!0});if(console.log("[P2PMaster] onSync - state:",s?"present":"null","initialState:",o?"present":"null","for player:",r),!s)return{error:"Match not found"};const f=this.filterMetadata(a),d=this.subscribers.get(r||"spectator");d&&d({type:"sync",args:[t,{state:s,initialState:o||s,filteredMetadata:f,log:l||[]}]})}async onChatMessage(t,r,n){this.notifyAll({type:"chat",args:[t,r]})}filterMetadata(t){return t!=null&&t.players?Object.entries(t.players).map(([r,n])=>({id:parseInt(r,10),name:n==null?void 0:n.name,isConnected:this.subscribers.has(r)})):[]}async getState(){const{state:t}=await this.db.fetch(this.matchID,{state:!0});return t||null}}class P7{constructor(t){this.master=null,this.messageBuffer=[],this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectTimeout=null,this._isConnected=!1,this.connectionStatusCallbacks=new Set,this.transportDataCallback=null,this.connection=t.connection,this.role=t.role,this.gameName=t.game.name||"unknown",this.playerID=t.playerID||null,this.matchID=t.matchID||"default",this.credentials=t.credentials,this.numPlayers=t.numPlayers||2,this.game=t.game,this.transportDataCallback=t.transportDataCallback||null}get isConnected(){return this._isConnected}subscribeToConnectionStatus(t){return this.connectionStatusCallbacks.add(t),()=>this.connectionStatusCallbacks.delete(t)}setConnectionStatus(t){this._isConnected!==t&&(this._isConnected=t,this.connectionStatusCallbacks.forEach(r=>r()))}notifyClient(t){console.log("[P2PTransport] notifyClient called with type:",t.type,"callback:",this.transportDataCallback?"present":"null"),this.transportDataCallback?this.transportDataCallback(t):console.warn("[P2PTransport] transportDataCallback is null, cannot notify client")}connect(){this.setupMessageHandler(),this.role==="host"?this.connectAsHost().catch(t=>{console.error("[P2PTransport] Failed to connect as host:",t)}):this.connectAsGuest()}setupMessageHandler(){const t=this.connection.events;if(!t){console.error("[P2PTransport] Cannot access connection events");return}const r=t.onMessage;t.onMessage=i=>{try{const s=JSON.parse(i);this.handleMessage(s)}catch(s){console.error("[P2PTransport] Failed to parse message:",s)}r==null||r(i)};const n=t.onConnectionStateChange;t.onConnectionStateChange=i=>{this.handleConnectionStateChange(i),n==null||n(i)}}handleConnectionStateChange(t){switch(console.log("[P2PTransport] Connection state:",t),t){case"connected":this.setConnectionStatus(!0),this.reconnectAttempts=0,this.flushMessageBuffer();break;case"disconnected":case"failed":this.setConnectionStatus(!1),this.attemptReconnect();break}}async connectAsHost(){console.log("[P2PTransport] Connecting as host"),this.master=new _7(this.game,this.matchID,this.numPlayers),await this.master.waitForInit(),console.log("[P2PTransport] Master initialized"),this.master.subscribe(this.playerID||"0",t=>{console.log("[P2PTransport] Host received data:",t.type),this.notifyClient(t)}),this.master.subscribe("1",t=>{console.log("[P2PTransport] Sending to guest:",t.type),this.sendToGuest(t)}),this.master.subscribe("remote",t=>{this.sendToGuest(t)}),this.setConnectionStatus(!0),this.requestSync(),setTimeout(()=>{this.master&&this.connection.isConnected()&&(console.log("[P2PTransport] Proactively syncing guest"),this.master.onSync(this.matchID,"1",void 0,this.numPlayers))},100)}connectAsGuest(){console.log("[P2PTransport] Connecting as guest"),this.connection.isConnected()&&(this.setConnectionStatus(!0),this.sendToHost({type:"sync-req",args:[this.matchID,this.playerID,this.credentials,this.numPlayers]}))}handleMessage(t){this.role==="host"?this.handleHostMessage(t):this.handleGuestMessage(t)}handleHostMessage(t){if(this.master)switch(t.type){case"action":const[r,n,i,s]=t.args;this.master.onUpdate(r,n,i,s).then(b=>{b!=null&&b.error&&this.sendToGuest({type:"error",args:[b.error]})});break;case"sync-req":const[o,a,l,f]=t.args;if(!this.master)return;const d=a||"1";console.log("[P2PTransport] Received sync-req from guest:",d),this.master.onSync(o,d,l,f);break;case"chat":const[y,m]=t.args;this.master.onChatMessage(y,m,this.credentials);break}}handleGuestMessage(t){switch(t.type){case"update":case"sync":case"matchData":case"chat":case"patch":this.notifyClient(t);break;case"error":console.error("[P2PTransport] Host error:",t.args[0]);break}}sendToHost(t){this.send(t)}sendToGuest(t){this.send(t)}send(t){if(!this.connection.isConnected()){console.log("[P2PTransport] Buffering message while disconnected"),this.messageBuffer.push(t);return}try{this.connection.send(JSON.stringify(t))}catch(r){console.error("[P2PTransport] Failed to send message:",r),this.messageBuffer.push(t)}}flushMessageBuffer(){if(this.messageBuffer.length===0)return;console.log(`[P2PTransport] Flushing ${this.messageBuffer.length} buffered messages`);const t=[...this.messageBuffer];this.messageBuffer=[];for(const r of t)this.send(r)}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[P2PTransport] Max reconnect attempts reached - connection lost"),console.log("[P2PTransport] User should re-exchange join codes to reconnect");return}this.reconnectAttempts++;const t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(`[P2PTransport] Waiting for connection recovery (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}) in ${t}ms`),this.reconnectTimeout=setTimeout(()=>{this.connection.isConnected()?(console.log("[P2PTransport] Connection recovered"),this.setConnectionStatus(!0),this.reconnectAttempts=0,this.flushMessageBuffer(),this.role==="guest"&&this.sendToHost({type:"sync-req",args:[this.matchID,this.playerID,this.credentials,this.numPlayers]})):this.attemptReconnect()},t)}disconnect(){console.log("[P2PTransport] Disconnecting"),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.master&&(this.master.unsubscribe(this.playerID||"0"),this.master.unsubscribe("1"),this.master.unsubscribe("remote"),this.master=null),this.setConnectionStatus(!1),this.messageBuffer=[]}sendAction(t,r){console.log("[P2PTransport] sendAction called:",r.type,"state:",t?`stateID=${t._stateID}`:"null"),this.role==="host"&&this.master?this.master.onUpdate(r,t._stateID,this.matchID,this.playerID||"0").then(n=>{n!=null&&n.error?console.error("[P2PTransport] Action failed:",n.error):console.log("[P2PTransport] Action processed successfully")}):this.sendToHost({type:"action",args:[r,t._stateID,this.matchID,this.playerID]})}sendChatMessage(t,r){const n={type:"chat",args:[t,r]};this.role==="host"&&this.master?this.master.onChatMessage(t,r,this.credentials):this.sendToHost(n)}requestSync(){console.log("[P2PTransport] requestSync called, role:",this.role,"master:",this.master?"present":"null"),this.role==="host"&&this.master?this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers).then(()=>{console.log("[P2PTransport] Host sync complete")}):this.sendToHost({type:"sync-req",args:[this.matchID,this.playerID,this.credentials,this.numPlayers]})}updateMatchID(t){this.matchID=t}updatePlayerID(t){this.playerID=t}updateCredentials(t){this.credentials=t}}function C7(e){return t=>new P7({...e,game:t.game,transportDataCallback:t.transportDataCallback})}async function M7(){return console.log("[P2P] P2P layer initialized"),{ok:!0}}const E7=({onConnected:e,onBack:t})=>{const[r,n]=H.useState("select"),[i,s]=H.useState({phase:"idle"}),[o,a]=H.useState("new"),[l,f]=H.useState(""),[d,y]=H.useState(""),[m,b]=H.useState(""),[k,M]=H.useState(null),[N,S]=H.useState(!1),[v,P]=H.useState(!1),{wallet:j,status:D}=ug(),F=D==="connecting",T=H.useRef(null),L=H.useRef("host");H.useEffect(()=>(T.current=new Vw({onStateChange:$=>{s($),$.phase==="error"&&M($.error),"role"in $&&$.role&&(L.current=$.role)},onMessage:$=>{console.log("[P2PLobby] Received message:",$)},onConnectionStateChange:$=>{a($),$==="connected"&&T.current&&e(T.current,L.current)}}),()=>{T.current&&!T.current.isConnected()&&T.current.close()}),[e]);const V=H.useCallback(async()=>{if(!(!T.current||v)){M(null),S(!1),P(!0);try{const $=await T.current.createGame();f($),n("host")}catch($){M($ instanceof Error?$.message:"Failed to create game")}finally{P(!1)}}},[v]),ee=H.useCallback(async()=>{if(!(!T.current||!m.trim())){M(null),S(!1);try{const $=await T.current.joinGame(m.trim());y($)}catch($){M($ instanceof Error?$.message:"Failed to join game")}}},[m]),A=H.useCallback(async()=>{if(!(!T.current||!m.trim())){M(null);try{await T.current.acceptAnswer(m.trim())}catch($){M($ instanceof Error?$.message:"Failed to accept answer")}}},[m]),c=H.useCallback(async $=>{try{await navigator.clipboard.writeText($),S(!0),setTimeout(()=>S(!1),2e3)}catch(J){console.error("Failed to copy:",J)}},[]),h=H.useCallback(()=>{var $;($=T.current)==null||$.cleanup(),r==="select"?t():(n("select"),f(""),y(""),b(""),M(null),s({phase:"idle"}))},[r,t]),g={padding:"40px",maxWidth:"600px",margin:"0 auto",fontFamily:"system-ui, sans-serif"},w={backgroundColor:"#16213e",padding:"24px",borderRadius:"12px",marginBottom:"20px",border:"1px solid #3a3a5c"},C={padding:"12px 24px",fontSize:"16px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",width:"100%",marginBottom:"12px"},R={...C,backgroundColor:"#3a3a5c"},E={width:"100%",padding:"12px",fontSize:"14px",backgroundColor:"#1a1a2e",color:"#e4e4e4",border:"1px solid #3a3a5c",borderRadius:"8px",marginBottom:"12px",fontFamily:"monospace",boxSizing:"border-box"},x={backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",wordBreak:"break-all",fontSize:"12px",fontFamily:"monospace",color:"#a0a0a0",marginBottom:"12px",maxHeight:"120px",overflow:"auto"},u={padding:"12px",borderRadius:"8px",marginBottom:"12px",textAlign:"center"},_=()=>p.jsxs("div",{style:{backgroundColor:"#0f3460",padding:"8px 12px",borderRadius:"8px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",border:"1px solid #3a3a5c"},children:[p.jsx("span",{style:{color:"#6fcf6f",fontSize:"10px"},children:""}),p.jsx("span",{style:{color:"#a0a0a0",fontSize:"12px"},children:"Wallet:"}),F?p.jsx("span",{style:{color:"#ff9800",fontSize:"12px"},children:"Connecting..."}):j?p.jsxs("span",{style:{color:"#e4e4e4",fontSize:"12px",fontFamily:"monospace"},children:[j.address.slice(0,6),"...",j.address.slice(-4)]}):p.jsx("span",{style:{color:"#ff6b6b",fontSize:"12px"},children:"Not connected"}),p.jsx("span",{style:{backgroundColor:"#3a3a5c",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",color:"#a0a0a0"},children:"Demo"})]});if(r==="select")return p.jsxs("div",{style:g,children:[p.jsx(_,{}),p.jsx("h1",{style:{color:"#e4e4e4",marginBottom:"8px"},children:"P2P Online Game"}),p.jsx("p",{style:{color:"#a0a0a0",marginBottom:"24px"},children:"Connect directly with another player - no server required!"}),p.jsxs("div",{style:w,children:[p.jsx("h2",{style:{color:"#e4e4e4",marginBottom:"16px"},children:"Start a Game"}),p.jsx("button",{style:{...C,opacity:v?.7:1,cursor:v?"wait":"pointer"},onClick:V,disabled:v,children:v?"Creating Game...":"Create Game (Host)"}),p.jsx("button",{style:R,onClick:()=>n("join"),children:"Join Game (Guest)"})]}),p.jsxs("div",{style:{...w,backgroundColor:"#0f3460",color:"#c0d0e0",fontSize:"14px"},children:[p.jsx("strong",{children:"How it works:"}),p.jsxs("ol",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[p.jsx("li",{children:"Host creates a game and shares their code"}),p.jsx("li",{children:"Guest enters the code and shares their response code"}),p.jsx("li",{children:"Host enters the response code to connect"}),p.jsx("li",{children:"Play!"})]})]}),p.jsx("button",{style:{...R,marginTop:"12px"},onClick:t,children:"Back to Lobby"})]});if(r==="host"){const $=i.phase==="waiting-for-answer",J=i.phase==="connecting",Y=i.phase==="connected";return p.jsxs("div",{style:g,children:[p.jsx(_,{}),p.jsx("h1",{style:{color:"#e4e4e4",marginBottom:"8px"},children:"Host Game"}),p.jsxs("div",{style:w,children:[p.jsx("h3",{style:{color:"#e4e4e4",marginBottom:"12px"},children:"Step 1: Share this code with your opponent"}),l?p.jsxs(p.Fragment,{children:[p.jsx("div",{style:x,children:l}),p.jsx("button",{style:C,onClick:()=>c(l),children:N?"Copied!":"Copy Code"})]}):p.jsx("div",{style:{...u,backgroundColor:"#3d2a1a",color:"#ff9800"},children:"Generating code..."})]}),$&&p.jsxs("div",{style:w,children:[p.jsx("h3",{style:{color:"#e4e4e4",marginBottom:"12px"},children:"Step 2: Enter your opponent's response code"}),p.jsx("textarea",{style:{...E,minHeight:"80px",resize:"vertical"},placeholder:"Paste the response code here...",value:m,onChange:B=>b(B.target.value)}),p.jsx("button",{style:C,onClick:A,disabled:!m.trim(),children:"Connect"})]}),J&&p.jsx("div",{style:{...u,backgroundColor:"#3d2a1a",color:"#ff9800"},children:"Connecting..."}),Y&&p.jsx("div",{style:{...u,backgroundColor:"#1a4a3a",color:"#6fcf6f"},children:"Connected! Starting game..."}),k&&p.jsxs("div",{style:{...u,backgroundColor:"#4a1a1a",color:"#ff6b6b"},children:["Error: ",k]}),p.jsx("button",{style:R,onClick:h,children:"Cancel"})]})}if(r==="join"){const $=i.phase==="waiting-for-host",J=i.phase==="connecting",Y=i.phase==="connected";return p.jsxs("div",{style:g,children:[p.jsx(_,{}),p.jsx("h1",{style:{color:"#e4e4e4",marginBottom:"8px"},children:"Join Game"}),p.jsxs("div",{style:w,children:[p.jsx("h3",{style:{color:"#e4e4e4",marginBottom:"12px"},children:"Step 1: Enter the host's code"}),p.jsx("textarea",{style:{...E,minHeight:"80px",resize:"vertical"},placeholder:"Paste the host's code here...",value:m,onChange:B=>b(B.target.value),disabled:$}),!$&&p.jsx("button",{style:C,onClick:ee,disabled:!m.trim(),children:"Generate Response"})]}),$&&p.jsxs("div",{style:w,children:[p.jsx("h3",{style:{color:"#e4e4e4",marginBottom:"12px"},children:"Step 2: Share this response code with the host"}),p.jsx("div",{style:x,children:d}),p.jsx("button",{style:C,onClick:()=>c(d),children:N?"Copied!":"Copy Response Code"}),p.jsx("div",{style:{...u,backgroundColor:"#0f3460",color:"#c0d0e0"},children:"Waiting for host to enter your code..."})]}),J&&p.jsx("div",{style:{...u,backgroundColor:"#3d2a1a",color:"#ff9800"},children:"Connecting..."}),Y&&p.jsx("div",{style:{...u,backgroundColor:"#1a4a3a",color:"#6fcf6f"},children:"Connected! Starting game..."}),k&&p.jsxs("div",{style:{...u,backgroundColor:"#4a1a1a",color:"#ff6b6b"},children:["Error: ",k]}),p.jsx("button",{style:R,onClick:h,children:"Cancel"})]})}return null},Vc=1e3,A7=100;class I7{constructor(t){if(this.balances=new Map,this.sessions=new Map,this.listeners=new Set,this.handCounter=0,this.sessionCounter=0,t)for(const[r,n]of Object.entries(t))this.balances.set(r,n)}async delay(){return new Promise(t=>setTimeout(t,A7))}emit(t){for(const r of this.listeners)try{r(t)}catch(n){console.error("[MockBlockchain] Event listener error:",n)}}generateTxHash(){return`0x${Array.from({length:64},()=>Math.floor(Math.random()*16).toString(16)).join("")}`}async getBalances(t){await this.delay();const r={};for(const n of t)this.balances.has(n)||(this.balances.set(n,Vc),console.log(`[MockBlockchain] Initialized balance for ${n}: ${Vc}`)),r[n]=this.balances.get(n);return console.log("[MockBlockchain] getBalances:",r),r}async registerSession(t){await this.delay();const r=`session-${++this.sessionCounter}`,n={...t,sessionId:r,createdAt:Date.now(),isActive:!0};return this.sessions.set(r,n),console.log("[MockBlockchain] Session registered:",n),this.emit({type:"sessionCreated",session:n}),n}async settlePot(t){await this.delay(),console.log("[MockBlockchain] Settling pot:",t);const r=Object.values(t.contributions).reduce((o,a)=>o+a,0);if(r!==t.totalPot)return{success:!1,newBalances:{},error:`Contribution mismatch: ${r} !== ${t.totalPot}`};const n=Object.values(t.payouts).reduce((o,a)=>o+a,0);if(n!==t.totalPot)return{success:!1,newBalances:{},error:`Payout mismatch: ${n} !== ${t.totalPot}`};for(const[o,a]of Object.entries(t.contributions)){const l=this.balances.get(o)||0;this.balances.set(o,l-a)}for(const[o,a]of Object.entries(t.payouts)){const l=this.balances.get(o)||0;this.balances.set(o,l+a)}const i={};for(const o of Object.keys(t.contributions))i[o]=this.balances.get(o)||0,this.emit({type:"balanceUpdate",playerId:o,newBalance:i[o]});const s={success:!0,txHash:this.generateTxHash(),newBalances:i};return console.log("[MockBlockchain] Settlement complete:",s),this.emit({type:"settlementComplete",handId:t.handId,result:s}),s}async endSession(t){await this.delay();const r=this.sessions.get(t);r&&(r.isActive=!1,console.log("[MockBlockchain] Session ended:",t),this.emit({type:"sessionEnded",sessionId:t}))}getPlayerAddress(t){return`0x${Array.from(t).reduce((n,i)=>n+i.charCodeAt(0),0).toString(16).padStart(40,"0")}`}addEventListener(t){return this.listeners.add(t),()=>this.listeners.delete(t)}setBalance(t,r){this.balances.set(t,r),this.emit({type:"balanceUpdate",playerId:t,newBalance:r})}getBalance(t){return this.balances.get(t)||Vc}generateHandId(){return`hand-${++this.handCounter}-${Date.now()}`}}let Jc=null;function Sg(e){return Jc||(Jc=new I7(e)),Jc}const R7=({game:e,onSelectMode:t,onBack:r})=>p.jsxs("div",{style:{padding:"40px",maxWidth:"600px",margin:"0 auto",fontFamily:"system-ui, sans-serif",textAlign:"center"},children:[p.jsx("button",{onClick:r,style:{position:"absolute",top:"20px",left:"20px",padding:"8px 16px",cursor:"pointer",backgroundColor:"#3a3a5c",color:"#e4e4e4",border:"none",borderRadius:"4px"},children:" Back"}),p.jsx("h1",{style:{marginBottom:"8px",color:"#e4e4e4"},children:e.name}),p.jsx("p",{style:{color:"#a0a0a0",marginBottom:"40px"},children:e.description}),p.jsxs("div",{style:{backgroundColor:"#16213e",padding:"32px",borderRadius:"12px",marginBottom:"20px",border:"1px solid #3a3a5c"},children:[p.jsx("h2",{style:{marginBottom:"24px",color:"#e4e4e4"},children:"Choose Play Mode"}),p.jsxs("button",{onClick:()=>t("local"),style:{padding:"16px 32px",fontSize:"18px",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",width:"100%",marginBottom:"16px"},children:["Local Hotseat (",e.minPlayers," Players)"]}),p.jsx("button",{onClick:()=>t("online"),style:{padding:"16px 32px",fontSize:"18px",cursor:"pointer",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"8px",width:"100%"},children:"P2P Online (No Server!)"})]}),p.jsxs("div",{style:{backgroundColor:"#0f3460",padding:"16px",borderRadius:"8px",fontSize:"14px",textAlign:"left",color:"#c0d0e0",border:"1px solid #3a3a5c"},children:[p.jsx("strong",{children:"Players:"})," ",e.minPlayers===e.maxPlayers?`${e.minPlayers} players`:`${e.minPlayers}-${e.maxPlayers} players`]})]});function df(e,t){switch(e){case"poker":return t?n=>p.jsx(x0,{...n,onNewHand:t}):x0;case"war":return zw;case"simple":default:return Dx}}const O7=({game:e,onBack:t})=>{const[r,n]=H.useState("0"),[i,s]=H.useState(0),[o,a]=H.useState(0),[l,f]=H.useState(!1),d=H.useMemo(()=>Sg(),[]),y=H.useCallback(async P=>{if(!l){f(!0);try{console.log("[LocalGame] Settling hand:",P);const j=await d.settlePot(P);j.success?(console.log("[LocalGame] Settlement complete, new balances:",j.newBalances),a(D=>D+1),s(D=>D+1)):(console.error("[LocalGame] Settlement failed:",j.error),alert(`Settlement failed: ${j.error}`))}catch(j){console.error("[LocalGame] Settlement error:",j),alert(`Settlement error: ${j}`)}finally{f(!1)}}},[d,l]),m=H.useMemo(()=>ov(),[i]),[b,k]=H.useState({});H.useEffect(()=>{d.getBalances(["0","1"]).then(k)},[d]);const M=H.useMemo(()=>d.generateHandId(),[d,i]),N=H.useMemo(()=>e.id==="poker"&&e.getCryptoGame?{...e.getCryptoGame(),setup:j=>{const D={numPlayers:j.numPlayers??2,playerIDs:j.playOrder??["0","1"],options:{initialBalances:b,handId:M,dealerIndex:o%2}};return Jd(D)}}:e.getGame(),[e,b,M,o]),S=H.useMemo(()=>za({game:N,board:df(e.id,y),multiplayer:m}),[N,e.id,m,y]),v=H.useMemo(()=>za({game:N,board:df(e.id,y),multiplayer:m}),[N,e.id,m,y]);return p.jsxs("div",{children:[p.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#16213e",color:"#e4e4e4",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #3a3a5c",position:"relative",zIndex:100},children:[p.jsx("button",{onClick:t,style:{padding:"8px 16px",cursor:"pointer",backgroundColor:"#3a3a5c",color:"#e4e4e4",border:"none",borderRadius:"4px"},children:" Back to Lobby"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[p.jsxs("span",{style:{fontSize:"12px",color:"#6b7280"},children:["Hand #",i+1]}),p.jsx("span",{style:{marginRight:"12px"},children:"Viewing as:"}),p.jsx("button",{onClick:()=>n("0"),style:{padding:"8px 16px",cursor:"pointer",backgroundColor:r==="0"?"#4CAF50":"#3a3a5c",color:"#e4e4e4",border:"none",borderRadius:"4px",marginRight:"8px"},children:"Player 0"}),p.jsx("button",{onClick:()=>n("1"),style:{padding:"8px 16px",cursor:"pointer",backgroundColor:r==="1"?"#4CAF50":"#3a3a5c",color:"#e4e4e4",border:"none",borderRadius:"4px"},children:"Player 1"})]})]}),l&&p.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:p.jsxs("div",{style:{backgroundColor:"#16213e",padding:"32px",borderRadius:"12px",textAlign:"center",color:"#e4e4e4"},children:[p.jsx("div",{style:{fontSize:"24px",marginBottom:"16px"},children:""}),p.jsx("div",{children:"Settling pot on blockchain..."})]})}),p.jsx("div",{style:{display:r==="0"?"block":"none"},children:p.jsx(S,{playerID:"0",matchID:`local-match-${i}`})}),p.jsx("div",{style:{display:r==="1"?"block":"none"},children:p.jsx(v,{playerID:"1",matchID:`local-match-${i}`})})]})},j7=({game:e,connection:t,role:r,onBack:n})=>{const[i,s]=H.useState("connected"),[o,a]=H.useState(0),[l,f]=H.useState(0),[d,y]=H.useState(!1),m=H.useRef(-1),b=H.useMemo(()=>Sg(),[]),k=H.useCallback(async T=>{if(!d){if(r!=="host"){console.log("[P2PGame] Only host can start new hand");return}y(!0);try{console.log("[P2PGame] Settling hand:",T);const L=await b.settlePot(T);if(L.success){console.log("[P2PGame] Settlement complete, new balances:",L.newBalances);const V={type:"new-hand",handNumber:o+1,dealerIndex:l+1,balances:L.newBalances};t.sendSignal&&t.sendSignal(V),L.newBalances&&N(L.newBalances),f(ee=>ee+1),a(ee=>ee+1)}else console.error("[P2PGame] Settlement failed:",L.error),alert(`Settlement failed: ${L.error}`)}catch(L){console.error("[P2PGame] Settlement error:",L),alert(`Settlement error: ${L}`)}finally{y(!1)}}},[b,d,r,t,o,l]);H.useEffect(()=>{if(r!=="guest")return;const T=L=>{L.type==="new-hand"&&(console.log("[P2PGame] Received new hand signal:",L),L.balances&&N(L.balances),a(L.handNumber),f(L.dealerIndex))};return t.onSignal&&t.onSignal(T),()=>{t.offSignal&&t.offSignal(T)}},[t,r]);const[M,N]=H.useState({});H.useEffect(()=>{b.getBalances(["0","1"]).then(N)},[b]);const S=H.useMemo(()=>b.generateHandId(),[b,o]);H.useEffect(()=>{const T=t.events;if(!T)return;const L=T.onConnectionStateChange;return T.onConnectionStateChange=V=>{V==="connected"?s("connected"):V==="disconnected"?s("reconnecting"):V==="failed"&&s("disconnected"),L==null||L(V)},()=>{T.onConnectionStateChange=L}},[t]);const v=r==="host"?"0":"1",P=H.useRef({}),j=H.useMemo(()=>{if(m.current===o)return console.log("[P2PGame] Skipping client recreation for hand",o),null;m.current=o;const T=Object.keys(M).length>0?M:{0:1e3,1:1e3};P.current=T,console.log("[P2PGame] Creating P2P client for hand",o,"with balances",T);let L=e.getCryptoGame?e.getCryptoGame():e.getGame();return e.id==="poker"&&(L={...L,setup:V=>{const ee={numPlayers:V.numPlayers??2,playerIDs:V.playOrder??["0","1"],options:{initialBalances:P.current,handId:S,dealerIndex:l%2}};return Jd(ee)}}),za({game:L,board:df(e.id,r==="host"?k:void 0),multiplayer:C7({connection:t,role:r,playerID:v,matchID:`p2p-match-${o}`,numPlayers:2}),debug:!1})},[t,r,e,o,S,l,v]),D=H.useRef(null);j!==null&&(D.current=j);const F=D.current;return p.jsxs("div",{children:[p.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#16213e",color:"#e4e4e4",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #3a3a5c"},children:[p.jsx("button",{onClick:n,style:{padding:"8px 16px",cursor:"pointer",backgroundColor:"#3a3a5c",color:"#e4e4e4",border:"none",borderRadius:"4px"},children:" Disconnect"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[p.jsxs("span",{style:{fontSize:"12px",color:"#6b7280"},children:["Hand #",o+1]}),p.jsx("span",{style:{padding:"4px 12px",backgroundColor:r==="host"?"#4CAF50":"#2196F3",borderRadius:"4px",fontSize:"12px",textTransform:"uppercase"},children:r}),p.jsx("span",{style:{color:i==="connected"?"#6fcf6f":i==="reconnecting"?"#ff9800":"#ff6b6b"},children:i==="connected"?" Connected via P2P":i==="reconnecting"?" Reconnecting...":" Disconnected"})]})]}),d&&p.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:p.jsxs("div",{style:{backgroundColor:"#16213e",padding:"32px",borderRadius:"12px",textAlign:"center",color:"#e4e4e4"},children:[p.jsx("div",{style:{fontSize:"24px",marginBottom:"16px"},children:""}),p.jsx("div",{children:"Settling pot on blockchain..."})]})}),F&&p.jsx(F,{playerID:v,matchID:`p2p-match-${o}`})]})},N7=()=>{const[e,t]=H.useState("gameSelect"),[r,n]=H.useState(null),[i,s]=H.useState(null),[o,a]=H.useState("host"),l=r?gw(r):null;H.useEffect(()=>{M7()},[]);const f=H.useCallback(M=>{n(M),t("modeSelect")},[]),d=H.useCallback(M=>{t(M)},[]),y=H.useCallback(()=>{n(null),t("gameSelect")},[]),m=H.useCallback(()=>{t("modeSelect")},[]),b=H.useCallback((M,N)=>{s(M),a(N),t("p2p-game")},[]),k=H.useCallback(()=>{i==null||i.close(),s(null),t("modeSelect")},[i]);return e==="gameSelect"?p.jsx(m0,{onSelectGame:f}):e==="modeSelect"&&l?p.jsx(R7,{game:l,onSelectMode:d,onBack:y}):e==="local"&&l?p.jsx(O7,{game:l,onBack:m}):e==="online"?p.jsx(E7,{onConnected:b,onBack:m}):e==="p2p-game"&&i&&l?p.jsx(j7,{game:l,connection:i,role:o,onBack:k}):p.jsx(m0,{onSelectGame:f})},T7=()=>p.jsx(Ow,{children:p.jsx(N7,{})});Yc.createRoot(document.getElementById("root")).render(p.jsx(G.StrictMode,{children:p.jsx(T7,{})}));</script>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
