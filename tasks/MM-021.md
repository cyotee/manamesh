# Task MM-021: War Game Module

**Repo:** ManaMesh
**Status:** Blocked
**Created:** 2026-01-21
**Dependencies:** MM-019, MM-020, MM-018
**Worktree:** `feature/game-war`

---

## Description

Implement the War card game module - the simplest possible game to validate the core module system. Two players flip cards, higher card wins both.

## Dependencies

- MM-019: Core Game Module Interface
- MM-020: Deck Plugin for boardgame.io
- MM-018: Standard Playing Cards Asset Pack

## User Stories

### US-MM-021.1: War Game Play

As a player, I want to play War so that I can test the game module system.

**Acceptance Criteria:**
- [ ] Module exports boardgame.io Game object
- [ ] Setup deals 26 cards to each player
- [ ] flipCard move: player reveals top card
- [ ] resolveRound move: compare cards, winner takes both
- [ ] War scenario: matching cards trigger war (3 face-down, 1 face-up)
- [ ] Game ends when one player has all 52 cards
- [ ] Uses DeckPlugin for card operations
- [ ] Zones: deck (hidden), played (public), won (public)
- [ ] Works with Standard Playing Cards asset pack
- [ ] Tests cover full game flow

## Technical Details

### Game State

```typescript
interface WarState {
  players: {
    [playerId: string]: {
      deck: WarCard[];      // Face-down deck
      played: WarCard[];    // Currently played card(s)
      won: WarCard[];       // Won cards pile
    };
  };
  warInProgress: boolean;
  winner: string | null;
}
```

### Moves

- `flipCard`: Reveal top card from deck to played zone
- `resolveRound`: Compare played cards, award to winner

### Zones

| Zone | Visibility | Ordered | Shared |
|------|------------|---------|--------|
| deck | hidden | yes | no |
| played | public | no | no |
| won | public | no | no |

## Files to Create/Modify

**New:**
- `packages/frontend/src/game/modules/war/index.ts` - War module
- `packages/frontend/src/game/modules/war/types.ts` - War-specific types
- `packages/frontend/src/game/modules/war/game.ts` - boardgame.io Game

**Tests:**
- `packages/frontend/src/game/modules/war/game.test.ts`

## Completion Criteria

- [ ] All acceptance criteria met
- [ ] Full game playable to completion
- [ ] War scenario works correctly
- [ ] Tests pass
- [ ] Build succeeds

---

**When complete, output:** `<promise>TASK_COMPLETE</promise>`

**If blocked, output:** `<promise>TASK_BLOCKED: [reason]</promise>`
