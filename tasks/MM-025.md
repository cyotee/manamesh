# Task MM-025: Lorcana Game Module

**Repo:** ManaMesh
**Status:** Blocked
**Created:** 2026-01-21
**Dependencies:** MM-019, MM-020
**Worktree:** `feature/game-lorcana`

---

## Description

Implement the Lorcana game module. This validates ink-based resource systems and character challenge mechanics.

## Dependencies

- MM-019: Core Game Module Interface
- MM-020: Deck Plugin for boardgame.io

## User Stories

### US-MM-025.1: Lorcana Game Play

As a player, I want to play Lorcana so that I can validate ink-based mechanics.

**Acceptance Criteria:**
- [ ] Module exports boardgame.io Game object
- [ ] Lorcana card schema (LorcanaCard extends CoreCard)
- [ ] Ink system (6 colors: Amber, Amethyst, Emerald, Ruby, Sapphire, Steel)
- [ ] Card types: Character, Item, Action, Song
- [ ] Inkable cards mechanic
- [ ] Character ready/exerted states
- [ ] Challenge (combat) system
- [ ] Lore tracking for win condition (20 lore)
- [ ] Zones: deck, hand, play, inkwell, discard
- [ ] Tests cover game flow

## Technical Details

### Card Schema

```typescript
interface LorcanaCard extends CoreCard {
  cardType: 'character' | 'item' | 'action' | 'song';
  inkColor: 'amber' | 'amethyst' | 'emerald' | 'ruby' | 'sapphire' | 'steel';
  inkCost: number;
  inkable: boolean;
  strength?: number;      // Character only
  willpower?: number;     // Character only
  lore?: number;          // Lore value when questing
  classification?: string; // 'Hero', 'Villain', 'Storyborn', etc.
  abilities?: string[];
}
```

### Zones

| Zone | Visibility | Ordered | Shared |
|------|------------|---------|--------|
| deck | hidden | yes | no |
| hand | owner-only | no | no |
| play | public | no | no |
| inkwell | public | no | no |
| discard | public | yes | no |

### Game Flow

1. Draw 7 cards, mulligan option
2. Each turn: Ready characters, draw card
3. Main phase: Play cards (pay ink), quest for lore, challenge opponents
4. First to 20 lore wins

## Files to Create/Modify

**New:**
- `packages/frontend/src/game/modules/lorcana/index.ts`
- `packages/frontend/src/game/modules/lorcana/types.ts`
- `packages/frontend/src/game/modules/lorcana/game.ts`
- `packages/frontend/src/game/modules/lorcana/ink.ts` - Ink system

**Tests:**
- `packages/frontend/src/game/modules/lorcana/game.test.ts`

## Completion Criteria

- [ ] All acceptance criteria met
- [ ] Basic game flow works
- [ ] Ink and challenge systems functional
- [ ] Tests pass
- [ ] Build succeeds

---

**When complete, output:** `<promise>TASK_COMPLETE</promise>`

**If blocked, output:** `<promise>TASK_BLOCKED: [reason]</promise>`
