# Task MM-013: Fix AbortController Reuse in Gateway Fallback

**Repo:** ManaMesh
**Status:** Ready
**Created:** 2026-01-21
**Dependencies:** None
**Worktree:** `feature/fix-abort-controller`
**Origin:** Code review finding from MM-006

---

## Description

Fix the bug where `fetchFromGateway` reuses one `AbortController` across all gateways. If it times out once, `signal` becomes permanently aborted and all subsequent gateway attempts fail immediately, effectively disabling multi-gateway fallback in the timeout case.

(Created from code review of MM-006 - High severity finding)

## Dependencies

- None (MM-006 is complete)

## User Stories

### US-MM-013.1: Reliable Gateway Fallback

As a player, I want gateway fallback to work correctly so that assets load even if some gateways are slow.

**Acceptance Criteria:**
- [ ] Each gateway attempt uses a fresh AbortController
- [ ] Timeout on one gateway doesn't prevent trying others
- [ ] All configured gateways are attempted before failure
- [ ] Tests verify multi-gateway fallback works after timeout
- [ ] Tests pass
- [ ] Build succeeds

## Files to Create/Modify

**Modified Files:**
- `packages/frontend/src/assets/ipfs-loader.ts`

**Tests:**
- `packages/frontend/src/assets/ipfs-loader.test.ts` (add timeout fallback test)

## Inventory Check

Before starting, verify:
- [ ] File exists: `packages/frontend/src/assets/ipfs-loader.ts`
- [ ] Understand current AbortController usage

## Completion Criteria

- [ ] All acceptance criteria met
- [ ] Multi-gateway fallback works after timeout
- [ ] Tests pass
- [ ] Build succeeds

---

**When complete, output:** `<promise>TASK_COMPLETE</promise>`

**If blocked, output:** `<promise>TASK_BLOCKED: [reason]</promise>`
