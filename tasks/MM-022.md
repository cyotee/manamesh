# Task MM-022: Poker Game Module

**Repo:** ManaMesh
**Status:** Blocked
**Created:** 2026-01-21
**Dependencies:** MM-019, MM-020, MM-018
**Worktree:** `feature/game-poker`

---

## Description

Implement the Poker game module (Texas Hold'em variant). This validates shared deck support and more complex game phases.

## Dependencies

- MM-019: Core Game Module Interface
- MM-020: Deck Plugin for boardgame.io
- MM-018: Standard Playing Cards Asset Pack

## User Stories

### US-MM-022.1: Poker Game Play

As a player, I want to play Poker so that I can validate shared deck and betting phases.

**Acceptance Criteria:**
- [ ] Module exports boardgame.io Game object
- [ ] Shared deck for all players
- [ ] Deal 2 hole cards to each player
- [ ] Community cards: flop (3), turn (1), river (1)
- [ ] Betting rounds between deals
- [ ] Basic moves: fold, check, call, raise
- [ ] Hand comparison at showdown
- [ ] Uses DeckPlugin for card operations
- [ ] Zones: deck (shared/hidden), hand (owner-only), community (public), discard (public)
- [ ] Works with Standard Playing Cards asset pack
- [ ] Tests cover game flow

## Technical Details

### Game State

```typescript
interface PokerState {
  deck: PokerCard[];           // Shared deck
  community: PokerCard[];      // Community cards (flop, turn, river)
  pot: number;
  currentBet: number;
  players: {
    [playerId: string]: {
      hand: PokerCard[];       // Hole cards
      chips: number;
      bet: number;
      folded: boolean;
    };
  };
  dealer: string;
  phase: 'preflop' | 'flop' | 'turn' | 'river' | 'showdown';
}
```

### Phases

1. **preflop**: Deal hole cards, first betting round
2. **flop**: Deal 3 community cards, betting round
3. **turn**: Deal 1 community card, betting round
4. **river**: Deal 1 community card, final betting
5. **showdown**: Compare hands, award pot

### Zones

| Zone | Visibility | Ordered | Shared |
|------|------------|---------|--------|
| deck | hidden | yes | yes |
| hand | owner-only | no | no |
| community | public | no | yes |
| discard | public | no | yes |

## Files to Create/Modify

**New:**
- `packages/frontend/src/game/modules/poker/index.ts`
- `packages/frontend/src/game/modules/poker/types.ts`
- `packages/frontend/src/game/modules/poker/game.ts`
- `packages/frontend/src/game/modules/poker/hands.ts` - Hand ranking logic

**Tests:**
- `packages/frontend/src/game/modules/poker/game.test.ts`
- `packages/frontend/src/game/modules/poker/hands.test.ts`

## Completion Criteria

- [ ] All acceptance criteria met
- [ ] Full hand playable to showdown
- [ ] Hand ranking works correctly
- [ ] Tests pass
- [ ] Build succeeds

---

**When complete, output:** `<promise>TASK_COMPLETE</promise>`

**If blocked, output:** `<promise>TASK_BLOCKED: [reason]</promise>`
